(()=>{"use strict";var e,t={"./examples/ex__interactive_button.js":(e,t,s)=>{var n=s("./node_modules/three/build/three.module.js"),r=s("./node_modules/three/examples/jsm/webxr/VRButton.js"),i=s("./node_modules/three/examples/jsm/geometries/BoxLineGeometry.js"),o=s("./node_modules/three/examples/jsm/controls/OrbitControls.js"),a=s("./src/three-mesh-ui.js");const l=/((?:")([^"]*)(?:"))/g,c=/([ >~+]*)([^+>~ ]+)/g,h=/^[ >~+]+/,u=/(#)([\w_-]+)/,d=/(\.)([\w_-]+)/g,m=/(:)([A-z0-9\-_]*)/g,_=/^[^#\.:\[]*/g,p=/(\[([^\]]*)\])/g,g=/([^*~$^=]+)(([*~$^]?=)(.*))?/;class f{constructor(e,t=null){this._type=e,this._value=t}get type(){return this._type}get value(){return this._value}}class b extends f{constructor(e){super("attribute"),this._value=[];for(let t=0;t<e.length;t++)this._value.push(new v(e[t]))}get value(){return this._value}}class v{constructor(e){const t=(e=e.substring(1,e.length-1)).match(g);this.name=t[1],this.operator=t[3]||"!==",this.value=t[4]?function(e){e[0]!==e[e.length-1]||'"'!==e[0]&&"'"!==e[0]||(e=e.substring(1,e.length-1));return e}(t[4]):void 0}}class w extends f{constructor(e,t){super(e),this._value=[];for(let e=0;e<t.length;e++)this._value.push(t[e].substring(1))}get value(){return this._value}}class y{constructor(e){const t=e.match(h);this._query=e,this._combinator=t?t[0].trim():null,this._conditions=function(e){const t=[],s=e.match(p);s&&t.push(new b(s));const n=(e=e.replace(p,"")).match(u);n&&t.push(new f("id",n[2]));const r=e.match(d);r&&t.push(new w("class",r));const i=e.match(m);i&&t.push(new w("pseudoClass",i));const o=e.replace(h,"").match(_,"");o&&o[0]&&t.push(new f("tag",o[0]));return t}(e.replace(h,""))}get conditions(){return this._conditions}get combinator(){return this._combinator}get query(){return this._query}match(e){return this._conditions.every((t=>{switch(t.type){case"id":return e.elementID===t.value;case"class":return e.classList.containsEvery(t.value);case"pseudoClass":return e.pseudoClassList.containsEvery(t.value);case"tag":return e.tagName===t.value;case"attribute":return e.attributes.matchEvery(t.value);default:return console.warn(`CSSQuerySegment::match() - '${t.type}' is not implemented!`),!0}}))}}class x extends Array{constructor(...e){super(...e)}match(e){const t=this[this.length-1];if(!t.match(e))return!1;if(1===this.length)return!0;const s=[];let n=e;for(;n.parentUI;)s.push(n.parentUI),n=n.parentUI;if(0===s.length)return!1;let r=e,i=null;for(let e=this.length-2;e>=0;e--){const n=this[e];if(0===s.length)return!1;if(i=s.shift(),t.combinator&&""!==t.combinator){if(">"===t.combinator){if(!n.match(i))return!1;r=i}else if("~"===t.combinator||"+"===t.combinator){const e=i.childrenUIs.indexOf(r);let s;s="~"===t.combinator?i.childrenUIs.slice(e+1):i.childrenUIs.slice(e+1,e+2);for(let e=0;e<s.length;e++)if(n.match(s[e])){r=i;break}}}else{for(;!n.match(i);){if(0===s.length)return!1;if(s.length<e+1)return!1;i=s.shift()}r=i}}return!0}static build(e){const t=e.matchAll(l),s=e.split("");for(const e of t)for(let t=0;t<e[1].length;t++)s[e.index+t]="_";const n=s.join("").matchAll(c);if(!n)return[];const r=[];for(const e of n)r.push(e.index);r.push(e.length);const i=new x;for(let t=0;t<r.length-1;t++)i.push(new y(e.substring(r[t],r[t+1])));return i}}class k{constructor(e,t,s=null){this._query=x.build(e),this._specificity=function(e){e instanceof x||(e=x.build(e));let t=0;for(let s=0;s<e.length;s++){const n=e[s];for(let e=0;e<n.conditions.length;e++){const s=n.conditions[e];switch(s.type){case"id":t+=1e4;break;case"class":case"pseudoClass":case"attribute":t+=100*s.value.length;break;default:t+=1}}}return t}(this._query),this._order=0,this._styles={};for(let e=0;e<t.length;e++){const r=t[e];let i=t[r];if(i.match(/rem|px|em/g)&&(i=parseFloat(i.replace(/rem|px|em/g,""))),-1!==r.indexOf("color"))if(0===i.indexOf("rgba")){const e=i.match(/([\d\.]+)/g);if(4===e.length){const s=r.replace("color","opacity");t[s]&&""!==t[s]||(this._styles[C(s)]=parseFloat(e[3]))}i=new n.Ilk(`rgb(${e[0]},${e[1]},${e[2]})`)}else i=new n.Ilk(i);let o=C(r);s&&s[o]&&(o=s[o]),this._styles[o]=i}this._enabled=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get query(){return this._query}get specificity(){return this._specificity}get order(){return this._order}set order(e){this._order=e}get styles(){return this._styles}}function C(e){return e.replace(/-./g,(e=>e[1].toUpperCase()))}class E{constructor(e){this._condition=e,this._rules=[],this._matchMediaQuery=window.matchMedia(e)}addRule(e){this._rules.push(e)}init(e){this._callback=e,this._matchMediaQuery.addEventListener("change",this.handleMatchMediaChanges),this._matchMediaQuery.matches||this.disableRules()}enableRules(){for(const e of this._rules)e.enabled=!0}disableRules(){for(const e of this._rules)e.enabled=!1}handleMatchMediaChanges=e=>{e.matches?this.enableRules():this.disableRules(),this._callback()}}var S=s("./src/components/core/UpdateManager.js");class j{constructor(e,...t){this._callback=e,this._tokens=[...t]}clear(){this._tokens=[],this._callback()}contains=e=>-1!==this._tokens.indexOf(e);containsAll=(...e)=>e.every(this.contains);containsEvery=e=>e.every(this.contains);toggle(e){this.contains(e)?this.remove(e):this.add(e)}add(...e){for(const t of e)this.contains(t)||(this._tokens.push(t),this._callback())}remove(...e){for(const t of e){const e=this._tokens.indexOf(t);-1!==e&&(this._tokens.splice(e,1),this._callback())}}toString(e){return this._tokens.length?e+this._tokens.join(e):""}dispose(){this.containsEvery=null,this.containsAll=null,this._callback=null,this._tokens=null}}class P{constructor(e,t={}){this._callback=e,this._map=new Map;for(const e in t)this.set(e,t[e])}clear(){this._map.clear()}set(e,t=null){void 0===t&&this.remove(e),this._map.set(e,t),this._callback()}get(e){return this._map.get(e)}remove(e){return this._callback(),this._map.delete(e)}has(e){return this._map.has(e)}toString(){let e="";const t=this._map.entries();for(const[s,n]of t)e+=n?`[${s}="${n}"]`:`[${s}]`;return e}match=e=>{const t=e.name,s=e.value,n=e.operator;let r;switch(n){case"=":return r=this._map.get(t),r&&r===s;case"^=":return r=this._map.get(t),r&&r.startsWith(s);case"*=":return r=this._map.get(t),r&&r.includes(s);case"$=":return r=this._map.get(t),r&&r.endsWith(s);case"!==":return this._map.has(t);default:console.warn(`NamedMap::match() - The provided operator '${n}' is not implemented`)}};matchEvery=e=>e.every(this.match);dispose(){this._callback=!1,this._map.clear(),this._map=null,this._map=null}}var L=s("./src/elements/html/properties/StylePropertyWrapper.js"),O=s("./src/elements/html/properties/StyleComputedPropertyWrapper.js");class I extends a.FV{constructor(e,t){const s=t.tagName;if(delete t.tagName,!s)throw new Error("HyperThreeMesh::Element - Requires a tagName property.");super(e,t),this._elementID=null,this._classList=new j(ce),this._pseudoClassList=new j(ce),this._attributes=new P(ce),this._tagName=s,this._styles=new L.Z(this),this._computedStyles=new O.Z(this)}set elementID(e){this._elementID=e,ce()}get elementID(){return this._elementID}get tagName(){return this._tagName}get attributes(){return this._attributes}get style(){return this._styles}get computedStyle(){return this._computedStyles}setAttribute(e,t=null){this._attributes.set(e,t)}getAttribute(e){return this._attributes.get(e)}removeAttribute(e){this._attributes.remove(e)}get classList(){return this._classList}get pseudoClassList(){return this._pseudoClassList}copyAttributes(){let e=this._tagName;return this._elementID&&(e+=`#${this._elementID}`),e+=this._classList.toString("."),e+=this._attributes.toString(),e+=this._pseudoClassList.toString(":"),e}pasteAttributes(e){e instanceof y||(e=new y(e)),this._elementID=null,this._classList.clear(),this._pseudoClassList.clear(),this._attributes.clear();for(let t=0;t<e.conditions.length;t++){const s=e.conditions[t];switch(s.type){case"tag":""===this._tagName&&(this._tagName=s.value);continue;case"id":this._elementID=s.value;continue;case"class":for(let e=0;e<s.value.length;e++)this._classList.add(s.value[e]);continue;case"pseudoClass":for(let e=0;e<s.value.length;e++)this._pseudoClassList.add(s.value[e]);continue;case"attribute":for(let e=0;e<s.value.length;e++){const t=s.value[e];this._attributes.set(t.name,t.value)}}}return this}activatePseudoState(e){this._pseudoClassList.add(e)}deactivatePseudoState(e){this._pseudoClassList.remove(e)}togglePseudoState(e){this._pseudoClassList.toggle(e)}querySelectorAll(e){return Z(e,this)}clear(){return this._styles.dispose(),this._styles=null,this._computedStyles.dispose(),this._computedStyles=null,super.clear()}}var T=s("./src/elements/basic/BoxElement.js");class A extends I{constructor(e={},t={}){T.Z.definePropertiesValues(e,t),super(e,t),T.Z.init(this)}bindBackgroundMeshProperties(){this._bounds._size=this._backgroundMesh.scale,this._bounds._needsProcess=!0}unbindBackgroundMeshProperties(){this._bounds._size=new n.Pa4(1,1,1),this._bounds._needsProcess=!0}}var M=s("./src/elements/basic/TextElement.js"),N=s("./src/elements/basic/InlineElement.js");class B extends I{constructor(e={}){const t={};N.Z.definePropertiesValues(t,e),super(t,e),N.Z.init(this)}add(e){const t=[];for(let e=0;e<arguments.length;e++){const s=arguments[e];!s.isUI||s.isInline?(t.push(s),s.position.z=.005):console.warn("Block element can only contain Box elements.",s)}return super.add(...t)}_rebuildParentUI=()=>{super._rebuildParentUI(),this._layouter._needsUpdate=!0};set textContent(e){this._textContent.value=e}get textContent(){return this._textContent._value}set invertAlpha(e){this._invertAlpha.value=e}get invertAlpha(){return this._invertAlpha._value}}class H extends A{constructor(e={}){const t={};M.Z.definePropertiesValues(t,e),super(t,e),M.Z.init(this)}add(e){const t=[];let s=!1;for(let e=0;e<arguments.length;e++){const n=arguments[e];!n.isUI||n.isInline?(n.isInline&&(s=!0),t.push(n)):console.warn("Block element can only contain Box elements.",n)}return t.length>0&&super.add(...t),s&&(this._layouter._needsProcess=!0),this}set textContent(e){for(let e=this.children.length-1;e>=0;e--){const t=this.children[e];t.isUI&&(this.remove(t),t.clear())}e&&this.add(new B({tagName:"anonymous-span",textContent:e}))}get textContent(){return super.textContent}set invertAlpha(e){this._invertAlpha.value=e}get invertAlpha(){return this._invertAlpha._value}get lines(){return this._layouter._value}}var R=s("./src/elements/basic/BlockElement.js");class U extends A{constructor(e={}){const t={};R.Z.definePropertiesValues(t,e),super(t,e),R.Z.init(this)}add(e){const t=[];for(let e=0;e<arguments.length;e++){const s=arguments[e];!s.isUI||s.isBox?t.push(s):console.warn("Block element can only contain Box elements.",s)}return super.add(...t)}}class z{hoveredElementHasChanged(e){throw new Error("Abstract method need to be implemented.")}selectedElementHasChanged(e){throw new Error("Abstract method need to be implemented.")}clicked(e){throw new Error("Abstract method need to be implemented.")}}class W extends z{constructor(e){super(),this._keyboard=e,this._texts=[]}bindText(e){this._texts.push(e)}unbindText(e){const t=this._texts.indexOf(e);-1!==t&&this._texts.splice(t,1)}clicked(e){if(-1!==this._keyboard.keys.indexOf(e))if(e.info.command)switch(e.info.command){case"switch":this._keyboard.setNextPanel();break;case"switch-set":this._keyboard.setNextCharset();break;case"enter":for(let e=0;e<this._texts.length;e++){const t=this._texts[e];t.set({textContent:t.textContent+"\n"})}break;case"space":for(let e=0;e<this._texts.length;e++){const t=this._texts[e];t.set({textContent:t.textContent+" "})}break;case"backspace":for(let e=0;e<this._texts.length;e++){const t=this._texts[e];t.textContent.length&&t.set({textContent:t.textContent.substring(0,t.textContent.length-1)||""})}break;case"capslock":e.togglePseudoState("checked"),this._keyboard.toggleCase()}else if(e.info.input)for(let t=0;t<this._texts.length;t++){const s=this._texts[t];s.set({textContent:s.textContent+e.info.input})}}hoveredElementHasChanged(e){}selectedElementHasChanged(e){}}const $=new n.dpR;class D extends a.gO{constructor(e={}){D.ensureOptions(e),super(),D.make(this,e)}_buildPanel(){const e=new a.gO({});return e.charset=0,e}_buildKey(e,t){return new a.xv({name:e})}_buildBlock(){return new a.gO({})}_buildKeyInline(e,t){return new a.gF({name:e})}_buildKeyInlineBlock(e,t){return new a.ol({name:e})}static ensureOptions(e){e.width||(e.width=1),e.height||(e.height=.4),e.margin||(e.margin=.003),e.padding||(e.padding=.01)}static make(e,t){if(e.currentPanel=0,e.isLowerCase=!0,e._layout=null,t.autoDetectLayout&&t.availableLayouts&&t.availableLayouts.length>0){const s=navigator.language;let n=null;s&&(n=t.availableLayouts.find((e=>-1!==e.locales.indexOf(s)))),e._layout=n}e._layout||(e._layout=t.layout),e.charsetCount=e._layout.charsetCount,e.keys=[],({panels:e.panels,keys:e.keys}=D.build(e,e._layout,t)),e.add(e.panels[0]),e._interactiveListener=new W(e),Object.defineProperty(e,"interactiveListener",{get:()=>e._interactiveListener}),Object.defineProperty(e,"interactiveObjects",{get:()=>e.keys}),e.setNextPanel=D._setNextPanel.bind(e),e.setNextCharset=D._setNextCharset.bind(e),e.toggleCase=D._toggleCase.bind(e)}static build(e,t,s){const n=[],r=[];for(let i=0;i<t.keys.length;i++){const o=t.keys[i],a=s.height/o.length-2*s.margin,l=e._buildPanel();l.set({boxSizing:"border-box",width:s.width+2*s.padding,height:s.height+2*s.padding,offset:.001,padding:s.padding,fontFamily:s.fontFamily,fontTexture:s.fontTexture,backgroundColor:s.backgroundColor,backgroundOpacity:s.backgroundOpacity}),l.charset=0,n.push(l);for(let t=0;t<o.length;t++){const n=o[t],i=e._buildBlock();i.set({width:s.width,height:a,margin:s.margin,flexDirection:"row",justifyContent:"center"}),l.add(i);for(let t=0;t<n.length;t++){const o=n[t],c=o.chars[l.charset].lowerCase||o.chars[l.charset].icon||"und",h=e._buildKey(c,o);h.set({boxSizing:"border-box",width:s.width*o.width-2*s.margin,height:a,margin:s.margin,alignItems:"center",textAlign:"center",backgroundColor:0,backgroundOpacity:.8}),r.push(h),i.add(h),h.type="Key",h.info=o,h.info.input=c,h.panel=l;let u=null;if("enter"===c&&s.enterTexture||"capslock"===c&&s.shiftTexture||"backspace"===c&&s.backspaceTexture){const t=(()=>{switch(c){case"backspace":return s.backspaceTexture;case"enter":return s.enterTexture;case"capslock":return s.shiftTexture;default:console.warn("There is no icon image for this key")}})();$.load(t,(t=>{u=e._buildKeyInlineBlock(c,o),u.raycast=K,u.set({width:.65*a,height:.65*a,backgroundSize:"contain",backgroundImage:t,backgroundColor:16777215}),h.add(u)}))}else u=e._buildKeyInline(c,o),u.raycast=K,u.set({textContent:c}),h.add(u)}}}return{panels:n,keys:r}}static _setNextPanel(){this.panels.forEach((e=>{this.remove(e)})),this.currentPanel=(this.currentPanel+1)%this.panels.length,this.add(this.panels[this.currentPanel])}static _setNextCharset(){this.panels[this.currentPanel].charset=(this.panels[this.currentPanel].charset+1)%this.charsetCount,this.keys.forEach((e=>{if(!this.panels[this.currentPanel].getObjectById(e.id))return;const t=e.info.chars[e.panel.charset]||e.info.chars[0];let s=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(s||(s=t.icon),!e._children._inlines.length)return;const n=e._children._inlines[0];n.isInlineBlock||(e.info.input=s,n.set({textContent:s}))}))}static _toggleCase(){this.isLowerCase=!this.isLowerCase,this.keys.forEach((e=>{const t=e.info.chars[e.panel.charset]||e.info.chars[0];let s=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(s||(s=t.icon),!e._children._inlines.length)return;const n=e._children._inlines[0];n.isInlineBlock||(e.info.input=s,n.set({textContent:s}))}))}}function K(){}class F extends U{constructor(e){D.ensureOptions(e),super({tagName:"keyboard"}),D.make(this,e);const t=["enter","shift","backspace"];for(let e=0;e<this.keys.length;e++){const s=this.keys[e];-1!==t.indexOf(s.info.input)?s.setAttribute("type","icon"):s.setAttribute("type","char")}}_buildPanel(){const e=new ae("div",{tagName:"panel"});return e.charset=0,e}_buildBlock(){return ae("div")}_buildKey(e,t){const s=ae("button",{tagName:"key",name:e});return s.setAttribute("input",e),s}_buildKeyInline(e,t){return ae("span",{tagName:"anonymous-span",name:e})}_buildKeyInlineBlock(e,t){return ae("icon",{name:e})}}class V extends I{constructor(e={}){const t={};a.ol.definePropertiesValues(t,e),super(t,e),a.ol.init(this)}clear(){for(const e of this._inlines._value)e.clear();return super.clear()}bindBackgroundMeshProperties(){this._bounds._size=this._backgroundMesh.scale,this._bounds._needsUpdate=!0}unbindBackgroundMeshProperties(){this._bounds._size=new n.Pa4(1,1,1),this._bounds._needsUpdate=!0}add(e){const t=[];for(let e=0;e<arguments.length;e++){const s=arguments[e];s.isUI?console.warn("ThreeMeshUI::InlineBlockElement cannot contains UI Elements.",s):(t.push(s),s.position.z=.005)}return super.add(...t)}}function Z(e,t=null){e instanceof x||(e=x.build(e)),t||(t=S.Z.elements),Array.isArray(t)||(t=[t]);let s=[];for(let n=0;n<t.length;n++)s=s.concat(q(t[n],e));for(let e=s.length-1;e>=0;e--){s.indexOf(s[e])!==e&&s.splice(e,1)}return s}function q(e,t,s=!0){let n=[];if(s)for(let s=0;s<e._children._uis.length;s++)n=n.concat(q(e._children._uis[s],t));if(t[0].match(e)){if(1===t.length)return n.push(e),n;const s=t.slice(1);if(s&&""!==s)if(s[0].combinator&&""!==s[0].combinator)if(">"===s[0].combinator)for(let t=0;t<e._children._uis.length;t++)n=n.concat(q(e._children._uis[t],s,!1));else{if(!e._parent._value||"~"!==s[0].combinator&&"+"!==s[0].combinator)throw new Error(`UIDocument::querySelectorAll() - The provided css combinator('${s[0].combinator}') is not implemented`);{const t=e._parent._value,r=t._children._uis.indexOf(e);let i;i="~"===s[0].combinator?t._children._uis.slice(r+1):t._children._uis.slice(r+1,r+2);for(let e=0;e<i.length;e++)n=n.concat(q(i[e],s,!1))}}else for(let t=0;t<e._children._uis.length;t++)n=n.concat(q(e._children._uis[t],s))}return n}let G=[],Q=[],X=[],Y="three-mesh-ui";function J(e="three-mesh-ui",t=!1){if(Y=e,t&&document){for(let e=0;e<X.length;e++){let t=X[e];t.disconnect(),t=null}X=[],function(e){const t=new MutationObserver(ee);t.observe(e,{childList:!0,subtree:!0}),X.push(t)}(document.documentElement);const t=document.querySelectorAll(`link[media="${e}"],style[media="${e}"]`);for(let e=0;e<t.length;e++)se(t[e])}if(G=[],Q=[],document&&document.styleSheets){for(const t of document.styleSheets)if(t.media.mediaText===e){const{rules:e,conditions:s}=oe(t.cssRules);G=G.concat(e),Q=Q.concat(s)}for(let e=0;e<G.length;e++)G[e].order=e;G.sort(re);for(const e of Q)e.init((()=>{le=!0}))}ne()}function ee(e){let t=!1;e.forEach((function(e){for(let s=0;s<e.addedNodes.length;s++)te(e.addedNodes[s])&&(t=!0);for(let s=0;s<e.removedNodes.length;s++)te(e.removedNodes[s])&&(t=!0)})),t&&J(!0)}function te(e){return"LINK"===e.tagName||"STYLE"===e.tagName&&e.getAttribute("media")===Y}function se(e){const t=new MutationObserver((function(e){J(!0)}));t.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),X.push(t)}function ne(){for(const e of G){if(!e.enabled)continue;const t=Z(e.query);for(const s of t)s.set(e.styles)}}function re(e,t){return e.specificity<t.specificity?-1:e.specificity>t.specificity?1:e.order<t.order?-1:e.order>t.order?1:0}const ie={rx:"offset",offsetDistance:"offset"};function oe(e,t=null){let s=[],n=null,r=[];t&&""!==t&&(n=new E(t),r.push(n));for(let i=0;i<e.length;i++){const o=e[i];if(o.selectorText){const e=new k(o.selectorText,o.style,ie);s.push(e),n&&n.addRule(e)}else if(o.conditionText){let e=t;e&&""!==e?e+=` and ${o.conditionText}`:e=o.conditionText;const{rules:n,conditions:i}=oe(o.cssRules,e);s=s.concat(n),r=r.concat(i)}}return{rules:s,conditions:r}}function ae(e,t={}){switch(t.tagName||(t.tagName=e),e.toLowerCase().replace(/\d/g,"")){case"p":case"h":case"label":case"button":return new H(t);case"div":case"li":case"footer":case"header":return new U(t);case"span":case"em":case"strong":case"sup":case"sub":case"small":case"link":return new B(t);case"icon":return new V(t);case"keyboard":return new F(t);default:throw new Error("HyperTextMesh::createElement() - The provided tagname is not implemented")}}let le=!0;function ce(){le=!0}var he=s("./node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js");function ue(){const e=document.createElement("canvas");e.width=64,e.height=64;const t=e.getContext("2d"),s=t.createLinearGradient(0,0,64,0);return s.addColorStop(0,"black"),s.addColorStop(1,"white"),t.fillStyle=s,t.fillRect(0,0,64,64),e}function de(){const e=document.createElement("canvas");e.width=64,e.height=64;const t=e.getContext("2d");return t.beginPath(),t.arc(32,32,29,0,2*Math.PI),t.lineWidth=5,t.stroke(),t.fillStyle="white",t.fill(),e}var me=s("./examples/assets/fonts/msdf/roboto/regular.json");const _e=s.p+"5a41f46a5020bc8f41ff554d0d890ad3.png";function pe(e){const t=[],s=[],r=new he.i,i=new n.vBJ({color:16777215,alphaMap:new n.ROQ(ge()),transparent:!0}),o=new n.nvb(.004,.004,.35);o.translate(0,0,-.15);const a=o.attributes.uv;for(let e=0;e<a.count;e++){let t=a.getX(e),s=a.getY(e);[t,s]=(()=>{switch(e){case 0:case 2:case 5:case 7:case 10:case 11:case 12:case 13:return[1,1];default:return[0,0]}})(),a.setXY(e,t,s)}const l=new n.Kj0(o,i);l.renderOrder=1/0;const c=new n.xeV({map:new n.ROQ(fe()),sizeAttenuation:!1,depthTest:!1}),h=new n.jyi(c);h.scale.set(.015,.015,1),h.renderOrder=1/0;const u=e.xr.getController(0),d=e.xr.getController(1);u.name="controller-right",d.name="controller-left";const m=e.xr.getControllerGrip(0),_=e.xr.getControllerGrip(1);u&&t.push(u),d&&t.push(d),m&&s.push(m),_&&s.push(_),t.forEach((e=>{const t=l.clone(),s=h.clone();e.add(t,s),e.ray=t,e.point=s})),s.forEach((e=>{e.add(r.createControllerModel(e))}));const p=new n.yGw;return{controllers:t,controllerGrips:s,setFromController:function(e,s){const n=t[e];p.identity().extractRotation(n.matrixWorld),s.origin.setFromMatrixPosition(n.matrixWorld),s.direction.set(0,0,-1).applyMatrix4(p)},setPointerAt:function(e,s){const n=t[e],r=n.worldToLocal(s);n.point.position.copy(r),n.point.visible=!0}}}function ge(){const e=document.createElement("canvas");e.width=64,e.height=64;const t=e.getContext("2d"),s=t.createLinearGradient(0,0,64,0);return s.addColorStop(0,"black"),s.addColorStop(1,"white"),t.fillStyle=s,t.fillRect(0,0,64,64),e}function fe(){const e=document.createElement("canvas");e.width=64,e.height=64;const t=e.getContext("2d");return t.beginPath(),t.arc(32,32,29,0,2*Math.PI),t.lineWidth=5,t.stroke(),t.fillStyle="white",t.fill(),e}const be={type:"click"},ve={type:"hover"};class we{constructor(e,t,s,r=null){this._camera=e,this._scene=t,this._renderer=s,this._vrControl=r,this._raycaster=new n.iMs,this._listeners=[],this._objectsToTest=[],this._target=null,this._mouse=null,this._selectState=!1,this._lastHoveredElement=null,this._lastSelectedElement=null}addListener(e){-1===this._listeners.indexOf(e)&&this._listeners.push(e)}removeListener(e){const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}start(e=null){if(this._target)throw new Error("InteractiveRaycaster::start() - is already started. Aborted.");e=e||window,this._target=e,this._mouse=new n.FM8,this._mouse.x=this._mouse.y=null,e.addEventListener("pointermove",this._pointerMove),e.addEventListener("pointerdown",this._selectStart),e.addEventListener("pointerup",this._selectEnd),e.addEventListener("touchstart",this._touchMove),e.addEventListener("touchend",this._touchEnd),this._vrControl&&this._vrControl instanceof pe&&(this._vrControl.controllers[0].addEventListener("selectstart",this._selectStart),this._vrControl.controllers[0].addEventListener("selectend",this._selectEnd))}_selectStart=()=>{this._selectState=!0};_selectEnd=()=>{this._click(),this._selectState=!1};_pointerMove=e=>{this._mouse.x=e.clientX/this._target.innerWidth*2-1,this._mouse.y=-e.clientY/this._target.innerHeight*2+1};_touchMove=e=>{this._selectStart(),this._mouse.x=e.touches[0].clientX/this._target.innerWidth*2-1,this._mouse.y=-e.touches[0].clientY/this._target.innerHeight*2+1};_touchEnd=e=>{this._selectEnd(),this._mouse.x=null,this._mouse.y=null};_setHoveredElement(e){this._lastHoveredElement&&this._lastHoveredElement.isUI&&this._lastHoveredElement.deactivatePseudoState("hover"),this._lastHoveredElement=e,null!==this._lastHoveredElement&&this._lastHoveredElement.isUI&&(this._lastHoveredElement.activatePseudoState("hover"),this._lastHoveredElement.dispatchEvent(ve));for(let e=0;e<this._listeners.length;e++)this._listeners[e].hoveredElementHasChanged(this._lastHoveredElement)}_setSelectedElement(e){this._lastSelectedElement&&this._lastSelectedElement.isUI&&this._lastSelectedElement.deactivatePseudoState("active"),this._lastSelectedElement=e,null!==this._lastSelectedElement&&this._lastSelectedElement.isUI&&this._lastSelectedElement.activatePseudoState("active");for(let e=0;e<this._listeners.length;e++)this._listeners[e].selectedElementHasChanged(this._lastSelectedElement)}_click(){if(this._lastSelectedElement){this._lastSelectedElement.dispatchEvent(be);for(let e=0;e<this._listeners.length;e++)this._listeners[e].clicked(this._lastSelectedElement)}}addObject(e){for(let e=0;e<arguments.length;e++){const t=arguments[e];t.interactiveListener&&this.addListener(t.interactiveListener),t.interactiveObjects?this._objectsToTest.push(...t.interactiveObjects):this._objectsToTest.push(t)}}removeObject(e){for(let e=0;e<arguments.length;e++){const t=arguments[e];t.interactiveListener&&this.removeListener(t.interactiveListener);let s=[t];t.interactiveObjects&&(s=[...t.interactiveObjects]);for(let e=0;e<s.length;e++){const t=s[e],n=this._objectsToTest.indexOf(t);-1!==n&&this._objectsToTest.splice(n,1)}}}update(){let e;if(this._renderer.xr.isPresenting&&this._vrControl?(this._vrControl.setFromController(0,this._raycaster.ray),e=this._raycast(),e&&this._vrControl.setPointerAt(0,e.point)):null!==this._mouse.x&&null!==this._mouse.y&&(this._raycaster.setFromCamera(this._mouse,this._camera),e=this._raycast()),e){const t=e.object;this._lastHoveredElement!==t&&this._setHoveredElement(t),this._selectState?this._lastSelectedElement!==t&&this._setSelectedElement(t):null!==this._lastSelectedElement&&this._setSelectedElement(null)}else null!==this._lastSelectedElement&&this._setSelectedElement(null),null!==this._lastHoveredElement&&this._setHoveredElement(null)}set camera(e){this._camera=e}get camera(){return this._camera}_raycast(){return this._objectsToTest.reduce(((e,t)=>{if(!this._scene.getObjectById(t.id))return e;const s=this._raycaster.intersectObject(t,!0);return s[0]&&(!e||s[0].distance<e.distance)?(s[0].object=t,s[0]):e}),null)}}class ye extends z{constructor(e,t="crosshair"){super(),this._cursor=t,this._htmlElement=e,this._lastValue="inherit"}hoveredElementHasChanged(e){null!==e&&"inherit"===this._lastValue?(this._htmlElement.style.cursor=this._cursor,this._lastValue=this._cursor):null===e&&"inherit"!==this._lastValue&&(this._htmlElement.style.cursor="inherit",this._lastValue="inherit")}selectedElementHasChanged(e){}clicked(e){}}let xe,ke,Ce,Ee,Se,je,Pe,Le,Oe;const Ie=[];function Te(e){Le.forEach(((t,s)=>{t.visible=s===e}))}function Ae(){a.ZP.update(),Ee.update(),je.update(),le&&(ne(),le=!1),Pe.rotation.z+=.01,Pe.rotation.y+=.01,Ce.render(xe,ke)}!function(e,t="three-mesh-ui"){const s=document.createElement("style");s.setAttribute("media",t),s.textContent=e,document.head.appendChild(s)}("\n\n:root{\n\n\tbackground-color : rgba(0,0,0,0.75);\n\tpadding: 0.05rem 0.125rem;\n\tborder-radius: 0.2rem 0.02rem 0.2rem 0.02rem;\n\n}\n\nbutton{\n\n\twidth : auto;\n\tpadding: 0.02rem 0.15rem;\n\tmargin: 0.01rem;\n\n\ttext-align: center;\n\tbackground-color: rgba(255,255,255,0.5);\n\tborder-radius : 0.08rem;\n\trx: 0.005rem;\n\tborder-bottom-width : 0.01rem;\n\tborder-bottom-color : rgba(64,64,64,.5);\n\tborder-top-width : 0;\n\n}\n\nbutton:hover {\n\n\tbackground-color: rgba(255,255,255,0.7);\n\trx : 0.025rem;\n\n}\n\nbutton:active {\n\n\trx : 0.01rem;\n\tborder-top : rgba(103,103,103,0.8) 0.005rem solid;\n\tborder-bottom-width : 0.005rem;\n\tborder-bottom-color : #000;\n\tbackground-color: rgba(128,128,128,0.8);\n}\n\n"),window.addEventListener("load",(function(){xe=new n.xsS,xe.background=new n.Ilk(5263440),ke=new n.cPb(75,window.innerWidth/window.innerHeight,.1,1e3),Ce=new n.CP7({antialias:!0}),Ce.setPixelRatio(window.devicePixelRatio),Ce.setSize(window.innerWidth,window.innerHeight),Ce.outputEncoding=n.knz,Ce.xr.enabled=!0,document.body.appendChild(r.N.createButton(Ce)),document.body.appendChild(Ce.domElement),Ee=new o.z(ke,Ce.domElement),ke.position.set(0,1.6,0),Ee.target=new n.Pa4(0,1,-1.8);const e=new n.ejS(new i.d(6,6,6,10,10,10).translate(0,3,0),new n.nls({color:8421504})),t=new n.Kj0(new n.DvJ(6,6,6,10,10,10).translate(0,3,0),new n.vBJ({side:n._Li}));xe.add(e),Ie.push(t);const s=function(e){e||(e={});const t=e.x||2,s=e.y||10,r=e.z||-2,i=e.width||10,o=e.near||.1,a=e.far||30,l=e.bias||-0,c=e.resolution||2048,h=e.color||16777215,u=e.intensity||1,d=e.useHelpers||!1,m=e.castShadow||!0,_=new n.Ox3(h,u);_.position.set(t,s,r),_.castShadow=m;const p=i/2;if(_.shadow.camera.left=-p,_.shadow.camera.right=p,_.shadow.camera.top=p,_.shadow.camera.bottom=-p,_.shadow.camera.near=o,_.shadow.camera.far=a,_.shadow.mapSize.width=c,_.shadow.mapSize.height=c,_.shadow.bias=l,_.helpers=new n.ZAu,d){const e=new n.cBI(_,5),t=new n.Rki(_.shadow.camera);_.helpers.add(e,t)}return _}({z:10,width:6,bias:-1e-4}),a=new n.vmT(8421504,6316128);xe.add(s,a),Se=function(e){const t=[],s=[],r=new he.i,i=new n.vBJ({color:16777215,alphaMap:new n.ROQ(ue()),transparent:!0}),o=new n.nvb(.004,.004,.35);o.translate(0,0,-.15);const a=o.attributes.uv;for(let e=0;e<a.count;e++){let t=a.getX(e),s=a.getY(e);[t,s]=(()=>{switch(e){case 0:case 2:case 5:case 7:case 10:case 11:case 12:case 13:return[1,1];default:return[0,0]}})(),a.setXY(e,t,s)}const l=new n.Kj0(o,i);l.renderOrder=1/0;const c=new n.xeV({map:new n.ROQ(de()),sizeAttenuation:!1,depthTest:!1}),h=new n.jyi(c);h.scale.set(.015,.015,1),h.renderOrder=1/0;const u=e.xr.getController(0),d=e.xr.getController(1);u.name="controller-right",d.name="controller-left";const m=e.xr.getControllerGrip(0),_=e.xr.getControllerGrip(1);u&&t.push(u),d&&t.push(d),m&&s.push(m),_&&s.push(_),t.forEach((e=>{const t=l.clone(),s=h.clone();e.add(t,s),e.ray=t,e.point=s})),s.forEach((e=>{e.add(r.createControllerModel(e))}));const p=new n.yGw;return{controllers:t,controllerGrips:s,setFromController:function(e,s){const n=t[e];p.identity().extractRotation(n.matrixWorld),s.origin.setFromMatrixPosition(n.matrixWorld),s.direction.set(0,0,-1).applyMatrix4(p)},setPointerAt:function(e,s){const n=t[e],r=n.worldToLocal(s);n.point.position.copy(r),n.point.visible=!0}}}(Ce),xe.add(Se.controllerGrips[0],Se.controllers[0]),je=new we(ke,xe,Ce,Se),je.start();const l=new ye(Ce.domElement,"pointer");je.addListener(l),Pe=new n.ZAu,Pe.position.set(0,1,-1.9),xe.add(Pe);const c=new n.Kj0(new n.Wjw(.3,1),new n.Wid({color:4055908,flatShading:!0})),h=new n.Kj0(new n.nvb(.45,.45,.45),new n.Wid({color:6569443,flatShading:!0})),u=new n.Kj0(new n._3(.28,.5,10),new n.Wid({color:14892366,flatShading:!0}));c.visible=h.visible=u.visible=!1,Pe.add(c,h,u),Le=[c,h,u],Oe=0,Te(Oe),function(){const e=ae("div");e.style.borderRadius=.11,e.style.justifyContent="center",e.style.flexDirection="row",e.style.padding="0.02 0.05",e.set({fontFamily:me,fontTexture:_e,fontSize:.07}),e.position.set(0,.6,-1.2),e.rotation.x=-.55,xe.add(e);const t=ae("button");t.set({width:"auto",name:"next"});const s=ae("span");s.textContent="nrxy",t.add(s),t.addEventListener("click",(e=>{Oe=(Oe+1)%3,Te(Oe)}));const n=ae("button");n.set({width:"auto",name:"prev"}),n.textContent="previous",n.addEventListener("click",(e=>{Oe-=1,Oe<0&&(Oe=2),Te(Oe)})),e.add(t,n),je.addObject(t,n)}(),J(),Ce.setAnimationLoop(Ae)})),window.addEventListener("resize",(function(){ke.aspect=window.innerWidth/window.innerHeight,ke.updateProjectionMatrix(),Ce.setSize(window.innerWidth,window.innerHeight)}))}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,s,r,i)=>{if(!s){var o=1/0;for(h=0;h<e.length;h++){for(var[s,r,i]=e[h],a=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(a=!1,i<o&&(o=i));if(a){e.splice(h--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var h=e.length;h>0&&e[h-1][2]>i;h--)e[h]=e[h-1];e[h]=[s,r,i]},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j="ex__interactive_button",(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={ex__interactive_button:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,i,[o,a,l]=s,c=0;if(o.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var h=l(n)}for(t&&t(s);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(h)},s=self.webpackChunkthree_mesh_ui=self.webpackChunkthree_mesh_ui||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=n.O(void 0,["chunk_imported-assets","chunk_three-mesh-ui","chunk_vendors"],(()=>n("./examples/ex__interactive_button.js")));r=n.O(r)})();