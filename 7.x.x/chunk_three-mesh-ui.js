"use strict";(self.webpackChunkthree_mesh_ui=self.webpackChunkthree_mesh_ui||[]).push([["chunk_three-mesh-ui"],{"./src/components/core/UpdateManager.js":(e,t,r)=>{r.d(t,{Z:()=>s});r("./src/core/elements/MeshUIBaseElement.js");class s{static register(e){this.elements.includes(e)||this.elements.push(e)}static remove(e){const t=this.elements.indexOf(e);-1!==t&&this.elements.splice(t,1)}static update(){for(const e of this.elements)e.update(),e.process(),e.process(),e.render()}}s.elements=[]},"./src/core/DefaultValues.js":(e,t,r)=>{r.r(t),r.d(t,{get:()=>n,set:()=>i});const s={fontFamily:null,fontSize:.05,fontKerning:"auto",fontStyle:"normal",fontWeight:"normal",offset:.005,lineHeight:1.2,lineBreak:"- ,.:?!\n",whiteSpace:"pre-line",flexDirection:"column",justifyContent:"start",alignItems:"start",backgroundImage:null,textAlign:"left",boxSizing:"content-box",position:"static",color:16777215,fontColor:16777215,fontOpacity:1,opacity:1,fontPXRange:4,fontSupersampling:!0,fontSmooth:"antialiased",borderRadius:0,borderWidth:0,borderColor:"black",borderOpacity:1,backgroundSize:"cover",backgroundColor:0,backgroundOpacity:0,overflow:"visible",letterSpacing:0,invertAlpha:!1,segments:1},i=function(e){for(const t in e)s[t]=e[t]},n=function(e){return Object.prototype.hasOwnProperty.call(s,e)||console.warn(`ThreeMeshUI::DefaultValues is trying to retrieve non-existing property '${e}'`),s[e]}},"./src/core/elements/MeshUIBaseElement.js":(e,t,r)=>{r.d(t,{Z:()=>Ce});var s=r("./src/core/properties/BaseProperty.js");class i extends s.Z{constructor(){super("renderOrder","auto",!0),this.output=this._outputValue,this._actualValue=0}set value(e){this.isValid(e)&&(this._value=e,this._needsUpdate=!0)}update(e,t){if("auto"!==this._value)this._actualValue=this._value;else{const t=e._parent._value;if(null!==t){const r=t._renderOrder._actualValue,s=1+t._children._uis.indexOf(e);this._actualValue=r+s}}for(const t of e._children._uis){"auto"===t._renderOrder._value&&(t._renderOrder._needsUpdate=!0)}this._outputValue(t)}_outputValue(e){e[this._id]=this._actualValue}get value(){return this._value}}var n=r("./src/core/properties/InheritableProperty.js");class o extends n.Z{constructor(){super("offset","inherit",!1)}update(e,t){super.update(e,t),null!==e._parent._value&&(e.position.z=this._notInheritedValue)}}class a extends n.Z{constructor(){super("fontSmooth","inherit",!0),this._needsUpdate=!1,this.isValid=h,this.output=this._outputValue}}const l=["inherit","none","antialiased"];function h(e){return-1!==l.indexOf(e)||(console.warn(`.fontSmoothing value '${e}' is not valid. Aborted`),!1)}var u=r("./node_modules/three/build/three.module.js"),d=r("./src/core/properties/style-properties/SubStyleProperty.js");class c extends d.Z{constructor(e,t){super(e,t,!1),this._input=new u.Ltg(0,0,0,0),this._inline=null,this._value=new u.Ltg(0,0,0,0)}get value(){return this._value}computeOutputValue(e){this._vector4ValueSetter(this._value,this._input)}set inline(e){this._vector4ValueSetter(this._input,e),this._input.equals(this._value)||(this._needsUpdate=!0)}set top(e){this._input.x!==e&&(this._input.x=e,this._needsUpdate=!0)}get top(){return this._input.x}set right(e){this._input.y!==e&&(this._input.y=e,this._needsUpdate=!0)}get right(){return this._input.y}set bottom(e){this._input.z!==e&&(this._input.z=e,this._needsUpdate=!0)}get bottom(){return this._input.z}set left(e){this._input.w!==e&&(this._input.w=e,this._needsUpdate=!0)}get left(){return this._input.w}dispose(){this._computed=null,this._inline=null,this._input=null,this._output=null}_vector4ValueSetter(e,t){if(t instanceof u.Ltg)e.copy(t);else{if(("string"==typeof t||t instanceof String)&&(t=t.split(" ")),Array.isArray(t))switch((t=t.map((e=>parseFloat(e)))).length){case 1:return void e.setScalar(t[0]);case 2:return e.x=e.z=t[0],void(e.y=e.w=t[1]);case 3:return e.x=t[0],e.y=t[1],void(e.z=t[2]);case 4:return e.x=t[0],e.y=t[1],e.z=t[2],void(e.w=t[3]);default:return void console.error("StyleVector4Property::set() Four Dimension property had more than four values")}isNaN(t)||e.setScalar(t)}}}class _ extends c{constructor(){super("padding",new u.Ltg(0,0,0,0))}computeOutputValue(e){super.computeOutputValue(e),e._bounds._needsUpdate=!0,e._bounds._needsRender=!0,e._layouter._needsProcess=!0,e._renderer._needsRender=!0,e._parent._value&&(e._parent._value._layouter._needsProcess=!0)}}class p extends c{constructor(){super("margin",new u.Ltg(0,0,0,0))}computeOutputValue(e){super.computeOutputValue(e),e._renderer._needsRender=!0,e._parent._value&&(e._parent._value._flexDirection._needsProcess=!0)}}const f=function(e,t,r){e[t]=r},g=function(e,t,r){null!==r&&(e[t]=r)};class m{constructor(e){this._definition=e}set definition(e){this._definition=e}mediate(e,t,r,s=null){for(const e in this._definition){const i=this._definition[e];if(void 0!==r[e]){const n=i.t?i.t:f;n(t,i.m,r[e]),s&&n(s,i.m,r[e])}}}static mediate(e,t,r,s,i=null){if(t)for(const e in s){const n=s[e];if(void 0!==r[e]){const s=n.t?n.t:f;s(t,n.m,r[e]),i&&s(i,n.m,r[e])}}}}class v extends s.Z{constructor(){super("parent",null,!1)}update(e,t){e.parent&&e.parent.isUI?this._value=e.parent:this._value=null}set value(e){console.warn("ParentProperty is readonly")}get value(){return this._value}find(e){return this._value?e(this._value)?this._value:this._value._parent.find(e):null}dispose(){this._value=null}}var y=r("./src/utils/NumberUtils.js");class b extends s.Z{constructor(e,t){super(e,t,!0),this.output=this._outputValue}set value(e){this.isValid(e)&&((0,y.G)(this._value,e)||(this._value=e,this._needsUpdate=!0))}get value(){return this._value}}class x extends n.Z{constructor(e){super(e,"inherit",!0),this.isValid=S}}const w=[u.Wl3,u._Li,u.ehD];function S(e){return-1!==w.indexOf(e)||(console.warn(`SideProperty value '${e}' is not valid. Abort`),!1)}var k=r("./src/components/core/UpdateManager.js"),R=r("./src/font/FontVariant.js");class j extends s.Z{constructor(e=null){super("font",e,!1),this._needsUpdate=!1,this._fontVariant=null,this._handleFontReadyClosure=null,this.isValid=C}output(e){e[this._id]=this._fontVariant}update(e,t){if(this._fontVariant&&!this._fontVariant.isReady&&this._fontVariant.removeEventListener("ready",this._handleFontReadyClosure),this._value&&this._value instanceof R.Z)this._fontVariant=this._value;else{const t=e._fontFamily._value;t&&(this._fontVariant=t.getVariant(e._fontWeight._value,e._fontStyle._value))}this._fontVariant&&(this._fontVariant._alterElementProperties(e),this._handleFontReadyClosure=function(e,t){return function(){t._needsUpdate=!0,e._glyphs._needsProcess=!0,t._fontVariant.removeEventListener("ready",t._handleFontReadyClosure),t._handleFontReadyClosure=null}}(e,this),this._fontVariant.isReady?this._handleFontReadyClosure():this._fontVariant.addEventListener("ready",this._handleFontReadyClosure),e._fontMaterial._defaultMaterial&&e._fontMaterial._defaultMaterial instanceof this._fontVariant.fontMaterial||(e._fontMaterial._defaultMaterial=new this._fontVariant.fontMaterial,e._fontMaterial._needsUpdate=!0))}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return this._value}get fontVariant(){return this._fontVariant}dispose(){this._handleFontReadyClosure&&(this._fontVariant.removeEventListener("ready",this._handleFontReadyClosure),this._handleFontReadyClosure=null),this._value=null,this._fontVariant=null}}function C(e){return e instanceof R.Z||(console.warn(`.font value '${e}' is not valid. It requires a FontVariant instance. Aborted`),!1)}class P extends d.Z{constructor(e){super("display",e),this._value="flex",this._allowsInherit=!1,this._needsUpdate=!1,this.isValidValue=M}computeOutputValue(e){e._visible._value="none"!==this._output}}const U=["none","flex"];function M(e){return-1!==U.indexOf(e)||(console.warn(`(.style) display value '${e}' is not valid. Aborted`),!1)}class I extends d.Z{constructor(e){super("boxSizing",e),this._allowsInherit=!1,this.isValidValue=Z}computeOutputValue(e){this._value=this._inheritedInput,e._bounds._needsUpdate=!0}}const B=["border-box","content-box"];function Z(e){return-1!==B.indexOf(e)||(console.warn(`(.style) boxSizing value '${e}' is not valid. Aborted`),!1)}var F=r("./src/core/properties/style-properties/StyleColorProperty.js");class V extends d.Z{constructor(e,t){super(e,t,!0),this.isValidValue=W,this._allowsInherit=!1,this._input=t,this._value=t,this.output=this._outputValue,this.computeOutputValue=this._computeFromInherited}_outputValue(e){e[this._id]=this._inheritedInput}}function W(e){return!(e<0&&e>1)||(console.warn(`(.style) styleFactorProperty('${this.id}') value '${e}' is not valid)`),!1)}class T extends d.Z{constructor(e){super("backgroundImage",e,!0),this._input=null,this._allowsInherit=!1,this._textureSize=new u.FM8(1,1),this.isValidValue=O}get value(){return this._value}output(e){e[this._id]=this._value,e.tSize=this._textureSize}computeOutputValue(e){this._value=this._inheritedInput,this._value instanceof u.xEZ&&!this._value.image?console.warn("ThreeMeshUI - .backgroundImage :: Please provide preloaded texture in order to have accurate sizing."):this._needsProcess=!0}process(e){this._value?this._textureSize.set(this._value.image.width,this._value.image.height):this._textureSize.set(1,1)}}function O(e){return!0}class z extends d.Z{constructor(e){super("backgroundSize",e,!0),this.isValidValue=D,this.output=this._outputValue}}const L=["cover","contain","stretch"];function D(e){return-1!==L.indexOf(e)||(console.warn(`(.style) backgroundSize value '${e}' is not valid. Aborted`),!1)}class A extends d.Z{constructor(e){super("overflow",e,!0),this.isValidValue=H,this._clippingPlanes=null,this._renderStrategy=this._emptyRender}update(e,t){void 0!==this._inline&&"unset"!==this._inline?this._input=this._inline:void 0!==this._computed&&(this._input=this._computed),this._allowsInherit||(this._inheritedInput=this.getInheritedInput(e)),this.computeOutputValue(e);for(const t of e._children._uis)t._overflow._needsUpdate=!0;this.output(t)}output(e){e.clippingPlanes=this._clippingPlanes}computeOutputValue(e){super.computeOutputValue(e),"hidden"===this._value?this._renderStrategy=this._propagateRender:(this._renderStrategy=this._emptyRender,this._clippingPlanes=null);const t=e._parent._value;if(null!==t){const e=t._overflow;if("hidden"!==e._value&&null===e._clippingPlanes||this._clippingPlanes)"visible"!==e._value&&null!==e._clippingPlanes||null===this._clippingPlanes||(this._clippingPlanes=null,this._renderStrategy=this._emptyRender,this._needsRender=!0);else{this._clippingPlanes=[new u.JOQ(new u.Pa4(0,-1,0),1),new u.JOQ(new u.Pa4(-1,0,0),1),new u.JOQ(new u.Pa4(0,1,0),1),new u.JOQ(new u.Pa4(1,0,0),1)];for(let e=0;e<this._clippingPlanes.length;e++)this._clippingPlanes[e].parent=t;null!==e._clippingPlanes&&this._clippingPlanes.push(...e._clippingPlanes),this._renderStrategy=this._hiddenRender,this._needsRender=!0}}}render(e){this._renderStrategy(e)}_emptyRender(e){}_hiddenRender(e){const t=e._parent._value,r=t._bounds._offsetHeight,s=t._bounds._offsetWidth,i=t._padding._value,n=t._borderWidth._value;for(let e=0;e<4&&e<this._clippingPlanes.length;e++){const o=this._clippingPlanes[e];switch(e%4){case 0:o.constant=r/2-(i.x+n.x);break;case 1:o.constant=s/2-(i.y+n.y);break;case 2:o.constant=r/2-(i.z+n.z);break;case 3:o.constant=s/2-(i.w+n.w)}o.applyMatrix4(t.matrixWorld)}for(let t=0;t<e._children._uis.length;t++){e._children._uis[t]._overflow._needsRender=!0}}_propagateRender(e){for(let t=0;t<e._children._uis.length;t++){e._children._uis[t]._overflow._needsRender=!0}}}const E=["visible","hidden"];function H(e){return-1!==E.indexOf(e)||(console.warn(`(.style) overflow value '${e}' is not valid. Aborted`),!1)}const $="rem",G="%",X=[$,"em",G],K=function(e){return-1===X.indexOf(e)?$:e};class N extends c{constructor(e){super("borderRadius",e),this._valueUV=this._value.clone(),this._input=new u.Ltg(0,0,0,0),this._mediation=!0,this._cornerTL=new u.FM8(0,1),this._cornerTR=new u.FM8(1,1),this._cornerBR=new u.FM8(1,0),this._cornerBL=new u.FM8(0,0);const t=new Y(this._valueUV,["x","y"]),r=new Y(this._valueUV,["z","w"]),s=new Y(this._valueUV,["x","w"]),i=new Y(this._valueUV,["y","z"]);t.complementaryMediation=r,r.complementaryMediation=t,s.complementaryMediation=i,i.complementaryMediation=s,this._sideMediators=[t,r,s,i],this._units=$}set units(e){this._units=K(e),this._needsProcess=!0}get units(){return this._units}set mediation(e){e!==this._mediation&&(this._mediation=e,this._needsUpdate=!0)}get mediation(){return this._mediation}output(e){e.cornerTL=this._cornerTL,e.cornerTR=this._cornerTR,e.cornerBR=this._cornerBR,e.cornerBL=this._cornerBL}computeOutputValue(e){this._vector4ValueSetter(this._value,this._input),this._needsProcess=!0}process(e){this._needsRender=!0}render(e){this._valueUV.copy(this._value);const t=e._bounds._offsetWidth,r=e._bounds._offsetHeight;if(this._units===G&&this._valueUV.divideScalar(100),this._units===$&&this._valueUV.divideScalar(Math.min(t,r)),this._mediation)do{this._sideMediators.forEach((e=>e.computeValue())),this._sideMediators.sort(((e,t)=>e.value<t.value?1:-1)),this._sideMediators[0].value>1&&this._sideMediators[0].mediate()}while(this._sideMediators[0].value>1);let s=t>r?r/t:1,i=t<r?t/r:1;this._units===G&&(s=i=1),this._cornerTL.x=this._valueUV.x*s,this._cornerTL.y=1-this._valueUV.x*i,this._cornerTR.x=1-this._valueUV.y*s,this._cornerTR.y=1-this._valueUV.y*i,this._cornerBR.x=1-this._valueUV.z*s,this._cornerBR.y=this._valueUV.z*i,this._cornerBL.x=this._valueUV.w*s,this._cornerBL.y=this._valueUV.w*i}dispose(){for(const e of this._sideMediators)e.dispose();this._sideMediators=null,this._cornerTL=null,this._cornerTR=null,this._cornerBR=null,this._cornerBL=null,super.dispose()}set topLeft(e){this._input.x!==e&&(this._input.x=e,this._needsUpdate=!0)}get topLeft(){return this._input.x}set topRight(e){this._input.y!==e&&(this._input.y=e,this._needsUpdate=!0)}get topRight(){return this._input.y}set bottomRight(e){this._input.z!==e&&(this._input.z=e,this._needsUpdate=!0)}get bottomRight(){return this._input.z}set bottomLeft(e){this._input.w!==e&&(this._input.w=e,this._needsUpdate=!0)}get bottomLeft(){return this._input.w}set top(e){this._input.x===e&&this._input.y===e||(this._input.x=this._input.y=e,this._needsUpdate=!0)}get top(){return(this._input.x+this._input.y)/2}set right(e){this._input.y===e&&this._input.z===e||(this._input.y=this._input.z=e,this._needsUpdate=!0)}get right(){return(this._input.y+this._input.z)/2}set bottom(e){this._input.z===e&&this._input.w===e||(this._input.z=this._input.w=e,this._needsUpdate=!0)}get bottom(){return(this._input.z+this._input.w)/2}set left(e){this._input.w===e&&this._input.x===e||(this._input.w=this._input.x=e,this._needsUpdate=!0)}get left(){return(this._input.w+this._input.x)/2}}class Y{constructor(e,t){this._borderRadiuses=e,this._sideProperties=t,this._complementaryMediation=null,this._value=0}get value(){return this._value}set complementaryMediation(e){this._complementaryMediation=e}computeValue(){let e=0;for(const t of this._sideProperties)e+=this._borderRadiuses[t];this._value=e}mediate(e=!0){if(!(this._value<1)){for(const e of this._sideProperties)this._borderRadiuses[e]/=this._value;e&&this._complementaryMediation.mediate(!1)}}dispose(){this._complementaryMediation=null,this._borderRadiuses=null}}class J extends c{constructor(e){super("borderWidth",e,!1),this._valueUV=this._value.clone(),this.output=this._outputValue,this._units=$}set units(e){this._units=K(e),this._needsUpdate=!0}get units(){return this._units}computeOutputValue(e){this._vector4ValueSetter(this._value,this._input),this._needsProcess=!0,e._bounds._needsUpdate=!0,e._layouter._needsUpdate=!0}_outputValue(e){e[this._id]=this._valueUV}process(e){this._needsRender=!0,e._borderRadius._needsRender=!0}render(e){this._valueUV.copy(this._value);const t=e._bounds._offsetWidth,r=e._bounds._offsetHeight;if(this._units===G&&this._valueUV,this._units===$)0!==t&&(this._valueUV.w/=t,this._valueUV.y/=t),0!==r&&(this._valueUV.x/=r,this._valueUV.z/=r);else if("em"===this._units){if(0!==t){const e=t>r?r/t:1;this._valueUV.y*=e,this._valueUV.w*=e}if(0!==r){const e=t<r?t/r:1;this._valueUV.x*=e,this._valueUV.z*=e}}}}class q extends s.Z{constructor(e,t=!0){super("visible",t,!0),this._needsUpdate=!1}update(e,t){e.visible=this._value,e._parent._value&&(e._parent._value._children._needsUpdate=!0)}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return this._value}}var Q=r("./src/core/properties/style-properties/background/BackgroundColorProperty.js"),ee=r("./src/core/properties/EmptyProperty.js");class te extends s.Z{constructor(){super("inlineJustificator",null,!1),this._value=null}update(e,t){}process(e){const t=e._bounds._innerHeight,r=e._layouter._value,s=Math.abs(r.height);let i=(()=>{switch(e._alignItems._value){case"inherit":case"start":return t/2;case"end":return s-t/2;case"stretch":case"center":return s/2}})();const n=e._padding._value,o=e._borderWidth._value;i+=(-n.x+n.z)/2+(-o.x+o.z)/2,r.forEach((e=>{e.y+=i,e.forEach((e=>{e.offsetY+=i}))}))}}var re=r("./src/core/properties/style-properties/flex/AlignItemsProperty.js"),se=r("./src/core/properties/style-properties/font/TextAlignProperty.js"),ie=r("./src/core/properties/style-properties/flex/FlexDirectionProperty.js"),ne=r("./src/core/properties/style-properties/flex/JustifyContentProperty.js");class oe extends d.Z{constructor(){super("order",0,!0),this._value=0,this._input=0,this._allowsInherit=!1}computeOutputValue(e){this._value=this._inheritedInput,e._parent._value&&(e._parent._value._children._needsProcess=!0)}}var ae=r("./src/core/properties/style-properties/PositionProperty.js");class le extends d.Z{constructor(e,t=null){super(e,t,!0),this._input="auto",this._auto=!0,this._relative=!1,this._updateRequired=!0}set inline(e){this.isValidValue(e)&&e!==this._inline&&(this._inline=e,this._input!==this._inline&&this._parseInput())}get inline(){return this._inline}_parseInput(){let e=!0;if(void 0!==this._inline&&"unset"!==this._inline?this._input=this._inline:void 0!==this._computed?(this._computed===this._input&&(e=!1),this._input=this._computed):e="inherit"===this._input,e){if(this._auto=!this._input||"auto"===this._input,this._auto)this._relative=!1;else if(("string"==typeof this._input||this._input instanceof String)&&this._input.endsWith("%")){this._relative=!0,this._value=0;const e=parseFloat(this._input.replace("%","").trim());isNaN(e)||(this._value=e/100)}else this._relative=!1,this._value=this._input;this._needsUpdate=this._updateRequired=e}}update(e,t){if(this._updateRequired){this._updateRequired=!1,this._allowsInherit||(this._inheritedInput=this.getInheritedInput(e)),this.computeOutputValue(e);for(const t of e._children._uis)t[`_${this._id}`]._needsUpdate=!0;this.output(t),e._parent._value&&(e._parent._value._layouter._needsProcess=!0)}}computeOutputValue(e){e._bounds._needsUpdate=!0,e._renderer._needsRender=!0}getInheritedInput(e){if("inherit"!==this._input&&!this._auto)return this._input;const t=e._parent._value;return t?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}getDefaultValue(){return 0}get value(){return this._value}}class he extends le{constructor(){super("width")}}class ue extends le{constructor(){super("height")}computeOutputValue(e){super.computeOutputValue(e)}}var de=r("./src/core/properties/TextContentEmpty.js"),ce=r("./src/core/properties/style-properties/font/FontStyleProperty.js"),_e=r("./src/core/properties/style-properties/font/FontWeightProperty.js"),pe=r("./src/core/properties/style-properties/font/FontFamilyProperty.js"),fe=r("./src/core/properties/style-properties/font/LineHeightProperty.js"),ge=r("./src/core/properties/style-properties/font/WhiteSpaceProperty.js"),me=r("./src/core/properties/style-properties/font/LetterSpacingProperty.js");class ve extends d.Z{constructor(){super("fontSize","inherit",!0)}}var ye=r("./src/font/FontLibrary.js"),be=r("./src/core/properties/geometry/SegmentsProperty.js");class xe extends n.Z{constructor(){super("invertAlpha","inherit")}}var we=r("./src/core/properties/style-properties/font/FontKerningProperty.js");class Se extends n.Z{constructor(e){super(e,"inherit",!0)}}var ke=r("./src/utils/mediator/transformers/MaterialTransformers.js");class Re extends n.Z{constructor(e){super(e,"inherit",!1),this._mediation={},this._defaultMaterial=null}update(e,t){this._notInheritedValue=this._value,"inherit"===this._notInheritedValue?this._notInheritedValue=this.getInheritedInput(e):this.propagate(e),this._notInheritedValue?this._notInheritedValue.constructor.mediation?this._mediation={...this._notInheritedValue.constructor.mediation}:this._mediation={clippingPlanes:{m:"clippingPlanes"},fontAlphaTest:{m:"alphaTest",t:ke.Dr},fontSide:{m:"side"},color:{m:"color"},fontOpacity:{m:"opacity"}}:this._mediation={},e._transferToFontMaterial(),this._outputValue(t)}getInheritedInput(e){if("inherit"!==this._value)return this._value;let t=e,r=null;for(;t._parent._value;)if(t=t._parent._value,"inherit"!==t[`_${this._id}`]._value){r=t[`_${this._id}`]._value;break}return null!==r?r:this.getDefaultValue()}getDefaultValue(){return this._defaultMaterial}}r("./src/font/FontFamily.js"),r("./node_modules/acorn/dist/acorn.mjs");const je=function(e,t,r){e.traverse((e=>{e.renderOrder=r}))};class Ce extends u.Tme{constructor(e,t){super(),Object.defineProperties(this,{isUI:{configurable:!1,enumerable:!0,value:!0}}),this._backgroundMesh=null,this._backgroundMaterial=null,this._backgroundCustomDepthMaterial=null,this._backgroundMaterialMediation={},this._backgroundMeshMediation={backgroundCastShadow:{m:"castShadow"},backgroundReceiveShadow:{m:"receiveShadow"},renderOrder:{m:"renderOrder",t:je}},this._fontMesh=null,this._fontMaterial=new Re("fontMaterial"),this._fontCustomDepthMaterial=new Re("fontCustomDepthMaterial"),this._fontMeshMediation={fontMaterial:{m:"material"},fontCustomDepthMaterial:{m:"customDepthMaterial",t:g},fontCastShadow:{m:"castShadow"},fontReceiveShadow:{m:"receiveShadow"},renderOrder:{m:"renderOrder"}},this._children=e.children?new e.children:new ee.Z("children"),this._parent=new v,this.addEventListener("added",this._rebuildParentUI),this.addEventListener("removed",this._rebuildParentUI),this._backgroundSide=new x("backgroundSide"),this._fontSide=new x("fontSide"),this._backgroundAlphaTest=new b("backgroundAlphaTest",.02),this._fontAlphaTest=new b("fontAlphaTest",.02),this._visible=new q("visible",!0),this._backgroundCastShadow=new Se("backgroundCastShadow"),this._fontCastShadow=new Se("fontCastShadow"),this._backgroundReceiveShadow=new Se("backgroundReceiveShadow"),this._fontReceiveShadow=new Se("fontReceiveShadow"),this._renderOrder=new i,this._segments=e.segments?new e.segments:new be.Z,this._bounds=e.bounds?new e.bounds:new ee.Z("bounds"),this._order=new oe,this._padding=new _,this._margin=new p,this._position=new ae.Z,this._flexDirection=e.flexDirection?new e.flexDirection:new ie.Z,this._justifyContent=e.justifyContent?new e.justifyContent:new ne.Z,this._alignItems=e.alignItems?new e.alignItems:new re.Z,this._display=new P("flex"),this._boxSizing=new I("border-box"),this._width=new he,this._height=new ue,this._backgroundColor=e.backgroundColor?new e.backgroundColor:new Q.Z,this._backgroundOpacity=new V("backgroundOpacity",.5),this._backgroundImage=new T,this._backgroundSize=new z("cover"),this._color=e.color?new e.color:new F.Z("color","inherit"),this._fontOpacity=new V("fontOpacity","inherit"),this._whiteSpace=e.whiteSpace?new e.whiteSpace:new ge.Z,this._fontFamily=e.fontFamily?new e.fontFamily:new pe.Z,this._fontStyle=e.fontStyle?new e.fontStyle:new ce.Z("normal"),this._fontWeight=e.fontWeight?new e.fontWeight:new _e.Z,this._fontSize=e.fontSize?new e.fontSize:new ve,this._lineHeight=e.lineHeight?new e.lineHeight:new fe.Z,this._fontKerning=e.fontKerning?new e.fontKerning:new we.Z,this._letterSpacing=e.letterSpacing?new e.letterSpacing:new me.Z,this._overflow=new A("visible"),this._borderRadius=new N(0),this._borderWidth=new J(0),this._borderColor=new F.Z("borderColor",16711935),this._borderOpacity=new V("borderOpacity",1),this._font=new j,this._lineBreak=e.lineBreak?new e.lineBreak:new ee.Z("lineBreak"),this._textContent=e.textContent?new e.textContent:new de.Z,this._glyphs=e.glyphs?new e.glyphs:new ee.Z("glyphs"),this._inlines=e.inlines?new e.inlines:new ee.Z("inlines"),this._layouter=e.layouter?new e.layouter:new ee.Z("layouter"),this._inlineJustificator=new te,this._textAlign=e.textAlign?new e.textAlign:new se.Z,this._autoSize=e.autoSize?new e.autoSize:new ee.Z("autoSize"),this._renderer=e.renderer?new e.renderer:new ee.Z("renderer"),this._offset=new o,this._invertAlpha=new xe,this._fontSmooth=e.fontSmooth?new e.fontSmooth:new a,this._components=[this._textContent,this._children,this._parent,this._autoSize,this._fontFamily,this._fontStyle,this._fontWeight,this._font,this._whiteSpace,this._glyphs,this._inlines,this._visible,this._backgroundSide,this._fontSide,this._backgroundAlphaTest,this._fontAlphaTest,this._backgroundCastShadow,this._fontCastShadow,this._backgroundReceiveShadow,this._fontReceiveShadow,this._renderOrder,this._segments,this._padding,this._margin,this._width,this._height,this._borderWidth,this._boxSizing,this._bounds,this._position,this._flexDirection,this._justifyContent,this._alignItems,this._order,this._display,this._backgroundColor,this._backgroundOpacity,this._backgroundImage,this._backgroundSize,this._fontOpacity,this._color,this._fontSize,this._lineHeight,this._fontKerning,this._letterSpacing,this._borderRadius,this._borderColor,this._borderOpacity,this._lineBreak,this._offset,this._layouter,this._inlineJustificator,this._textAlign,this._invertAlpha,this._fontSmooth,this._fontMaterial,this._fontCustomDepthMaterial,this._overflow,this._renderer],this._onAfterUpdates=[],t.backgroundSide||(t.backgroundSide=0),t&&this.set(t)}update(){const e={};for(const t of this._components)t._needsUpdate&&(t.update(this,e),t._needsUpdate=!1);this._transferToBackgroundMesh(e),this._transferToFontMesh(e),this._transferToBackgroundMaterial(e),this._transferToFontMaterial(e);for(const e of this._children._uis)e.update()}process(){for(const e of this._children._uis)e.process();for(const e of this._components)e._needsProcess&&(e.process(this),e._needsProcess=!1)}render(){for(let e=0;e<this._components.length;e++){const t=this._components[e];t._needsRender&&(t.render(this),t._needsRender=!1)}for(const e of this._children._uis)e.render()}set(e){if(e.fontTexture&&(console.warn("ThreeMeshUI::set( {fontTexture} ) is deprecated. Please use fontLibrary to register font families and variants."),e.fontFamily)){const t=e.fontFamily.pages?e.fontFamily.info.face:e.fontFamily;let r=ye.Z.getFontFamily(t);if(!r){const s=e.fontStyle?e.fontStyle:"normal",i=e.fontWeight?e.fontWeight:"400";r=ye.Z.addFontFamily(t).addVariant(i,s,e.fontFamily,e.fontTexture)}e.fontFamily=r,delete e.fontTexture}for(let t of Object.keys(e)){const r=e[t];switch(t){case"contentDirection":console.warn("ThreeMeshUI v7xx: property `contentDirection` is deprecated and has been renamed as `flexDirection`"),t="flexDirection";break;case"interLine":console.warn("ThreeMeshUI v7xx: property `interLine` is deprecated and has been renamed as `lineHeight`"),t="lineHeight";break;case"content":console.warn("ThreeMeshUI v7xx: property `content` is deprecated and has been renamed as `textContent`"),t="textContent";break;case"fontColor":console.warn("ThreeMeshUI v7xx: property `fontColor` is deprecated and has been renamed as `color`"),t="color";break;case"hiddenOverflow":console.warn("ThreeMeshUI v7xx: property `hiddenOverflow` is deprecated and has been renamed as `overflow`"),t="overflow";break;case"backgroundTexture":console.warn("ThreeMeshUI v7xx: property `backgroundTexture` is deprecated and has been renamed as `backgroundImage`"),t="backgroundImage";break;case"alignContent":console.warn("ThreeMeshUI v7xx: property `alignContent` is deprecated and has been renamed as `alignItems`"),t="alignItems";break;case"borderTopColor":case"borderBottomColor":case"borderLeftColor":case"borderRightColor":t="borderColor"}switch(t){case"fontSmooth":case"renderOrder":case"segments":case"visible":case"offset":case"fontSide":case"backgroundSide":case"fontCastShadow":case"backgroundCastShadow":case"fontReceiveShadow":case"backgroundReceiveShadow":case"fontMaterial":case"fontCustomDepthMaterial":this[`_${t}`].value=r;break;case"flexDirection":case"justifyContent":case"alignItems":case"color":case"fontFamily":case"fontOpacity":case"fontKerning":case"fontSize":case"fontStyle":case"fontWeight":case"textAlign":case"letterSpacing":case"lineHeight":case"whiteSpace":case"breakOn":case"width":case"height":case"padding":case"margin":case"backgroundColor":case"backgroundOpacity":case"backgroundImage":case"backgroundSize":case"borderColor":case"borderOpacity":case"borderRadius":case"borderWidth":case"overflow":case"order":case"boxSizing":this[`_${t}`]&&(this[`_${t}`].inline=r);break;case"paddingTop":this._padding.top=r;break;case"paddingRight":this._padding.right=r;break;case"paddingBottom":this._padding.bottom=r;break;case"paddingLeft":this._padding.left=r;break;case"marginTop":this._margin.top=r;break;case"marginRight":this._margin.right=r;break;case"marginBottom":this._margin.bottom=r;break;case"marginLeft":this._margin.left=r;break;case"borderTopWidth":this._borderWidth.top=r;break;case"borderRightWidth":this._borderWidth.right=r;break;case"borderBottomWidth":this._borderWidth.bottom=r;break;case"borderLeftWidth":this._borderWidth.left=r;break;case"borderTopLeftRadius":this._borderRadius.topLeft=r;break;case"borderTopRightRadius":this._borderRadius.topRight=r;break;case"borderBottomRightRadius":this._borderRadius.bottomRight=r;break;case"borderBottomLeftRadius":this._borderRadius.bottomLeft=r;break;case"side":case"castShadow":case"receiveShadow":const e=t.charAt(0).toUpperCase()+t.substr(1);this[`_background${e}`].value=r,this[`_font${e}`].value=r;break;default:void 0!==this[`_${t}`]?this[`_${t}`].value=r:this[t]=r}}}get(e){switch(e){case"overflow":case"width":case"height":return this[`_${e}`].inline}}_rebuildChildrenLists(){this._children._needsUpdate=!0}_rebuildParentUI=()=>{this._parent._needsUpdate=!0,this.parent&&!this.parent.isUI?(k.Z.register(this),this.activatePseudoState("root")):(k.Z.remove(this),this.deactivatePseudoState("root"))};add(e){let t=!1;for(let e=0;e<arguments.length;e++)super.add(arguments[e]),arguments[e].isUI&&(t=!0);return t&&this._rebuildChildrenLists(),this}remove(e){for(const e of Object.keys(arguments))arguments[e].isInline&&this.update(null,!0);return super.remove(...arguments),this._rebuildChildrenLists(),this}clear(){return this.removeFromParent(),this.traverse((e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()})),super.clear(),this._backgroundMesh=null,this._backgroundMaterial=null,this._backgroundMaterialMediation=null,this._backgroundMeshMediation=null,this._children.dispose(),this._children=null,this._parent.dispose(),this._parent=null,this._backgroundSide=null,this._backgroundAlphaTest=null,this._visible=null,this._backgroundCastShadow=null,this._backgroundReceiveShadow=null,this._renderOrder=null,this._segments=null,this._bounds=null,this._boxSizing=null,this._padding=null,this._margin=null,this._position=null,this._flexDirection=null,this._justifyContent=null,this._alignItems=null,this._display=null,this._backgroundColor=null,this._backgroundOpacity=null,this._backgroundSize=null,this._fontOpacity=null,this._color=null,this._whiteSpace=null,this._fontFamily=null,this._fontStyle=null,this._fontWeight=null,this._lineHeight=null,this._fontKerning=null,this._letterSpacing=null,this._overflow=null,this._textAlign=null,this._font=null,this._lineBreak=null,this._layouter=null,this}get textContent(){return this._textContent.process(this),this._textContent._value}get backgroundMaterial(){return this._backgroundMaterial}set backgroundMaterial(e){this._backgroundMaterial=e,this._backgroundMaterialMediation={...e.constructor.mediation},this._transferToBackgroundMaterial(),this._backgroundMesh&&(this._backgroundMesh.material=this._backgroundMaterial,(0,ke.Uf)(e,"frameSize",this._backgroundMesh.scale))}set backgroundCustomDepthMaterial(e){this._backgroundCustomDepthMaterial=e,this._transferToBackgroundMaterial(),this._backgroundMesh&&(this._backgroundMesh.customDepthMaterial=this._backgroundCustomDepthMaterial)}get backgroundCustomDepthMaterial(){return this._backgroundCustomDepthMaterial}_transferToBackgroundMaterial(e=null){if(!e){e={};for(const t of this._components)t.output(e)}m.mediate(this,this._backgroundMaterial,e,this._backgroundMaterialMediation,this._backgroundCustomDepthMaterial)}set backgroundSide(e){this._backgroundSide.value=e,this._backgroundMaterial&&(this._backgroundMaterial.side=e)}get backgroundSide(){return this._backgroundSide.value}set backgroundAlphaTest(e){this._backgroundAlphaTest.value=e,this._backgroundMaterial&&(this._backgroundMaterial.alphaTest=e)}get backgroundAlphaTest(){return this._backgroundAlphaTest.value}get fontMaterial(){return this._fontMaterial.value}set fontMaterial(e){this._fontMaterial.value=e}set fontCustomDepthMaterial(e){this._fontCustomDepthMaterial.value=e}get fontCustomDepthMaterial(){return this._fontCustomDepthMaterial.value}_transferToFontMaterial(e=null){const t=this._fontMaterial.value;if(t){if(!e){e={};for(const t of this._components)t.output(e)}m.mediate(this,t,e,this._fontMaterial._mediation,this._fontCustomDepthMaterial.value)}}set fontSide(e){this._fontSide.value=e}get fontSide(){return this._fontSide.value}set fontAlphaTest(e){this._fontAlphaTest.value=e}get fontAlphaTest(){return this._fontAlphaTest.value}_transferToBackgroundMesh(e=null){if(!e){e={};for(const t of this._components)t.output(e)}m.mediate(this,this._backgroundMesh,e,this._backgroundMeshMediation)}setBackgroundMesh(e){this._backgroundMesh&&(this.remove(this._backgroundMesh),this.unbindBackgroundMeshProperties()),this._backgroundMesh=e,this._backgroundMesh&&(this.bindBackgroundMeshProperties(),this._backgroundCustomDepthMaterial&&(this._backgroundMesh.customDepthMaterial=this._backgroundCustomDepthMaterial),this._backgroundMaterial&&(0,ke.Uf)(this._backgroundMaterial,"frameSize",this._backgroundMesh.scale),this._transferToBackgroundMesh(),this.add(this._backgroundMesh))}bindBackgroundMeshProperties(){}unbindBackgroundMeshProperties(){}activatePseudoState(e){}deactivatePseudoState(e){}togglePseudoState(e){}hasPseudoState(e){return!1}set borderRadiusMediation(e){this._borderRadius.mediation=e}set backgroundCastShadow(e){this._backgroundCastShadow&&(this._backgroundCastShadow.value=e)}get backgroundCastShadow(){return this._backgroundCastShadow}set backgroundReceiveShadow(e){this._backgroundReceiveShadow&&(this._backgroundReceiveShadow.value=e)}get backgroundReceiveShadow(){return this._backgroundReceiveShadow}set renderOrder(e){this._renderOrder&&(this._renderOrder.value=e)}get renderOrder(){return this._renderOrder.value}_transferToFontMesh(e=null){if(this._fontMesh){if(!e){e={};for(const t of this._components)t.output(e)}m.mediate(this,this._fontMesh,e,this._fontMeshMediation)}}setFontMesh(e){this._fontMesh&&(this.remove(this._fontMesh),this._fontMesh.material&&this._fontMesh.material.dispose(),this._fontMesh.geometry&&this._fontMesh.geometry.dispose(),this._fontMesh=null,this.unbindFontMeshProperties()),this._fontMesh=e,this._fontMesh&&(this._fontMesh.raycast=()=>{},this.bindFontMeshProperties(),this._transferToFontMaterial(),this._transferToFontMesh(),this.add(this._fontMesh))}bindFontMeshProperties(){}unbindFontMeshProperties(){}set fontCastShadow(e){this._fontCastShadow&&(this._fontCastShadow.value=e)}get fontCastShadow(){return this._fontCastShadow}set fontReceiveShadow(e){this._fontReceiveShadow&&(this._fontReceiveShadow.value=e)}get fontReceiveShadow(){return this._fontReceiveShadow}set segments(e){this._segments.value=e}get segments(){return this._segments.value}set onAfterUpdate(e){console.warn("ThreeMeshUI v7xx : `onAfterUpdate()` property has been deprecated, please rely on `addAfterUpdate` instead."),this.addAfterUpdate(e)}addAfterUpdate(e){this._onAfterUpdates.push(e)}removeAfterUpdate(e){const t=this._onAfterUpdates.indexOf(e);-1!==t&&this._onAfterUpdates.splice(t,1)}performAfterUpdate(){for(let e=0;e<this._onAfterUpdates.length;e++)this._onAfterUpdates[e]()}getProperty(e){return this[`_${e}`]?this[`_${e}`]:null}appendProperty(e,t){this[`_${e}`]=t,this._components.push(t)}replaceProperty(e,t){const r=this[`_${e}`],s=this._components.indexOf(r);return this._components[s]=this[`_${e}`]=t,t.needsUpdate=!0,r}}},"./src/core/elements/glyphs/Inline.js":(e,t,r)=>{r.d(t,{Z:()=>s});class s{constructor(){this._offsetX=0,this._offsetY=0,this._lineBreak=null,this._kerning=0,this._fontFactor=1,this._fontSize=0,this._cumulativeWidth=0,this._paddingLeft=0,this._paddingRight=0,this._marginLeft=0,this._marginRight=0}resetOffsets(){this._offsetX=this._offsetY=0,this._cumulativeWidth=0}get xadvance(){return 0}get xoffset(){return 0}get yoffset(){return 0}get width(){return 0}get height(){return 0}set lineBreak(e){this._lineBreak=e}get lineBreak(){return this._lineBreak}get anchor(){return 0}get kerning(){return this._kerning*this._fontFactor}set kerning(e){this._kerning=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get lineHeight(){return 0}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e}get cumulativeWidth(){return this._cumulativeWidth}set cumulativeWidth(e){this._cumulativeWidth=e}get marginLeft(){return this._marginLeft}set marginLeft(e){this._marginLeft=e}get marginRight(){return this._marginRight}set marginRight(e){this._marginRight=e}get paddingLeft(){return this._paddingLeft}set paddingLeft(e){this._paddingLeft=e}get paddingRight(){return this._paddingRight}set paddingRight(e){this._paddingRight=e}get lineBase(){return 0}set fontFactor(e){this._fontFactor=e}get fontFactor(){return this._fontFactor}}},"./src/core/elements/glyphs/Line.js":(e,t,r)=>{r.d(t,{Z:()=>s});class s extends Array{constructor(...e){super(...e),this.width=0,this.lineBase=0,this.lineHeight=0,this.y=0}}},"./src/core/properties/BaseProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/DefaultValues.js");r("./src/core/elements/MeshUIBaseElement.js");class i{constructor(e,t=null,r=!0){this._id=e,this._value=t,this._needsUpdate=!0,this._needsProcess=!1,this._needsRender=!1,this._isPrimitive=r}get id(){return this._id}get value(){return this._value}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}update(e,t){this.output(t)}output(e){}_outputValue(e){e[this._id]=this._value}process(e){}render(e){}getInheritedInput(e){if("inherit"!==this._value)return this._value;const t=e._parent._value;return t&&t[`_${this._id}`]?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}getDefaultValue(){return s.get(this._id)}isValid(e){return!0}emptyStrategyLogic(){throw new Error(`ThreeMeshUI::${this.constructor.name} has empty strategy. Update has not been processed.`)}requestUpdate(){this._needsUpdate=!0}requestProcess(){this._needsProcess=!1}requestRender(){this._needsRender=!1}}},"./src/core/properties/BoundsBox.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/core/properties/BaseProperty.js"),i=r("./node_modules/three/build/three.module.js"),n=r("./src/utils/NumberUtils.js");class o extends s.Z{constructor(){super("bounds",null,!1),this._size=new i.Pa4(1,1,1),this._offsetWidth=0,this._offsetHeight=0,this._innerWidth=0,this._innerHeight=0,this._centerX=.5,this._centerY=.5,this._needsProcess=!0}setReferenceWidth(e,t){const r=e._width,s=e._padding._value,i=e._borderWidth._value,o=e._margin._value,l=t*(r._auto?1:r._value)-(o.y+o.w);(0,n.G)(l,this._offsetWidth)||(this._offsetWidth=l,this._innerWidth=this._offsetWidth-(s.y+s.w+i.y+i.w),this._centerX=a(e),this._propagateWidth(e),this._triggerCascadingDependencies(e))}setReferenceHeight(e,t){const r=e._height,s=e._padding._value,i=e._borderWidth._value,o=e._margin._value,a=t*(r._auto?1:r._value)-(o.x+o.z);(0,n.G)(a,this._offsetHeight)||(this._offsetHeight=a,this._innerHeight=this._offsetHeight-(s.x+s.z+i.x+i.z),this._centerY=l(e),this._propagateHeight(e),this._triggerCascadingDependencies(e))}setChildrenWidth(e,t){const r=e._padding._value,s=e._borderWidth._value;this._innerWidth=t,this._offsetWidth=this._innerWidth+(r.y+r.w+s.y+s.w),this._centerX=a(e),this._propagateWidth(e),this._triggerCascadingDependencies(e)}setChildrenHeight(e,t){const r=e._padding._value,s=e._borderWidth._value;this._innerHeight=t,this._offsetHeight=this._innerHeight+(r.x+r.z+s.x+s.z),this._centerY=l(e),this._propagateHeight(e),this._triggerCascadingDependencies(e)}update(e,t){const r=e._padding._value,s=e._borderWidth._value,i=e._width;i._auto||i._relative||("content-box"===e._boxSizing._value?(this._innerWidth=i._value,this._offsetWidth=this._innerWidth+r.y+r.w+s.y+s.w):(this._offsetWidth=i._value,this._innerWidth=this._offsetWidth-(r.y+r.w+s.y+s.w)),this._centerX=a(e),this._needsProcess=!0,this._propagateWidth(e),this._triggerCascadingDependencies(e));const n=e._height;n._auto||n._relative||("content-box"===e._boxSizing._value?(this._innerHeight=n._value,this._offsetHeight=this._innerHeight+r.x+r.z+s.x+s.z):(this._offsetHeight=n._value,this._innerHeight=this._offsetHeight-(r.x+r.z+s.x+s.z)),this._centerY=l(e),this._needsProcess=!0,this._propagateHeight(e),this._triggerCascadingDependencies(e))}render(e){this._size.x=this._offsetWidth,this._size.y=this._offsetHeight,e._backgroundMesh&&e._backgroundMesh.updateScale(),e._renderer._needsRender=!0}output(e){e.size=this._size}process(e){e._overflow._needsRender=!0}_computeChildrenSideWidth(e){return function(e){return e._children._boxes.reduce(((e,t)=>{const r=t._margin._value;return e+(t._bounds._offsetWidth+r.y+r.w)}),0)}(e)}_computeChildrenSideHeight(e){return function(e){return e._children._boxes.reduce(((e,t)=>{const r=t._margin._value;return e+(t._bounds._offsetHeight+r.x+r.z)}),0)}(e)}_propagateWidth(e){for(let t=0;t<e._children._boxes.length;t++){const r=e._children._boxes[t];r._width._relative&&r._bounds.setReferenceWidth(r,this._innerWidth)}}_propagateHeight(e){for(let t=0;t<e._children._boxes.length;t++){const r=e._children._boxes[t];r._height._relative&&r._bounds.setReferenceHeight(r,this._innerHeight)}}_triggerCascadingDependencies(e){e._parent._value&&(e._parent._value._autoSize._needsProcess=!0),e._flexDirection._needsProcess=!0,e._fontSize._needsProcess=!0,e._layouter._needsProcess=!0,this._needsRender=!0,e._borderWidth._needsRender=!0,e._borderRadius._needsRender=!0,e._overflow._needsRender=!0}}function a(e){const t=e._padding._value,r=e._borderWidth._value;return(t.w+r.w-(t.y+r.y))/2}function l(e){const t=e._padding._value,r=e._borderWidth._value,s=t.x+r.x;return(t.z+r.z-s)/2}},"./src/core/properties/EmptyProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");class i extends s.Z{constructor(e="untitled"){super(e,void 0,!1)}update(e,t){}output(e){}}},"./src/core/properties/InheritableProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");class i extends s.Z{constructor(e,t=null,r=!0){super(e,t,r),this.output=this._outputValue,this._notInheritedValue=null}update(e,t){this._notInheritedValue=this._value,"inherit"===this._notInheritedValue&&(this._notInheritedValue=this.getInheritedInput(e)),this.propagate(e),this._outputValue(t)}propagate(e){for(const t of e._children._uis){const e=t[`_${this._id}`];void 0!==e&&"inherit"===e._value&&(t[`_${this._id}`]._needsUpdate=!0)}}_outputValue(e){e[this._id]=this._notInheritedValue}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return"inherit"===this._value?this._notInheritedValue:this._value}}},"./src/core/properties/InlineLayouter.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");class i extends s.Z{constructor(){super("layouter",null,!1),this._value=null}update(e,t){this._value=e._parent.find((e=>e.isUI&&e.isText)),this._needsProcess=!0}process(e){this._value&&(this._value._layouter._needsProcess=!0)}}},"./src/core/properties/LineBreakProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");class i extends s.Z{constructor(e="- ,.:?!\n"){super("lineBreak",e,!0),this._newLineBreakability=null}update(e,t){this._needsProcess=!0}process(e){const t=e._whiteSpace._newLineBreakability;if(e._inlines._value)for(let r=0;r<e._inlines._value.length;r++){const s=e._inlines._value[r],i=s.char;let n=null;void 0!==i&&("nowrap"!==t&&(this._value.includes(i)||i.match(/\s/g))&&(n="possible"),i.match(/\n/g)&&(n=t)),s.lineBreak=n}}get value(){return this._value}}},"./src/core/properties/TextContentEmpty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/EmptyProperty.js");class i extends s.Z{constructor(){super("textContent"),this._needsUpdate=!1}set value(e){}process(e){let t="";for(let r=0;r<e.children.length;r++){const s=e.children[r];s.isUI&&(t+=s.textContent)}this._value=t}}},"./src/core/properties/TextLayouter.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/core/properties/BaseProperty.js"),i=r("./src/core/elements/glyphs/Line.js");class n extends Array{constructor(...e){super(...e),this.width=0,this.height=0}}class o extends s.Z{constructor(){super("layouter",null,!1),this._value=null}update(e,t){}process(e){let t=e._width._value;t=e._width._auto?1/0:e._bounds._innerWidth;const r=e._lineHeight._value,s=new n(new i.Z);let o=0;e._children._inlines.forEach((e=>{if(!e._inlines.value)return;this._resetInlines(e);const r=e._fontSize._value,n=e._letterSpacing._value*r,a=e._whiteSpace._value,l=e._lineBreak._value,h={WHITESPACE:a,LETTERSPACING:n,BREAKON:l,INNER_WIDTH:t},u=e._whiteSpace._inlineWrapper;o+=e._margin._value.w+e._padding._value.w,e._inlines.value.forEach(((e,t,r)=>{const a=s[s.length-1];if(u(r,t,o,h))return s.push(new i.Z(e)),e.offsetX=e.xoffset,0===e.width?void(o=0):(e.cumulativeWidth=e.xadvance+n,void(o=e.cumulativeWidth));s[s.length-1].push(e),e.offsetX=o+e.xoffset+e.kerning,e.cumulativeWidth=e.xadvance+e.kerning+n,o+=e.cumulativeWidth,a.length-1==1&&0===a[a.length-2].width&&(e.offsetX-=e.xoffset,o-=e.xoffset)})),o+=e._margin._value.y+e._padding._value.y}));const a=e._whiteSpace._inlineCollapser;let l=0,h=0,u=0;s.forEach(((e,t)=>{const i=a(e);let n=0,o=0;if(e.forEach((e=>{n=Math.max(n,e.lineHeight),o=Math.max(o,e.lineBase),e.offsetX-=i})),e.lineHeight=n,e.lineBase=o,0===t?u=.5*-(n*r-n):u-=s[t-1].lineHeight*r,e.y=u,e.x=0,e.forEach((t=>{t.offsetY=u-t.anchor,t.lineHeight<e.lineHeight&&(t.offsetY-=e.lineBase-t.lineBase)})),h+=e.lineHeight*r,e.width=0,e[0]){const t=e[e.length-1];e.width=t.offsetX+t.cumulativeWidth+t.paddingRight+t.marginRight+e[0].offsetX,l=Math.max(l,e.width)}})),s.height=h,s.width=l,this._value=s,t===1/0&&e._bounds.setChildrenWidth(e,s.width),e._height._auto&&e._bounds.setChildrenHeight(e,s.height);const d=e._parent._value;d&&(d._autoSize._needsProcess=!0,d._flexDirection._needsProcess=!0),e._inlineJustificator._needsProcess=!0,e._textAlign._needsProcess=!0,e._overflow._needsUpdate=!0}_resetInlines(e){e._fontSize.process(e)}}},"./src/core/properties/geometry/SegmentsProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");class i extends s.Z{constructor(){super("segments",1,!1)}}},"./src/core/properties/geometry/SegmentsPropertyText.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/geometry/SegmentsProperty.js");class i extends s.Z{constructor(){super("segments",1,!1),this._notInheritedValue=void 0}update(e,t){this._notInheritedValue=this._value,"inherit"===this._notInheritedValue&&(this._notInheritedValue=this.getInheritedInput(e)),e._layouter._needsUpdate=!0}set value(e){this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return"inherit"===this._value?this._notInheritedValue:this._value}}},"./src/core/properties/hierarchy/ChildrenInline.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");r("./src/core/elements/MeshUIBaseElement.js");class i extends s.Z{constructor(){super("children",null,!1),this._uis=[]}update(e,t){}process(e){}_compute(e){}dispose(){}}},"./src/core/properties/rendering/RendererPropertyBox.js":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("./src/core/properties/BaseProperty.js"),i=r("./src/frame/Frame.js");class n extends s.Z{constructor(){super("renderer")}render(e){e._backgroundMesh||e.setBackgroundMesh(new i.Z(e)),e.performAfterUpdate()}}},"./src/core/properties/style-properties/PositionProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("position","static",!0),this._allowsInherit=!1,this._value="static",this._needsUpdate=!1,this.computeOutputValue=this._computeFromInherited,this.isValidValue=o}_computeFromInherited(e){super._computeFromInherited(e),e._parent._value&&(e._parent._value._children._needsProcess=!0)}}const n=["static","absolute"];function o(e){return-1!==n.indexOf(e)||(console.warn(`(.style) position value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/StyleColorProperty.js":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("./src/core/properties/style-properties/SubStyleProperty.js"),i=r("./node_modules/three/build/three.module.js");class n extends s.Z{constructor(e,t){super(e,t,!1),this._value=new i.Ilk,this.output=this._outputValue}computeOutputValue(e){"inherit"!==this._input&&this._value.set(this._input)}set inline(e){this._input=this._inline=e,this._needsUpdate=!0}}},"./src/core/properties/style-properties/SubStyleProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/BaseProperty.js");r("./src/core/elements/MeshUIBaseElement.js");class i extends s.Z{constructor(e,t,r=!0){super(e,"unset",r),this._input="inherit",this._allowsInherit=!0,this._inheritedInput=void 0,this._inline=void 0}update(e,t){this._allowsInherit||(this._inheritedInput=this.getInheritedInput(e)),this.computeOutputValue(e);for(const t of e._children._uis){const e=t[`_${this._id}`];"inherit"===(e._input?e._input:e._value)&&(t[`_${this._id}`]._needsUpdate=!0)}this.output(t)}computeOutputValue(e){this._value=this._input}_computeFromInherited(e){this._value=this._inheritedInput}set value(e){console.warn(".(style) sub-property cannot be directly set. It must comes from inline or computed setter.")}set inline(e){this.isValidValue(e)&&e!==this._inline&&(this._input=this._inline=e,this._needsUpdate=!0)}get inline(){return this._inline}isValidValue(e){return!0}getInheritedInput(e){if("inherit"!==this._input)return this._input;const t=e._parent._value;return t?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}}},"./src/core/properties/style-properties/background/BackgroundColorProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/StyleColorProperty.js");class i extends s.Z{constructor(e){super("backgroundColor",e,!1),this._input="transparent",this._allowsInherit=!1}computeOutputValue(e){e._backgroundMesh.visible=!("none"===this._input||"transparent"===this._input),"inherit"===this._input?this._value.set(this.getInheritedInput(e)):"transparent"!==this._input&&"none"!==this._input&&this._value.set(this._input)}}},"./src/core/properties/style-properties/flex/AlignItemsProperty.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");const i=["start","center","end","stretch"],n=function(e){return-1!==i.indexOf(e)||(console.warn(`(.style) alignItems value '${e}' is not valid. Aborted`),!1)};class o extends s.Z{constructor(){super("alignItems","inherit",!0),this.isValidValue=n}}},"./src/core/properties/style-properties/flex/FlexDirectionProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");r("./src/core/elements/MeshUIBaseElement.js");class i extends s.Z{constructor(){super("flexDirection","inherit",!0),this.isValid=o}}const n=["row","row-reverse","column","column-reverse"];function o(e){return-1!==n.indexOf(e)||(console.warn(`(.style) flexDirection value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/flex/JustifyContentProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("justifyContent","inherit",!0),this.isValidValue=o}}const n=["start","center","end","space-between","space-around","space-evenly"];function o(e){return-1!==n.indexOf(e)||(console.warn(`(.style) justifyContent value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontFamilyProperty.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/core/properties/style-properties/SubStyleProperty.js"),i=r("./src/font/FontLibrary.js"),n=r("./src/font/FontFamily.js");class o extends s.Z{constructor(){super("fontFamily","inherit",!0)}computeOutputValue(e){if(this._input instanceof n.Z)this._value=this._input;else if("inherit"===this._input);else if("string"==typeof this._input){const e=i.Z.getFontFamily(this._input);e?this._value=e:console.warn(`(.style) fontFamily, the font '${this._input}' is not registered. Aborted.`)}else console.warn("(.style) fontFamily requires a registered fontFamily instance, or the id of a registered fontFamily."),console.warn("If you want to set a specific font, please use .font property instead.")}get value(){return this._value}getInheritedInput(e){if("inherit"!==this._input)return this._input;const t=e._parent._value;return t?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}}},"./src/core/properties/style-properties/font/FontFamilyPropertyInline.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/font/FontLibrary.js"),i=r("./src/font/FontFamily.js"),n=r("./src/core/properties/style-properties/font/FontFamilyProperty.js");class o extends n.Z{constructor(){super("fontFamily","inherit",!0),this._input="inherit",this._needsUpdate=!0,this._allowsInherit=!1}computeOutputValue(e){let t=this._inheritedInput;if("inherit"===t&&(t=this.getInheritedInput(e)),t instanceof i.Z)this._value=t,e._font._needsUpdate=!0;else if("string"==typeof t){const r=s.Z.getFontFamily(t);r?(this._value=r,e._font._needsUpdate=!0):console.warn(`(.style) fontFamily, the font '${t}' is not registered. Aborted.`)}else console.warn("(.style) fontFamily requires a registered fontFamily instance, or the id of a registered fontFamily."),console.warn("If you want to set a specific font, please use .font property instead.")}get value(){return this._value}}},"./src/core/properties/style-properties/font/FontKerningProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("fontKerning","inherit"),this.isValidValue=o}}const n=["normal","none","inherit"];function o(e){return-1!==n.indexOf(e)||(console.warn(`(.style) fontKerning value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontSizePropertyInline.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("fontSize","inherit",!0),this._allowsInherit=!1}computeOutputValue(e){this._value=this._inheritedInput,e._font._fontVariant&&(e._bounds._needsProcess=!0,e._layouter._needsProcess=!0)}process(e){if(!e._font._fontVariant||!e._font._fontVariant.isReady)return;const t=this._value/e._font._fontVariant.typographic.size,r=e._inlines._value;for(let e=0;e<r.length;e++){const s=r[e];s.resetOffsets(),s.fontSize=this._value,s.fontFactor=t}}get value(){return this._value}}},"./src/core/properties/style-properties/font/FontStyleProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(e){super("fontStyle",e,!0),this.isValidValue=o}}const n=["normal","italic"];function o(e){return-1!==n.indexOf(e)||(console.warn(`(.style) fontStyle value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontStylePropertyInline.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/font/FontStyleProperty.js");class i extends s.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}}},"./src/core/properties/style-properties/font/FontWeightProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("fontWeight","inherit",!0),this.isValid=o}}const n=["100","200","300","400","500","600","700","800","900","light","normal","bold","bolder"];function o(e){return-1!==n.indexOf(e.toString())||(console.warn(`(.style) fontWeight value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontWeightPropertyInline.js":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("./src/core/properties/style-properties/font/FontWeightProperty.js"),i=r("./src/font/utils/FontUtils.js");class n extends s.Z{constructor(){super()}computeOutputValue(e){this._value=(0,i.C)(this.getInheritedInput(e))}}},"./src/core/properties/style-properties/font/LetterSpacingProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("letterSpacing","inherit",!0)}}},"./src/core/properties/style-properties/font/LetterSpacingPropertyInline.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/font/LetterSpacingProperty.js");class i extends s.Z{constructor(){super(),this._input="inherit",this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}_computeFromInherited(e){super._computeFromInherited(e),e._fontSize._needsProcess=!0,e._layouter._needsProcess=!0}}},"./src/core/properties/style-properties/font/LineHeightProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("lineHeight","inherit",!0)}update(e,t){super.update(e,t),e._layouter._needsProcess=!0}}},"./src/core/properties/style-properties/font/TextAlignProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("textAlign","inherit",!0),this.isValidValue=o}}const n=["left","right","center","justify","justify-left","justify-right","justify-center"],o=function(e){return-1!==n.indexOf(e)||(console.warn(`(.style) textAlign value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/WhiteSpaceProperty.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/SubStyleProperty.js");class i extends s.Z{constructor(){super("whiteSpace","inherit"),this.isValidValue=o}}const n=["normal","nowrap","pre","pre-line","pre-wrap"];function o(e){return-1!==n.indexOf(e)||(console.warn(`(.style) whiteSpace value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/WhiteSpacePropertyInline.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/properties/style-properties/font/WhiteSpaceProperty.js");class i extends s.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited,this._whiteSpacedContent="",this._stringCollapser=this.emptyStrategyLogic,this._inlineCollapser=this.emptyStrategyLogic,this._inlineWrapper=this.emptyStrategyLogic}_computeFromInherited(e){switch(super._computeFromInherited(e),this._newLineBreakability=o(this._value),this._value){case"nowrap":case"normal":this._stringCollapser=a;break;case"pre-line":this._stringCollapser=l;break;default:this._stringCollapser=h}switch(this._value){case"pre-line":case"nowrap":case"normal":this._inlineCollapser=p;break;case"pre-wrap":this._inlineCollapser=_;break;default:this._inlineCollapser=f}switch(this._value){case"pre-line":case"pre-wrap":case"normal":this._inlineWrapper=u;break;case"pre":this._inlineWrapper=d;break;default:this._inlineWrapper=c}this._needsProcess=!0}process(e){e.isInline&&!e.isInlineBlock&&(this._whiteSpacedContent=this._stringCollapser(e._textContent._value),e._glyphs._needsProcess=!0)}}const n={"\t":"\t","\n":"\n","\r":"\r"," ":" "},o=function(e){switch(e){case"pre":case"pre-wrap":case"pre-line":return"mandatory"}return null};function a(e){return l(e.replace(/\n/g," "))}function l(e){return e.replace(/[ ]{2,}/g," ")}function h(e){return e}function u(e,t,r,s){const i=e[t];if("mandatory"===i.lineBreak)return!0;if(r+i.xadvance+i.xoffset+i.kerning>s.INNER_WIDTH)return!0;const n=v(e,t,s);return function(e,t,r,s){return!(!e||!e.char)&&(!(t+r<s.INNER_WIDTH)&&s.BREAKON.indexOf(e.char)>-1)}(e[t-1],r,n,s)}function d(e,t,r,s){return"mandatory"===e[t].lineBreak}function c(){return!1}function _(e){if(!e[0])return 0;const t=e[0],r=e[e.length-1];return t.char&&"\n"===t.char&&e.length>1&&m([t],e[1]),r.char&&"\n"===r.char&&e.length>1&&g([r],e[e.length-2]),t.offsetX}function p(e){if(!e[0])return 0;let t,r=[];for(let s=0;s<e.length;s++){const i=e[s];if(!(i.char&&n[i.char]&&e.length>s))break;r.push(i),t=e[s+1]}m(r,t),r=[],t=null;for(let s=e.length-1;s>0;s--){const i=e[s];if(!(i.char&&n[i.char]&&s>0))break;r.push(i),t=e[s-1]}return g(r,t),e[0].offsetX}function f(e){return e[0]?e[0].offsetX:0}function g(e,t){if(t)for(let r=0;r<e.length;r++){const s=e[r];s.fontFactor=0,s.offsetX=t.offsetX+t.cumulativeWidth,s.cumulativeWidth=0}}function m(e,t){if(t)for(let r=0;r<e.length;r++){const s=e[r];s.fontFactor=0,s.offsetX=t.offsetX,s.cumulativeWidth=0}}function v(e,t,r,s){if(s=s||0,!e[t])return s;const i=e[t];return i.lineBreak?s+i.xadvance:v(e,t+1,r,s+i.xadvance+i.xoffset+i.kerning+r.LETTERSPACING)}},"./src/elements/basic/BlockElement.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/elements/basic/BoxElement.js"),i=r("./src/core/properties/BaseProperty.js");r("./src/core/elements/MeshUIBaseElement.js"),r("./src/core/elements/glyphs/Line.js");class n extends i.Z{constructor(){super("layouter",null,!1),this._needsUpdate=!0,this._childrenPos={}}update(e,t){this._childrenPos={};for(const t of e._children._boxes)"static"===t._position._value&&(this._childrenPos[t.id]=t.position)}process(e){}}class o extends s.Z{constructor(e={}){const t={};o.definePropertiesValues(t,e),super(t,e),o.init(this)}add(e){const t=[];for(let e=0;e<arguments.length;e++){const r=arguments[e];!r.isUI||r.isBox?t.push(r):console.warn("Block element can only contain Box elements.",r)}return super.add(...t)}static definePropertiesValues(e,t){e.layouter=n}static init(e){Object.defineProperties(e,{isBlock:{configurable:!1,enumerable:!0,value:!0}})}}},"./src/elements/basic/BoxElement.js":(e,t,r)=>{r.d(t,{Z:()=>z});var s=r("./src/frame/materials/FrameMaterial.js"),i=r("./src/core/elements/MeshUIBaseElement.js"),n=r("./src/core/properties/BaseProperty.js");class o extends n.Z{constructor(){super("children",null,!1),this._uis=[],this._boxes=[]}update(e,t){this._compute(e),e._layouter._needsUpdate=!0,e._renderOrder._needsUpdate=!0}process(e){this._compute(e),e._flexDirection._needsProcess=!0,e._layouter._needsProcess=!0,e._overflow._needsRender=!0}_compute(e){this._uis=e.children.filter((e=>e.visible&&e.isUI)),this._boxes=this._uis.filter((e=>e.isBox)).sort(this._sortOrder)}dispose(){this._uis=null,this._boxes=null}_sortOrder=(e,t)=>e._order._value<t._order._value?-1:e._order._value>t._order._value?1:this._uis.indexOf(e)<this._uis.indexOf(t)?-1:1}var a=r("./src/core/properties/BoundsBox.js"),l=r("./src/core/properties/style-properties/flex/AlignItemsProperty.js");class h extends l.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!0,this._process=this.emptyStrategyLogic,this._childAlign=this.emptyStrategyLogic}computeOutputValue(e){switch(this._value=this._inheritedInput,e._flexDirection._value){case"row":case"row-reverse":switch(this._process=g,this._value){case"start":this._childAlign=c;break;case"end":this._childAlign=d;break;default:this._childAlign=u}break;case"column":case"column-reverse":switch(this._process=f,this._value){case"start":this._childAlign=p;break;case"end":this._childAlign=_;break;default:this._childAlign=u}}this._needsProcess=!0,e._autoSize._needsProcess=!0,e._flexDirection._needsProcess=!0,e._justifyContent._needsProcess=!0,this._needsProcess=!0,e._fontSize._needsProcess=!0,e._layouter._needsProcess=!0}process(e){this._process(e,this._childAlign);let t="center",r="center",s="center";const i=e._padding._value,n=e._borderWidth._value;t=-1!==e._flexDirection._value.indexOf("column")?"start"===this._value?r="left":"end"===this._value?r="right":"centerX":"start"===this._value?s="top":"end"===this._value?s="bottom":"centerY";let o=-(i.x-i.z)/2-(n.x-n.z)/2,a=-(i.y-i.w)/2-(n.y-n.w)/2;"left"===r?a=(i.w-i.y)/2+(n.w-n.y)/2:"right"===r&&(a=-(i.y-i.w)/2-(n.y-n.w)/2),"top"===s?o=-(i.x-i.z)/2-(n.x-n.z)/2:"bottom"===s&&(o=(i.z-i.x)/2+(n.z-n.x)/2),e._children._boxes.forEach((r=>{let s=0,i=0;"top"===t?i=-r._margin._value.x:"bottom"===t?i=r._margin._value.z:"left"===t?s=r._margin._value.w:"right"===t?s=-r._margin._value.y:"centerX"===t?s=(r._margin._value.w-r._margin._value.y)/2:"centerY"===t&&(i=(-r._margin._value.x+r._margin._value.z)/2),e._layouter._childrenPos[r.id].x+=a+s,e._layouter._childrenPos[r.id].y+=o+i}))}}function u(){return 0}function d(e,t){return-t+e._bounds._offsetHeight/2}function c(e,t){return t-e._bounds._offsetHeight/2}function _(e,t){return t-e._bounds._offsetWidth/2}function p(e,t){return-t+e._bounds._offsetWidth/2}function f(e,t){const r=e._bounds._innerWidth/2;e._children._boxes.forEach((s=>{e._layouter._childrenPos[s.id].x=t(s,r)}))}function g(e,t){const r=e._bounds._innerHeight/2;e._children._boxes.forEach((s=>{e._layouter._childrenPos[s.id].y=t(s,r)}))}var m=r("./src/core/properties/style-properties/flex/FlexDirectionProperty.js");class v extends m.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!0,this._offset=0,this._reverse=1,this._process=this.emptyStrategyLogic}computeOutputValue(e){switch(this._value=this._inheritedInput,this._value){case"row":this._process=y;break;case"row-reverse":this._process=b;break;case"column":this._process=x;break;case"column-reverse":this._process=w}e._justifyContent._needsUpdate||e._justifyContent.computeOutputValue(e),e._alignItems._needsUpdate||e._alignItems.computeOutputValue(e),this._needsProcess=!0}process(e){switch(this._value){case"row":this._offset=-e._bounds._innerWidth/2;break;case"row-reverse":this._offset=e._bounds._innerWidth/2;break;case"column":this._offset=e._bounds._innerHeight/2;break;case"column-reverse":this._offset=-e._bounds._innerHeight/2}this._reverse=-Math.sign(this._offset),0===this._reverse&&(this._reverse=1),this._process(e),e._justifyContent._needsProcess=!0,e._layouter._needsProcess=!0}}function y(e){let t=e._flexDirection._offset;const r=e._flexDirection._reverse,s=e._children._boxes;for(let i=0;i<s.length;i++){const n=s[i],o=n.id,a=n._bounds._offsetWidth;t+=n._margin._value.w*r;const l=e._layouter._childrenPos[o];l.x=t+a/2*r,l.y=0,t+=r*(a+n._margin._value.y)}}function b(e){let t=e._flexDirection._offset;const r=e._flexDirection._reverse,s=e._children._boxes;for(let i=0;i<s.length;i++){const n=s[i],o=n.id,a=n._bounds._offsetWidth;t+=n._margin._value.y*r;const l=e._layouter._childrenPos[o];l.x=t+a/2*r,l.y=0,t+=(a+n._margin._value.w)*r}}function x(e){let t=e._flexDirection._offset;const r=e._flexDirection._reverse,s=e._children._boxes;for(let i=0;i<s.length;i++){const n=s[i],o=n.id,a=n._bounds._offsetHeight;t+=n._margin._value.x*r;const l=e._layouter._childrenPos[o];l.x=0,l.y=t+a/2*r,t+=(a+n._margin._value.z)*r}}function w(e){let t=e._flexDirection._offset;const r=e._flexDirection._reverse,s=e._children._boxes;for(let i=0;i<s.length;i++){const n=s[i],o=n.id,a=n._bounds._offsetHeight;t+=n._margin._value.z*r;const l=e._layouter._childrenPos[o];l.x=0,l.y=t+a/2*r,t+=(a+n._margin._value.x)*r}}var S=r("./src/core/properties/style-properties/flex/JustifyContentProperty.js");class k extends S.Z{constructor(e){super("justifyContent",e,!0),this._allowsInherit=!1,this._needsUpdate=!0,this._computeOffset=this.emptyStrategyLogic,this._computeMargin=this.emptyStrategyLogic,this._process=this.emptyStrategyLogic}computeOutputValue(e){switch(this._value=this._inheritedInput,e._flexDirection._value){case"column-reverse":case"column":this._process=j.bind(this);break;case"row-reverse":case"row":this._process=R.bind(this)}switch(this._value){case"end":this._computeOffset=P,this._computeMargin=M;break;case"center":this._computeOffset=U,this._computeMargin=M;break;case"start":this._computeOffset=C,this._computeMargin=M;break;case"space-between":this._computeOffset=C,this._computeMargin=I;break;case"space-around":this._computeOffset=C,this._computeMargin=Z;break;case"space-evenly":this._computeOffset=C,this._computeMargin=B}e._flexDirection._needsProcess=!0}process(e){this._process(e),e._alignItems._needsProcess=!0}}function R(e){const t=e._flexDirection._offset,{usedDirectionSpace:r,remainingSpace:s}=function(e){const t=e._bounds._computeChildrenSideWidth(e);return{usedDirectionSpace:t,remainingSpace:e._bounds._innerWidth-t}}(e),i=2*t-r*Math.sign(t),n=this._computeOffset(i),o=this._computeMargin(e,s,e._flexDirection._reverse);e._children._boxes.forEach(((t,r)=>{e._layouter._childrenPos[t.id].x-=n-o[r]}))}function j(e){const t=e._flexDirection._offset,{usedDirectionSpace:r,remainingSpace:s}=function(e){const t=e._bounds._computeChildrenSideHeight(e);return{usedDirectionSpace:t,remainingSpace:e._bounds._innerHeight-t}}(e),i=2*t-r*Math.sign(t),n=this._computeOffset(i),o=this._computeMargin(e,s,e._flexDirection._reverse);e._children._boxes.forEach(((t,r)=>{e._layouter._childrenPos[t.id].y-=n-o[r]}))}function C(e){return 0}function P(e){return e}function U(e){return e/2}function M(e,t=0,r=1){return Array(e._children._boxes.length).fill(0)}function I(e,t=0,r=1){const s=e._children._boxes.length,i=Array(s).fill(0);if(t>0&&s>1){const e=t/(s-1)*r;i[0]=0;for(let t=1;t<s;t++)i[t]=e*t}return i}function B(e,t=0,r=1){const s=e._children._boxes.length,i=Array(s).fill(0);if(t>0){const e=t/(s+1)*r;for(let t=0;t<s;t++)i[t]=e*(t+1)}return i}function Z(e,t=0,r=1){const s=e._children._boxes.length,i=Array(s).fill(0);if(t>0){const e=t/s*r,n=e/2;i[0]=n;for(let t=1;t<s;t++)i[t]=n+e*t}return i}var F=r("./node_modules/three/build/three.module.js"),V=r("./src/core/properties/rendering/RendererPropertyBox.js"),W=r("./src/core/properties/style-properties/PositionProperty.js");class T extends W.Z{constructor(){super("position")}update(e,t){super.update(e,t),this._needsProcess=!0}}class O extends n.Z{constructor(){super("autosize"),this._needsProcess=!0}process(e){e._width._auto&&function(e){e._bounds.setChildrenWidth(e,function(e){switch(e._flexDirection._value){case"row":case"row-reverse":return function(e){let t=0;for(const r of e._children._boxes){if("static"!==r._position._value)continue;const e=r._margin._value;t+=r._bounds._offsetWidth+e.y+e.w}return t}(e);case"column":case"column-reverse":return function(e){let t=0;for(const r of e._children._boxes){if("static"!==r._position._value)continue;const e=r._margin._value,s=r._bounds._offsetWidth+e.y+e.w;s>t&&(t=s)}return t}(e)}}(e))}(e),e._height._auto&&function(e){e._bounds.setChildrenHeight(e,function(e){switch(e._flexDirection._value){case"row":case"row-reverse":return function(e){let t=0;for(const r of e._children._boxes){if("static"!==r._position._value)continue;const e=r._margin._value,s=r._bounds._offsetHeight+e.x+e.z;s>t&&(t=s)}return t}(e);case"column":case"column-reverse":return function(e){let t=0;for(const r of e._children._boxes){if("static"!==r._position._value)continue;const e=r._margin._value;t+=r._bounds._offsetHeight+e.x+e.z}return t}(e)}}(e))}(e);const t="stretch"===e._alignItems._value,r=t&&-1!==e._flexDirection._value.indexOf("column"),s=t&&!r;for(const t of e._children._boxes)(t._width._auto&&r||t._width._relative)&&t._bounds.setReferenceWidth(t,e._bounds._innerWidth),(t._height._auto&&s||t._height._relative)&&t._bounds.setReferenceHeight(t,e._bounds._innerHeight)}}class z extends i.Z{constructor(e,t){z.definePropertiesValues(e,t),super(e,t),z.init(this)}bindBackgroundMeshProperties(){this._bounds._size=this._backgroundMesh.scale,this._bounds._needsProcess=!0}unbindBackgroundMeshProperties(){this._bounds._size=new F.Pa4(1,1,1),this._bounds._needsProcess=!0}static definePropertiesValues(e,t){e.children||(e.children=o),e.bounds||(e.bounds=a.Z),e.flexDirection||(e.flexDirection=v),e.justifyContent||(e.justifyContent=k),e.alignItems||(e.alignItems=h),e.position||(e.position=T),e.autoSize||(e.autoSize=O),e.renderer||(e.renderer=V.Z),t.fontSide||(t.fontSide=0),t.invertAlpha||(t.invertAlpha=!1),t.fontCastShadow||(t.fontCastShadow=!1),t.fontReceiveShadow||(t.fontReceiveShadow=!1),t.backgroundCastShadow||(t.backgroundCastShadow=!1),t.backgroundReceiveShadow||(t.backgroundReceiveShadow=!1)}static init(e){Object.defineProperties(e,{isBox:{configurable:!1,enumerable:!0,value:!0}}),e.backgroundMaterial=new s.Z,e._renderer.render(e),e._backgroundMesh.visible=!1}}},"./src/elements/basic/InlineElement.js":(e,t,r)=>{r.d(t,{Z:()=>U});var s=r("./src/core/elements/MeshUIBaseElement.js"),i=r("./src/core/properties/BaseProperty.js");class n extends i.Z{constructor(){super("textContent",null,!1)}update(e,t){e._glyphs._needsUpdate=!0,e._whiteSpace._needsProcess=!0}}class o extends i.Z{constructor(){super("inlines",null,!1),this._value=null}process(e){if(this._value=e._glyphs._value.map((e=>e.asInlineGlyph())),this._value.length){this._value[0].paddingLeft=e._padding._value.w,this._value[0].marginLeft=e._margin._value.w;const t=this._value.length-1;this._value[t].paddingRight=e._padding._value.y,this._value[t].marginRight=e._margin._value.y}e._fontSize._needsProcess=!0,e._lineBreak._needsProcess=!0,e._fontKerning._needsProcess=!0,e._layouter._needsProcess=!0}get value(){return this._value}}class a extends i.Z{constructor(){super("glyphs",null,!1),this._needsUpdate=!1,this._value=null}process(e){e._font._fontVariant&&e._font._fontVariant.isReady&&(this._value=e._whiteSpace._whiteSpacedContent.split("").map((t=>e._font._fontVariant.getTypographicGlyph(t))),this._value&&(e._inlines._needsProcess=!0))}get value(){return this._value}}var l=r("./src/core/properties/style-properties/StyleColorProperty.js");class h extends l.Z{constructor(){super("color","inherit",!1),this.output=this._outputValue}computeOutputValue(e){"inherit"===this._input?this._value.set(this.getInheritedInput(e)):this._value.set(this._input)}}var u=r("./src/core/properties/LineBreakProperty.js"),d=r("./src/core/properties/InlineLayouter.js");class c extends l.Z{constructor(e){super("backgroundColor",e,!1),this._allowsInherit=!1,this._input=0}computeOutputValue(e){"inherit"===this._input?this._value.set(this.getInheritedInput(e)):this._value.set(this._input)}}var _=r("./src/core/properties/style-properties/font/FontStylePropertyInline.js"),p=r("./src/core/properties/style-properties/font/FontWeightPropertyInline.js"),f=r("./src/core/properties/style-properties/font/FontFamilyPropertyInline.js"),g=r("./src/core/properties/style-properties/font/WhiteSpacePropertyInline.js"),m=r("./src/core/properties/style-properties/font/LetterSpacingPropertyInline.js"),v=r("./src/core/properties/style-properties/font/FontSizePropertyInline.js"),y=r("./src/core/properties/geometry/SegmentsPropertyText.js");class b extends y.Z{constructor(){super(),this._value="inherit"}}var x=r("./src/core/properties/style-properties/font/FontKerningProperty.js");class w extends x.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}_computeFromInherited(e){super._computeFromInherited(e),e._parent._value._layouter._needsProcess=!1}process(e){if("none"!==this._value){const t=e._whiteSpace._whiteSpacedContent,r=e._inlines._value;for(let s=1;s<r.length;s++){const i=t[s-1]+t[s];r[s].kerning=e._font._fontVariant.getKerningAmount(i)}}}}var S=r("./src/core/properties/hierarchy/ChildrenInline.js"),k=r("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js"),R=r("./node_modules/three/build/three.module.js");class j extends i.Z{constructor(){super("renderer")}render(e){if(!e._inlines._value||!e._inlines._value.length)return;const t=e._inlines._value.map((t=>e._font._fontVariant.getGeometricGlyph(t,e).translate(t.offsetX,t.offsetY,0))),r=(0,k.qf)(t);e.setFontMesh(new R.Kj0(r,e.fontMaterial)),e._fontMesh.renderOrder=1/0}}var C=r("./src/core/properties/style-properties/font/TextAlignProperty.js");class P extends C.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!1}computeOutputValue(e){this._value=this._inheritedInput,e._layouter._needsProcess=!0}}class U extends s.Z{constructor(e={}){const t={};U.definePropertiesValues(t,e),super(t,e),U.init(this)}add(e){const t=[];for(let e=0;e<arguments.length;e++){const r=arguments[e];!r.isUI||r.isInline?(t.push(r),r.position.z=.005):console.warn("Block element can only contain Box elements.",r)}return super.add(...t)}_rebuildParentUI=()=>{super._rebuildParentUI(),this._layouter._needsUpdate=!0};set textContent(e){this._textContent.value=e}get textContent(){return this._textContent._value}set invertAlpha(e){this._invertAlpha.value=e}get invertAlpha(){return this._invertAlpha._value}static definePropertiesValues(e,t){e.children||(e.children=S.Z),e.textContent||(e.textContent=n),e.glyphs||(e.glyphs=a),e.inlines||(e.inlines=o),e.layouter||(e.layouter=d.Z),e.renderer||(e.renderer=j),e.fontFamily||(e.fontFamily=f.Z),e.fontWeight||(e.fontWeight=p.Z),e.fontStyle||(e.fontStyle=_.Z),e.fontSize||(e.fontSize=v.Z),e.color||(e.color=h),e.backgroundColor||(e.backgroundColor=c),e.lineBreak||(e.lineBreak=u.Z),e.letterSpacing||(e.letterSpacing=m.Z),e.whiteSpace||(e.whiteSpace=g.Z),e.segments||(e.segments=b),e.textAlign||(e.textAlign=P),e.fontKerning||(e.fontKerning=w)}static init(e){Object.defineProperties(e,{isInline:{configurable:!1,enumerable:!0,value:!0}})}}},"./src/elements/basic/TextElement.js":(e,t,r)=>{r.d(t,{Z:()=>P});var s=r("./src/elements/basic/BoxElement.js"),i=r("./src/elements/basic/InlineElement.js"),n=r("./src/core/properties/TextContentEmpty.js");class o extends n.Z{constructor(){super("textContent",null,!1),this._needsUpdate=!1}set value(e){this._value!==e&&(this._value=e,this._needsUpdate=!0)}update(e,t){this._needsUpdate=!1;for(let t=e.children.length-1;t>=0;t--){const r=e.children[t];r.isUI&&(e.remove(r),r.clear())}e._children._uis=[],this._value&&e.add(new i.Z({name:"anonymousInline",textContent:this._value}))}}var a=r("./src/core/properties/TextLayouter.js"),l=r("./src/core/properties/style-properties/font/TextAlignProperty.js");class h extends l.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!0}computeOutputValue(e){this._value=this._inheritedInput,this._needsProcess=!0}process(e){!function(e){const t=e._layouter._value,r=e._textAlign._value,s=e._bounds._innerWidth;for(let r=0;r<t.length;r++){const s=t[r],i=u(e,s,r===t.length-1),n=e._padding._value,o=e._borderWidth._value,a=(-n.w+n.y)/2+(-o.w+o.y)/2;s.x+=i;for(let e=0;e<s.length;e++)s[e].offsetX+=i-a}if(0===r.indexOf("justify"))for(let e=0;e<t.length;e++){const i=t[e];if(-1!==r.indexOf("-")&&e===t.length-1)return;const n=s-i.width;if(n<=0)return;let o=0;for(let e=1;e<i.length-1;e++)o+=" "===i[e].char?1:0;const a=n/o;let l=1;"justify-right"===r&&(i.reverse(),l=-1);let h=0;for(let e=1;e<=i.length-1;e++){const t=i[e];t.offsetX+=h*l,h+=" "===t.char?a:0}"justify-right"===r&&i.reverse()}}(e),e._renderer._needsRender=!0}}function u(e,t,r){switch(e._textAlign._value){case"justify-left":case"justify":case"left":return-e._bounds._innerWidth/2;case"justify-right":case"right":return-t.width+e._bounds._innerWidth/2;case"center":return-t.width/2;case"justify-center":return r?-t.width/2:-e._bounds._innerWidth/2;default:console.warn(`textAlign: '${e._textAlign._value}' is not valid`)}}var d=r("./src/core/properties/style-properties/flex/FlexDirectionProperty.js");r("./src/core/elements/MeshUIBaseElement.js");class c extends d.Z{constructor(){super(),this._value=this._input="column",this._allowsInherit=!1,this._needsUpdate=!0}computeOutputValue(e){this._value=this._inheritedInput}}var _=r("./src/core/properties/style-properties/flex/JustifyContentProperty.js"),p=r("./src/core/properties/style-properties/flex/AlignItemsProperty.js"),f=r("./src/core/properties/style-properties/font/LineHeightProperty.js");class g extends f.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}}var m=r("./src/core/properties/style-properties/font/WhiteSpacePropertyInline.js"),v=r("./src/core/properties/geometry/SegmentsPropertyText.js"),y=r("./src/core/properties/style-properties/font/FontKerningProperty.js");class b extends y.Z{constructor(){super(),this._value=this._input=this.getDefaultValue(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}_computeFromInherited(e){super._computeFromInherited(e)}}var x=r("./src/core/properties/BoundsBox.js");class w extends x.Z{constructor(){super(),this._innerWidth=1/0,this._innerHeight=0}}var S=r("./src/core/properties/BaseProperty.js");class k extends S.Z{constructor(){super("children",null,!1),this._uis=[],this._inlines=[],this._boxes=[]}update(e,t){this._compute(e),this._needsProcess=!0}process(e){this._compute(e),e._overflow._needsRender=!0}_compute(e){this._uis=e.children.filter((e=>e.visible&&e.isUI)),this._inlines=this._uis.filter((e=>e.isInline)).sort(this._sortOrder)}dispose(){this._inlines=null}_sortOrder=(e,t)=>e._order._value<t._order._value?-1:e._order._value>t._order._value?1:this._uis.indexOf(e)<this._uis.indexOf(t)?-1:1}class R extends S.Z{constructor(){super("autosize")}process(e){if(e._layouter._value&&e._layouter._value.length){const t=e._layouter._value,r=e._padding._value,s=e._borderWidth._value;e._width._auto&&e._bounds.setOffsetWidth(e,t.width+r.w+r.y+s.w+s.y),e._height._auto&&e._bounds.setOffsetHeight(e,t.height+r.x+r.z+s.x+s.z)}}}var j=r("./src/core/properties/rendering/RendererPropertyBox.js");class C extends j.Z{constructor(){super("renderer"),this._needsUpdate=!1}render(e){super.render(e);for(const t of e._children._inlines)t._renderer.render(t);e.performAfterUpdate()}}class P extends s.Z{constructor(e={},t={}){P.definePropertiesValues(t,e),super(t,e),P.init(this)}add(e){const t=[];let r=!1;for(let e=0;e<arguments.length;e++){const s=arguments[e];!s.isUI||s.isInline?(s.isInline&&(r=!0),t.push(s)):console.warn("Block element can only contain Box elements.",s)}return t.length>0&&super.add(...t),r&&(this._children._needsUpdate=!0,this._layouter._needsProcess=!0),this}set textContent(e){this._textContent.value=e}get textContent(){return super.textContent}set invertAlpha(e){this._invertAlpha.value=e}get invertAlpha(){return this._invertAlpha._value}get lines(){return this._layouter._value}static definePropertiesValues(e,t){e.flexDirection=c,e.justifyContent=_.Z,e.alignItems=p.Z,e.bounds=w,e.autoSize=R,e.renderer=C,e.children||(e.children=k),e.textContent||(e.textContent=o),e.layouter||(e.layouter=a.Z),e.lineHeight||(e.lineHeight=g),e.textAlign||(e.textAlign=h),e.whiteSpace||(e.whiteSpace=m.Z),e.fontKerning||(e.fontKerning=b),e.segments||(e.segments=v.Z),t.width||(t.width="100%"),t.fontSide||(t.fontSide=0)}static init(e){Object.defineProperties(e,{isText:{configurable:!1,enumerable:!0,value:!0}})}}},"./src/elements/html/properties/StyleComputedPropertyWrapper.js":(e,t,r)=>{r.d(t,{Z:()=>s});r("./src/core/elements/MeshUIBaseElement.js");class s{constructor(e){this._element=e}set(e){for(const t in e)this[t]=e[t]}set boxSizing(e){this._element._boxSizing.computed=e}get boxSizing(){return this._element._boxSizing._computed}set width(e){this._element._width.computed=e}get width(){return this._element._width._computed}set height(e){this._element._height.computed=e}get height(){return this._element._height._computed}set padding(e){this._element._padding.computed=e}get padding(){return this._element._padding._computed}set paddingTop(e){this._element._padding.computedTop=e}get paddingTop(){return this._element._padding.computedTop}set paddingRight(e){this._element._padding.computedRight=e}get paddingRight(){return this._element._padding.computedRight}set paddingBottom(e){this._element._padding.computedBottom=e}get paddingBottom(){return this._element._padding.computedBottom}set paddingLeft(e){this._element._padding.computedLeft=e}get paddingLeft(){return this._element._padding.computedLeft}set margin(e){this._element._margin.computed=e}get margin(){return this._element._margin._computed}set marginTop(e){this._element._margin.computedTop=e}get marginTop(){return this._element._margin.computedTop}set marginRight(e){this._element._margin.computedRight=e}get marginRight(){return this._element._margin.computedRight}set marginBottom(e){this._element._margin.computedBottom=e}get marginBottom(){return this._element._margin.computedBottom}set marginLeft(e){this._element._margin.computedLeft=e}set display(e){this._element._display.computed=e}get display(){return this._element._display._computed}set overflow(e){this._element._overflow.computed=e}get overflow(){return this._element._overflow._computed}set position(e){this._element._position.computed=e}get position(){return this._element._position._computed}set flexDirection(e){this._element._flexDirection.computed=e}get flexDirection(){return this._element._flexDirection._computed}set justifyContent(e){this._element._justifyContent.computed=e}get justifyContent(){return this._element._justifyContent._computed}set alignItems(e){this._element._alignItems.computed=e}get alignItems(){return this._element._alignItems._computed}set order(e){this._element._order.computed=e}get order(){return this._element._order._computed}set backgroundColor(e){this._element._backgroundColor.computed=e}get backgroundColor(){return this._element._backgroundColor._computed}set backgroundOpacity(e){this._element._backgroundOpacity.computed=e}get backgroundOpacity(){return this._element._backgroundOpacity._computed}set backgroundImage(e){this._element._backgroundImage.computed=e}get backgroundImage(){return this._element._backgroundImage._computed}set backgroundSize(e){this._element._backgroundSize.computed=e}get backgroundSize(){return this._element._backgroundSize._computed}set whiteSpace(e){this._element._whiteSpace.computed=e}get whiteSpace(){return this._element._whiteSpace._computed}set color(e){this._element._color.computed=e}get color(){return this._element._color._computed}set opacity(e){this._element._fontOpacity.computed=e}get opacity(){return this._element._fontOpacity._computed}set fontStyle(e){this._element._fontStyle.computed=e}get fontStyle(){return this._element._fontStyle._computed}set fontWeight(e){this._element._fontWeight.computed=e}get fontWeight(){return this._element._fontWeight._computed}set fontKerning(e){this._element._fontKerning.computed=e}get fontKerning(){return this._element._fontKerning._computed}set letterSpacing(e){this._element._letterSpacing.computed=e}get letterSpacing(){return this._element._letterSpacing._computed}set lineHeight(e){this._element._lineHeight.computed=e}get lineHeight(){return this._element._lineHeight._computed}set textAlign(e){this._element._textAlign.computed=e}get textAlign(){return this._element._textAlign._computed}set borderRadiusUnits(e){this._element._borderRadius.units=e}get borderRadiusUnits(){return this._element._borderRadius.units}set borderRadius(e){this._element._borderRadius.computed=e}get borderRadius(){return this._element._borderRadius._computed}set borderTopLeftRadius(e){this._element._borderRadius.computedTopLeft=e}get borderTopLeftRadius(){return this._element._borderRadius.computedTopLeft}set borderTopRightRadius(e){this._element._borderRadius.computedTopRight=e}get borderTopRightRadius(){return this._element._borderWidth.computedTopRight}set borderBottomRightRadius(e){this._element._borderRadius.computedBottomRight=e}get borderBottomRightRadius(){return this._element._borderWidth.computedBottomRight}set borderBottomLeftRadius(e){this._element._borderRadius.computedBottomLeft=e}get borderBottomLeftRadius(){return this._element._borderWidth.computedBottomLeft}set borderTopRadius(e){this._element._borderRadius.computedTop=e}get borderTopRadius(){return this._element._borderWidth.computedTop}set borderRightRadius(e){this._element._borderRadius.computedRight=e}get borderRightRadius(){return this._element._borderRadius.computedRight}set borderLeftRadius(e){this._element._borderRadius.computedLeft=e}get borderLeftRadius(){return this._element._borderRadius.computedLeft}set borderBottomRadius(e){this._element._borderRadius.computedBottom=e}get borderBottomRadius(){return this._element._borderRadius.computedBottom}set borderWidthUnits(e){this._element._borderWidth.units=e}get borderWidthUnits(){return this._element._borderWidth.units}set borderWidth(e){this._element._borderWidth.computed=e}get borderWidth(){return this._element._borderWidth._computed}set borderTopWidth(e){this._element._borderWidth.computedTop=e}get borderTopWidth(){return this._element._borderWidth.computedTop}set borderRightWidth(e){this._element._borderWidth.computedRight=e}get borderRightWidth(){return this._element._borderWidth.computedRight}set borderBottomWidth(e){this._element._borderWidth.computedBottom=e}get borderBottomWidth(){return this._element._borderWidth.computedBottom}set borderLeftWidth(e){this._element._borderWidth.computedLeft=e}get borderLeftWidth(){return this._element._borderWidth.computedLeft}set borderColor(e){this._element._borderColor.computed=e}get borderColor(){return this._element._borderColor._computed}set borderOpacity(e){this._element._borderOpacity.computed=e}get borderOpacity(){return this._element._borderOpacity._computed}set computed(e){}get computed(){const e={};for(const t of this._element._components)e[t.id]=t.output;return e}dispose(){this._element=null}}},"./src/elements/html/properties/StylePropertyWrapper.js":(e,t,r)=>{r.d(t,{Z:()=>s});r("./src/core/elements/MeshUIBaseElement.js");class s{constructor(e){this._element=e}set boxSizing(e){this._element._boxSizing.inline=e}get boxSizing(){return this._element._boxSizing._inline}set width(e){this._element._width.inline=e}get width(){return this._element._width._inline}set height(e){this._element._height.inline=e}get height(){return this._element._height._inline}set padding(e){this._element._padding.inline=e}get padding(){return this._element._padding._inline}set paddingTop(e){this._element._padding.top=e}get paddingTop(){return this._element._padding.top}set paddingRight(e){this._element._padding.right=e}get paddingRight(){return this._element._padding.right}set paddingBottom(e){this._element._padding.bottom=e}get paddingBottom(){return this._element._padding.bottom}set paddingLeft(e){this._element._padding.left=e}get paddingLeft(){return this._element._padding.left}set margin(e){this._element._margin.inline=e}get margin(){return this._element._margin._inline}set marginTop(e){this._element._margin.top=e}get marginTop(){return this._element._margin.top}set marginRight(e){this._element._margin.right=e}get marginRight(){return this._element._margin.right}set marginBottom(e){this._element._margin.bottom=e}get marginBottom(){return this._element._margin.bottom}set marginLeft(e){this._element._margin.left=e}set display(e){this._element._display.inline=e}get display(){return this._element._display._inline}set overflow(e){this._element._overflow.inline=e}get overflow(){return this._element._overflow._inline}set position(e){this._element._position.inline=e}get position(){return this._element._position._inline}set flexDirection(e){this._element._flexDirection.inline=e}get flexDirection(){return this._element._flexDirection._inline}set justifyContent(e){this._element._justifyContent.inline=e}get justifyContent(){return this._element._justifyContent._inline}set alignItems(e){this._element._alignItems.inline=e}get alignItems(){return this._element._alignItems._inline}set order(e){this._element._order.inline=e}get order(){return this._element._order._inline}set backgroundColor(e){this._element._backgroundColor.inline=e}get backgroundColor(){return this._element._backgroundColor._inline}set backgroundOpacity(e){this._element._backgroundOpacity.inline=e}get backgroundOpacity(){return this._element._backgroundOpacity._inline}set backgroundImage(e){this._element._backgroundImage.inline=e}get backgroundImage(){return this._element._backgroundImage._inline}set backgroundSize(e){this._element._backgroundSize.inline=e}get backgroundSize(){return this._element._backgroundSize._inline}set whiteSpace(e){this._element._whiteSpace.inline=e}get whiteSpace(){return this._element._whiteSpace._inline}set color(e){this._element._color.inline=e}get color(){return this._element._color._inline}set opacity(e){this._element._fontOpacity.inline=e}get opacity(){return this._element._fontOpacity._inline}set fontStyle(e){this._element._fontStyle.inline=e}get fontStyle(){return this._element._fontStyle._inline}set fontWeight(e){this._element._fontWeight.inline=e}get fontWeight(){return this._element._fontWeight._inline}set fontKerning(e){this._element._fontKerning.inline=e}get fontKerning(){return this._element._fontKerning._inline}set letterSpacing(e){this._element._letterSpacing.inline=e}get letterSpacing(){return this._element._letterSpacing._inline}set lineHeight(e){this._element._lineHeight.inline=e}get lineHeight(){return this._element._lineHeight._inline}set textAlign(e){this._element._textAlign.inline=e}get textAlign(){return this._element._textAlign._inline}set borderRadiusUnits(e){this._element._borderRadius.units=e}get borderRadiusUnits(){return this._element._borderRadius.units}set borderRadius(e){this._element._borderRadius.inline=e}get borderRadius(){return this._element._borderRadius._inline}set borderTopLeftRadius(e){this._element._borderRadius.topLeft=e}get borderTopLeftRadius(){return this._element._borderRadius.topLeft}set borderTopRightRadius(e){this._element._borderRadius.topRight=e}get borderTopRightRadius(){return this._element._borderWidth.topRight}set borderBottomRightRadius(e){this._element._borderRadius.bottomRight=e}get borderBottomRightRadius(){return this._element._borderWidth.bottomRight}set borderBottomLeftRadius(e){this._element._borderRadius.bottomLeft=e}get borderBottomLeftRadius(){return this._element._borderWidth.bottomLeft}set borderTopRadius(e){this._element._borderRadius.top=e}get borderTopRadius(){return this._element._borderWidth.top}set borderRightRadius(e){this._element._borderRadius.right=e}get borderRightRadius(){return this._element._borderRadius.right}set borderLeftRadius(e){this._element._borderRadius.left=e}get borderLeftRadius(){return this._element._borderRadius.left}set borderBottomRadius(e){this._element._borderRadius.bottom=e}get borderBottomRadius(){return this._element._borderRadius.bottom}set borderWidthUnits(e){this._element._borderWidth.units=e}get borderWidthUnits(){return this._element._borderWidth.units}set borderWidth(e){this._element._borderWidth.inline=e}get borderWidth(){return this._element._borderWidth._inline}set borderTopWidth(e){this._element._borderWidth.top=e}get borderTopWidth(){return this._element._borderWidth.top}set borderRightWidth(e){this._element._borderWidth.right=e}get borderRightWidth(){return this._element._borderWidth.right}set borderBottomWidth(e){this._element._borderWidth.bottom=e}get borderBottomWidth(){return this._element._borderWidth.bottom}set borderLeftWidth(e){this._element._borderWidth.left=e}get borderLeftWidth(){return this._element._borderWidth.left}set borderColor(e){this._element._borderColor.inline=e}get borderColor(){return this._element._borderColor._inline}set borderOpacity(e){this._element._borderOpacity.inline=e}get borderOpacity(){return this._element._borderOpacity._inline}set computed(e){}get computed(){const e={};for(const t of this._element._components)e[t.id]=t.output;return e}dispose(){this._element=null}}},"./src/font/FontFamily.js":(e,t,r)=>{r.d(t,{Z:()=>g});var s=r("./node_modules/three/build/three.module.js"),i=r("./src/font/TypographicFont.js");class n extends i.Z{constructor(e){super(),this._size=e.info.size,this._lineHeight=e.common.lineHeight,this._lineBase=e.common.base,this._name=e.info.face,this._textureWidth=e.common.scaleW,this._textureHeight=e.common.scaleH,this._charset=e.chars.map((e=>e.char)).join("")}get textureWidth(){return this._textureWidth}get textureHeight(){return this._textureHeight}}var o=r("./src/font/TypographicGlyph.js"),a=r("./src/font/InlineGlyph.js");class l extends a.Z{constructor(e){super(e)}get uv(){return this.typographic.uv}}class h extends o.Z{constructor(e,t){super(e),this._char=t.char,this._width=t.width,this._heigth=t.height,this._xadvance=t.xadvance?t.xadvance:this._width,this._xoffset=t.xoffset?t.xoffset:0,this._yoffset=t.yoffset?t.yoffset:0,this._uv=t.uv?t.uv:null,isNaN(t.x)||(this._uv={left:t.x/e.textureWidth,right:(t.x+t.width)/e.textureWidth,top:1-(t.y+t.height)/e.textureHeight,bottom:1-t.y/e.textureHeight})}get uv(){return this._uv}clone(e){return new h(this._font,{char:e,width:this._width,height:this._heigth,xadvance:this._xadvance,xoffset:this._xoffset,yoffset:this._yoffset,uv:null})}asInlineGlyph(){return new l(this)}}r("./src/core/elements/MeshUIBaseElement.js");class u extends s._12{constructor(e,t){let r=1,s=1;const i=e.typographic.font.size,n=t._segments.value;r=Math.ceil(e.typographic.width/i*n),s=Math.ceil(e.typographic.height/i*n),super(e.width,e.height,r,s),e.uv?(this._mapUVs(e),this._transformGeometry(e)):(this._nullifyUVs(),this.scale(0,0,1),this.translate(0,e.fontSize/2,0)),this.name="GlyphGeometry"}_mapUVs(e){const t=e.uv.right-e.uv.left,r=e.uv.bottom-e.uv.top,i=this.getAttribute("uv").array.slice(),n=[];for(let s=0;s<i.length;s+=2){const o=i[s],a=i[s+1];n.push(e.uv.left+t*o),n.push(e.uv.top+r*a)}this.setAttribute("uvG",new s.TlE(new Float32Array(n),2))}_nullifyUVs(){const e=[],t=this.getAttribute("uv").array.length;for(let r=0;r<t;r++)e.push(0);this.setAttribute("uvG",new s.TlE(new Float32Array(e),2))}_transformGeometry(e){this.translate(e.width/2,-e.height/2,0)}}var d=r("./src/font/msdf/materials/MSDFFontMaterial.js"),c=r("./src/font/FontVariant.js"),_=r("./src/font/FontLibrary.js");class p extends c.Z{constructor(e,t,r,i){var n,o;if(super(e,t),this._unitRange=new s.FM8(1,1),r.pages?this._buildData(r):(n=this,o=r,(new s.hH6).setResponseType("json").load(o,(e=>{n._buildData(e),n._checkReadiness()}))),i instanceof s.xEZ)this._texture=i,this._buildTexture(i);else{if(!("string"==typeof i||i instanceof String))throw new Error(`ThreeMeshUI::MSDFVariant provided 'texture' parameter is '${typeof i}'. Only Texture and String allowed.`);!function(e,t){e._texture=(new s.dpR).load(t,(t=>{e._buildTexture(t),e._checkReadiness()}))}(this,i)}this._defaultMaterialClass=d.Z,this._checkReadiness()}get texture(){return this._texture}get unitRange(){return this._unitRange}set fontMaterial(e){this._defaultMaterialClass=e}get fontMaterial(){return this._defaultMaterialClass}_buildData(e){this._font=new n(e),this._kernings=this._buildKerningPairs(e),this._chars=this._buildCharacters(e),this._chars[" "]=this._buildCharacterWhite(e),this._chars["\n"]=this._buildCharacterWhite(e,"\n",.001,1),this._chars["\t"]=this._buildCharacterWhite(e,"\t",4,1),this._size=e.info.size,this._lineHeight=e.common.lineHeight,this._lineBase=e.common.base,this._distanceRange=e.distanceField.distanceRange,this._unitRange=new s.FM8(this._distanceRange,this._distanceRange).divide(new s.FM8(e.common.scaleW,e.common.scaleH))}_buildTexture(e){e.generateMipmaps=!1,e.minFilter=s.wem,e.magFilter=s.wem,e.needsUpdate=!0}_getFallbackCharacter(e){return _.Z.missingCharacter(this,e)}getGeometricGlyph(e,t){return new u(e,t)}_readyCondition(){return this._chars&&this._texture&&this._texture.image}_buildKerningPairs(e){const t={};for(let r=0;r<e.kernings.length;r++){const s=e.kernings[r];if(0===s.amount)continue;t[String.fromCharCode(s.first,s.second)]=s.amount}return t}_buildCharacters(e){const t={};for(let r=0;r<e.chars.length;r++){const s=e.chars[r];t[s.char]=new h(this._font,s)}return t}_buildCharacterWhite(e,t=" ",r=1,s=1){return new h(this._font,{char:t,width:e.info.size/3*r,height:.7*e.info.size*s})}_alterElementProperties(e){}}var f=r("./src/font/utils/FontUtils.js");class g extends s.pBf{constructor(e){super(),this._name=e,this._variants=[],this._isReady=!1}get isReady(){return this._isReady}addVariant(e,t,r,s,i=!1){if(i||!this.getVariant(e,t)){this._isReady=!1;const i=new p(e,t,r,s);this._variants.push(i),i.isReady?this._checkReadiness():i.addEventListener("ready",this._checkReadiness)}else console.warn(`FontFamily('${this._name}')::addVariant() - Variant(${e}, ${t}) already exists.`);return this}addCustomImplementationVariant(e,t=!1){return t||!this.getVariant(e.weight,e.style)?(this._isReady=!1,this._variants.push(e),e.isReady?this._checkReadiness():e.addEventListener("ready",this._checkReadiness)):console.warn(`FontFamily('${this._name}')::addCustomImplementationVariant() - Variant(${e.weight}, ${e.style}) already exists.`),this}getVariant(e,t){return e=(0,f.C)(e),this._variants.find((r=>r.weight===e&&r.style===t))}get name(){return this._name}_checkReadiness=()=>{var e;this._variants.every((e=>e.isReady))&&((e=this)._isReady=!0,e.dispatchEvent(m))}}const m={type:"ready"}},"./src/font/FontLibrary.js":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("./src/font/FontFamily.js");r("./src/font/FontVariant.js");const i={};let n=function(e,t){return console.error(`The character '${t}' is not included in the font characters set.`)," "};const o={addFontFamily:function(e){return i[e]&&console.error(`FontLibrary::addFontFamily - Font('${e}') is already registered`),i[e]=new s.Z(e),i[e]},getFontFamily:function(e){return i[e]},prepare:function(e){const t=[...arguments];t.forEach((e=>{if(!(e instanceof s.Z))throw new Error(`FontLibrary::prepare() - One of the provided parameter is not a FontFamily. Instead ${typeof e} given.`)}));const r=function(){return t.every((e=>e.isReady))};return new Promise(((e,s)=>{if(r())e();else for(let s=0;s<t.length;s++){const i=t[s];i.isReady||i.addEventListener("ready",(()=>{r()&&e()}))}}))},setMissingCharacterHandler:function(e){n=e},missingCharacter:function(e,t){return n(e,t)}}},"./src/font/FontVariant.js":(e,t,r)=>{r.d(t,{Z:()=>a});var s=r("./node_modules/three/build/three.module.js"),i=(r("./src/core/elements/MeshUIBaseElement.js"),r("./src/font/utils/FontUtils.js"));class n extends s.pBf{constructor(e,t){super(),this._isReady=!1,this._weight=(0,i.C)(e),this._style=t,this._size=42,this._lineHeight=42,this._lineBase=42,this._font=null}get typographic(){return this._font}get isReady(){return this._isReady}get weight(){return this._weight}get style(){return this._style}get texture(){return this._texture}set fontMaterial(e){throw Error(`FontVariant('${this.id}')::fontMaterial - is abstract.`)}get fontMaterial(){throw Error(`FontVariant('${this.id}')::fontMaterial - is abstract.`)}get id(){return`${this._name}(w:${this.weight},s:${this.style})`}getTypographicGlyph(e){let t=this._chars[e];if(t)return t;if(e.match(/\s/))return this._chars[" "];const r=this._getFallbackCharacter(e);if(r&&(t=this._chars[r],t))return t;throw Error(`FontVariant('${this.id}')::getTypographicGlyph() - character('${e}') and/or fallback character were not found in provided msdf charset.`)}_getFallbackCharacter(e){throw new Error(`FontVariant(${typeof this})::_getFallbackCharacter() is abstract and should therefore be overridden.`)}getGeometricGlyph(e,t){throw new Error(`FontVariant(${typeof this})::getGeometryCharacter() is abstract and should therefore be overridden.`)}getKerningAmount(e){return this._kernings[e]?this._kernings[e]:0}adjustTypographicGlyphs(e){for(const t in e){const r=this.getTypographicGlyph(t),s=e[t];for(const i in s)r["_"+i]=e[t][i]}}_checkReadiness(){var e;this._readyCondition()&&((e=this)._isReady=!0,e.dispatchEvent(o))}_alterElementProperties(e){throw new Error(`FontVariant(${typeof this})::_alterElementProperties() is abstract and should therefore be overridden.`)}_readyCondition(){throw new Error(`FontVariant(${typeof this})::_readyCondition() is abstract and should therefore be overridden.`)}}const o={type:"ready"};const a=n},"./src/font/InlineGlyph.js":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("./src/core/elements/glyphs/Inline.js");class i extends s.Z{constructor(e){super(),this._typographic=e}get typographic(){return this._typographic}get xadvance(){return this._typographic.xadvance*this._fontFactor}get xoffset(){return this._typographic.xoffset*this._fontFactor}get yoffset(){return this._typographic.yoffset*this._fontFactor}get width(){return this._typographic.width*this._fontFactor}get height(){return this._typographic.height*this._fontFactor}get char(){return this._typographic.char}get anchor(){return this.yoffset}get lineHeight(){return this._typographic.font.lineHeight*this._fontFactor}get lineBase(){return this._typographic.font.lineBase*this._fontFactor}}},"./src/font/TypographicFont.js":(e,t,r)=>{r.d(t,{Z:()=>s});class s{constructor(){this._size=42,this._lineHeight=42,this._lineBase=38,this._name="-",this._charset=""}get size(){return this._size}get lineHeight(){return this._lineHeight}get lineBase(){return this._lineBase}get name(){return this._name}get charset(){return this._charset}}},"./src/font/TypographicGlyph.js":(e,t,r)=>{r.d(t,{Z:()=>s});class s{constructor(e){this._char="",this._width=1,this._heigth=1,this._xadvance=1,this._xoffset=0,this._yoffset=0,this._font=e}get font(){return this._font}get char(){return this._char}get width(){return this._width}get height(){return this._heigth}get xadvance(){return this._xadvance}get xoffset(){return this._xoffset}get yoffset(){return this._yoffset}set yoffset(e){this._yoffset=e}clone(e){throw new Error("Abstract... Need to be implemented")}asInlineGlyph(){throw new Error("Abstract... Need to be implemented")}}},"./src/font/msdf/materials/MSDFDepthMaterial.js":(e,t,r)=>{if(r.d(t,{Z:()=>n}),/^ex__msdf_(crumple|shadows)$/.test(r.j))var s=r("./node_modules/three/build/three.module.js");var i=r("./src/font/msdf/utils/MSDFFontMaterialUtils.js");class n extends(/^ex__msdf_(crumple|shadows)$/.test(r.j)?s.lRF:null){static get mediation(){return i.Z.mediation}constructor(e={}){e.depthPacking=s.mSO,i.Z.ensureMaterialOptions(e),delete e.transparent,super(e),i.Z.ensureDefines(this),i.Z.ensureUserData(this,e),this.onBeforeCompile=e=>{i.Z.bindUniformsWithUserData(e,this),i.Z.injectShaderChunks(e)}}}},"./src/font/msdf/materials/MSDFFontMaterial.js":(e,t,r)=>{r.d(t,{Z:()=>c});var s=r("./node_modules/three/build/three.module.js"),i=r("./src/font/msdf/utils/MSDFFontMaterialUtils.js"),n=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),o=r("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),a=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),l=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),h=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js");const u=`\n${n.Z}\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t${h.Z}\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t${o.Z}\n\t#include <clipping_planes_vertex>\n}\n`,d=`\nuniform vec3 diffuse;\nuniform float opacity;\n${a.Z}\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t// instead of <color_fragment> : vec4 diffuseColor\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t${l.Z}\n\t#include <alphatest_fragment>\n\t// instead of <output_fragment>\n\tgl_FragColor = diffuseColor;\n\t#include <clipping_planes_fragment>\n}\n`;class c extends s.jyz{static get mediation(){return i.Z.mediation}constructor(e={}){super({uniforms:{glyphMap:{value:null},diffuse:{value:null},opacity:{value:1},unitRange:{value:new s.FM8(0,0)},alphaTest:{value:.02}},transparent:!0,clipping:!0,vertexShader:u,fragmentShader:d,extensions:{derivatives:!0}}),this.defines.USE_ALPHATEST="",this.needsUpdate=!0,this.noRGSS=e.noRGSS||!1}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get opacity(){return this.uniforms.opacity.value}get unitRange(){return this.uniforms.unitRange.value}set unitRange(e){this.uniforms.unitRange.value.copy(e)}get glyphMap(){return this.uniforms.glyphMap.value}set glyphMap(e){this.uniforms.glyphMap.value=e}get isDefault(){return this.constructor===c}get alphaTest(){return this.uniforms.alphaTest.value}set alphaTest(e){this.uniforms.alphaTest.value=e}}},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\tfloat alpha;\n#ifdef NO_RGSS\n\n\talpha = tap( vUvG );\n\n#else\n\n\t// shader-based supersampling based on https://bgolus.medium.com/sharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec\n\t// per pixel partial derivatives\n\tvec2 dx = dFdx(vUvG);\n\tvec2 dy = dFdy(vUvG);\n\t// rotated grid uv offsets\n\tvec2 uvOffsets = vec2(0.125, 0.375);\n\tvec2 offsetUV = vec2(0.0, 0.0);\n\t// supersampled using 2x2 rotated grid\n\talpha = 0.0;\n\toffsetUV.xy = vUvG + uvOffsets.x * dx + uvOffsets.y * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG - uvOffsets.x * dx - uvOffsets.y * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG + uvOffsets.y * dx - uvOffsets.x * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG - uvOffsets.y * dx + uvOffsets.x * dy;\n\talpha += tap(offsetUV);\n\talpha *= 0.25;\n\n#endif\n\n\talpha = clamp( alpha, 0.0, 1.0 );\n\n#ifdef INVERT_ALPHA\n\n\talpha = 1.0 - alpha;\n\n#endif\n\n\tdiffuseColor.a *= alpha;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\nvarying vec2 vUvG;\nuniform sampler2D glyphMap;\nuniform vec2 unitRange;\n// functions from the original msdf repo:\n// https://github.com/Chlumsky/msdfgen#using-a-multi-channel-distance-field\nfloat median(float r, float g, float b) {\n\treturn max(min(r, g), min(max(r, g), b));\n}\nfloat screenPxRange() {\n\n\t// precomputed unitRange as recommended by Chlumsky\n\t// vec2 unitRange = vec2(pxRange)/vec2(textureSize(glyphMap, 0));\n\tvec2 screenTexSize = vec2(1.0)/fwidth(vUvG);\n\treturn max(0.5*dot(unitRange, screenTexSize), 1.0);\n}\nfloat tap(vec2 offsetUV) {\n\tvec3 msd = texture( glyphMap, offsetUV ).rgb;\n\tfloat sd = median(msd.r, msd.g, msd.b);\n\tfloat screenPxDistance = screenPxRange() * (sd - 0.5);\n\tfloat alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\treturn alpha;\n}\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\nattribute vec2 uvG;\nvarying vec2 vUvG;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\nvUvG = uvG;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\ngl_Position.z -= 0.00001;\n"},"./src/font/msdf/utils/MSDFFontMaterialUtils.js":(e,t,r)=>{r.d(t,{Z:()=>u});var s=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),i=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js"),n=r("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),o=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),a=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),l=r("./node_modules/three/build/three.module.js"),h=r("./src/utils/mediator/transformers/MaterialTransformers.js");class u{static ensureMaterialOptions(e){e.transparent=!0,e.alphaTest=e.alphaTest||.02}static ensureDefines(e){e.defines||(e.defines={})}static ensureUserData(e,t){e.userData.glyphMap={value:t.glyphMap},e.userData.unitRange={value:new l.FM8}}static bindUniformsWithUserData(e,t){e.uniforms.glyphMap=t.userData.glyphMap,e.uniforms.unitRange=t.userData.unitRange}static injectShaderChunks(e){u.injectVertexShaderChunks(e),u.injectFragmentShaderChunks(e)}static injectVertexShaderChunks(e){e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","#include <uv_pars_vertex>\n"+s.Z),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n"+i.Z),e.vertexShader=e.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n"+n.Z)}static injectFragmentShaderChunks(e){e.fragmentShader=e.fragmentShader.replace("#include <uv_pars_fragment>","#include <uv_pars_fragment>\n"+o.Z),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","#include <alphamap_fragment>\n"+a.Z)}static from(e){return class extends e{static get fontMaterialProperties(){return u.mediation}constructor(e={}){u.ensureMaterialOptions(e),super(e),u.ensureDefines(this),u.ensureUserData(this,e),this._userDefinedOnBeforeCompile=e=>{},this._onBeforeCompile=this._cumulativeOnBeforeCompile}set onBeforeCompile(e){this._userDefinedOnBeforeCompile=e}get onBeforeCompile(){return this._onBeforeCompile}_cumulativeOnBeforeCompile=e=>{u.bindUniformsWithUserData(e,this),u.injectShaderChunks(e),this._userDefinedOnBeforeCompile(e)}}}static get mediation(){return d}}const d={clippingPlanes:{m:"clippingPlanes"},fontAlphaTest:{m:"alphaTest",t:h.Dr},fontSide:{m:"side"},font:{m:"glyphMap",t:function(e,t,r){const s=r?r.texture:null,i=r?r.unitRange:new l.FM8;if(void 0!==e[t])return e.glyphMap=s,void(e.unitRange=i);e.userData&&e.userData.glyphMap&&(e.userData.glyphMap.value=s,e.userData.unitRange.value=i)}},color:{m:"color"},fontOpacity:{m:"opacity"},fontSmooth:{m:"NO_RGSS",t:function(e,t,r){r&&"antialiased"!==r?e.defines.NO_RGSS="":delete e.defines.NO_RGSS,e.needsUpdate=!0}},invertAlpha:{m:"INVERT_ALPHA",t:h.nY}}},"./src/font/utils/FontUtils.js":(e,t,r)=>{r.d(t,{C:()=>i});const s={light:"100",normal:"400",bold:"700",bolder:"900"};function i(e){if(!isNaN(e))return e.toString();const t=s[e];return t||e}},"./src/frame/Frame.js":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("./node_modules/three/build/three.module.js");r("./src/core/elements/MeshUIBaseElement.js");let i;class n extends s.Kj0{constructor(e){const t=e.slice,r={};let n=1,o=1;if(t){const e=1;if(n=t.width?t.width:1,o=t.height?t.height:1,t.top){if(t.left){const i=new s._12(t.left*n,t.top*o,e,e);l(i,0,t.left,1-t.top,1),i.translate(t.left*n/2,-t.top*o/2,0),r.topLeft=i}const i=new s._12(1,t.top*o,e,e);if(l(i,t.left,1-t.right,1-t.top,1),i.translate(0,-t.top*o/2,0),r.top=i,t.right){const i=new s._12(t.right*n,t.top*o,e,e);l(i,1-t.right,1,1-t.top,1),i.translate(-t.right*n/2,-t.top*o/2,0),r.topRight=i}}if(t.left){const i=new s._12(t.left*n,1,e,e);l(i,0,t.left,t.bottom,1-t.top),i.translate(t.left*n/2,0,0),r.left=i}const i=new s._12(1,1,e,e);if(l(i,t.left,1-t.right,t.bottom,1-t.top),r.middle=i,t.right){const i=new s._12(t.right*n,1,e,e);l(i,1-t.right,1,t.bottom,1-t.top),i.translate(-t.right*n/2,0,0),r.right=i}if(t.bottom){if(t.left){const i=new s._12(t.left*n,t.bottom*o,e,e);l(i,0,t.left,0,t.bottom),i.translate(t.left*n/2,t.bottom*o/2,0),r.bottomLeft=i}const i=new s._12(1,t.bottom*o,e,e);if(l(i,t.left,1-t.right,0,t.bottom),i.translate(0,t.bottom*o/2,0),r.bottom=i,t.right){const i=new s._12(t.right*n,t.bottom*o,e,e);l(i,1-t.right,1,0,t.bottom),i.translate(-t.right*n/2,t.bottom*o/2,0),r.bottomRight=i}}}let a=e.backgroundMaterial;t&&(i||(i=new s.vBJ({alphaTest:1.1})),a=i);const h=new s._12(1,1,e._segments.value,e._segments.value),u=new s.TlE(new Float32Array(h.getAttribute("uv").array),2);if(h.setAttribute("uvB",u).name="uvB",super(h,a),this.name="UIBackgroundBox",t){this.slice=t,this.sliceSize=new s.Pa4(1-(t.left+t.right),1-(t.bottom+t.top),1),this.sliceScale=new s.Pa4(n,o,1);for(const t in r){const i=new s.Kj0(r[t],e.backgroundMaterial);this.add(i),r[t]=i}this.updateScale=this.updateScaleSlice,this.slices=r}}updateScale(){}updateScaleSlice(){const e=new s.Pa4(1,1,1);this.scale.x<(this.slice.left+this.slice.right)*this.sliceScale.x&&(e.x=this.scale.x/((this.slice.left+this.slice.right)*this.sliceScale.x)),this.scale.y<(this.slice.bottom+this.slice.top)*this.sliceScale.y&&(e.y=this.scale.y/((this.slice.bottom+this.slice.top)*this.sliceScale.y));for(const e in this.slices){const t=this.slices[e];t.scale.set(1/this.scale.x,1/this.scale.y,this.scale.y);const r=o[e];for(const e in r)t.position[e]=this.scale[e]*r[e]*t.scale[e];const s=a[e];if(s){s.x&&(t.position.x=.5*this.sliceScale.x*(this.slice.left-this.slice.right)*(1/this.scale.x)),s.y&&(t.position.y=.5*this.sliceScale.y*(this.slice.bottom-this.slice.top)*(1/this.scale.y));for(const e in s){const r=this.scale[e]-(1-this.sliceSize[e])*this.sliceScale[e];t.scale[e]=Math.max(0,r*(1/this.scale[e]))}}}1!==e.x&&(this.slices.left.scale.x*=e.x,this.slices.topLeft.scale.x*=e.x,this.slices.bottomLeft.scale.x*=e.x,this.slices.right.scale.x*=e.x,this.slices.topRight.scale.x*=e.x,this.slices.bottomRight.scale.x*=e.x),1!==e.y&&(this.slices.top.scale.y*=e.y,this.slices.topLeft.scale.y*=e.y,this.slices.topRight.scale.y*=e.y,this.slices.bottom.scale.y*=e.y,this.slices.bottomLeft.scale.y*=e.y,this.slices.bottomRight.scale.y*=e.y)}}const o={topLeft:{x:-.5,y:.5},top:{y:.5},topRight:{x:.5,y:.5},left:{x:-.5},right:{x:.5},bottomLeft:{x:-.5,y:-.5},bottom:{y:-.5},bottomRight:{x:.5,y:-.5}},a={top:{x:1},left:{y:1},right:{y:1},bottom:{x:1},middle:{x:1,y:1}};function l(e,t,r,i,n){const o=r-t,a=n-i,l=e.attributes.uv;for(let e=0;e<l.count;e++){const r=l.getX(e),s=l.getY(e);l.setXY(e,t+r*o,i+s*a)}const h=new s.TlE(new Float32Array(e.getAttribute("uv").array),2);e.setAttribute("uvB",h).name="uvB"}},"./src/frame/materials/FrameDepthMaterial.js":(e,t,r)=>{if(r.d(t,{Z:()=>n}),"dev__frames"==r.j)var s=r("./node_modules/three/build/three.module.js");var i=r("./src/frame/utils/FrameMaterialUtils.js");class n extends("dev__frames"==r.j?s.lRF:null){static get mediation(){return i.Z.mediation}constructor(e={}){e.depthPacking=s.mSO,i.Z.ensureMaterialOptions(e),delete e.transparent,super(e),i.Z.ensureDefines(this),i.Z.ensureUserData(this,e),this.onBeforeCompile=e=>{i.Z.bindUniformsWithUserData(e,this),i.Z.injectShaderChunks(e)}}}},"./src/frame/materials/FrameMaterial.js":(e,t,r)=>{r.d(t,{Z:()=>p});var s=r("./node_modules/three/build/three.module.js"),i=r("./src/frame/renderers/ShaderChunk/frame-border.pars.vertex.glsl.js"),n=r("./src/frame/renderers/ShaderChunk/frame-border.vertex.glsl.js"),o=r("./src/frame/renderers/ShaderChunk/frame-background.pars.fragment.glsl.js"),a=r("./src/frame/renderers/ShaderChunk/frame-border.pars.fragment.glsl.js"),l=r("./src/frame/renderers/ShaderChunk/frame-common.pars.fragment.glsl.js"),h=r("./src/frame/renderers/ShaderChunk/frame-background.fragment.glsl.js"),u=r("./src/frame/renderers/ShaderChunk/frame-border.fragment.glsl.js");const d=`\n// Would be automatic on three materials and from USE_UV\n#ifdef USE_MAP\nvarying vec2 vUv;\n#endif\n\n${i.Z}\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#ifdef USE_MAP\n\tvUv = uv;\n\t#endif\n\n\t${n.Z}\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <clipping_planes_vertex>\n\n}\n`,c=`\n\n// Basic\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif\n\n${l.Z}\n\n${a.Z}\n\n\n#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif\n\n${o.Z}\n\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t// map\n\t${h.Z}\n\n\t${u.Z}\n\n\t#ifdef USE_ALPHATEST\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n\t#endif\n\n\t// output\n\tgl_FragColor = diffuseColor;\n\n\n\t#include <clipping_planes_fragment>\n}\n`;var _=r("./src/frame/utils/FrameMaterialUtils.js");class p extends s.jyz{static get mediation(){return _.Z.mediation}constructor(){super({uniforms:{alphaTest:{value:.02},map:{value:null},diffuse:{value:new s.Ilk(16777215)},opacity:{value:1},borderColor:{value:new s.Ilk(0)},borderOpacity:{value:0},borderRadius:{value:new s.Ltg(0,0,0,0)},cornerTL:{value:new s.FM8(0,1)},cornerTR:{value:new s.FM8(1,1)},cornerBR:{value:new s.FM8(1,0)},cornerBL:{value:new s.FM8(0,0)},borderWidth:{value:new s.Ltg(0,0,0,0)},frameSize:{value:new s.Pa4(1,1,1)},textureSize:{value:new s.FM8(1,1)}},side:s.Wl3,transparent:!0,clipping:!0,vertexShader:d,fragmentShader:c,extensions:{derivatives:!0}}),this.defines.USE_ALPHATEST="",this.needsUpdate=!0}set map(e){this.uniforms.map.value=e,e?void 0===this.defines.USE_UV&&(this.defines.USE_UV="",this.needsUpdate=!0):void 0!==this.defines.USE_UV&&(delete this.defines.USE_UV,this.needsUpdate=!0),this.needsUpdate=!0}get map(){return this.uniforms.map.value}get alphaTest(){return this.uniforms.alphaTest.value}set alphaTest(e){this.uniforms.alphaTest.value=e}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get opacity(){return this.uniforms.opacity.value}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}}},"./src/frame/renderers/ShaderChunk/frame-background.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n#ifdef USE_MAP\n\n\tvec4 textureSample = sampleTexture();\n\tdiffuseColor *= textureSample;\n\n#endif\n"},"./src/frame/renderers/ShaderChunk/frame-background.pars.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\n#ifdef USE_MAP\n\nvec4 sampleTexture() {\n\n\tvec2 uv = vUv;\n\n\t// default stretch\n\t#if BACKGROUND_MAPPING != 0\n\n\tfloat textureRatio = textureSize.x / textureSize.y;\n\tfloat panelRatio = frameSize.x / frameSize.y;\n\tfloat ratio = panelRatio / textureRatio;\n\tfloat ratio2 = textureRatio / panelRatio;\n\n\t\t// contain\n\t\t#if BACKGROUND_MAPPING == 1\n\t\tif ( textureRatio < panelRatio ) { // repeat on X\n\t\t\tfloat newX = uv.x * ratio;\n\t\t\tnewX += 0.5 - 0.5 * ratio;\n\t\t\tuv.x = newX;\n\t\t} else { // repeat on Y\n\t\t\tfloat newY = uv.y * ratio2;\n\t\t\tnewY += 0.5 - 0.5 * ratio2;\n\t\t\tuv.y = newY;\n\t\t}\n\t\t#else\n\t\t// cover\n\t\tif ( textureRatio < panelRatio ) { // stretch on Y\n\t\t\tfloat newY = uv.y * ratio2;\n\t\t\tnewY += 0.5 - 0.5 * ratio2;\n\t\t\tuv.y = newY;\n\t\t} else { // stretch on X\n\t\t\tfloat newX = uv.x * ratio;\n\t\t\tnewX += 0.5 - 0.5 * ratio;\n\t\t\tuv.x = newX;\n\t\t}\n\n\t\t#endif\n\n\t#endif\n\n\treturn texture2D( map, uv );\n\n}\n#endif\n"},"./src/frame/renderers/ShaderChunk/frame-border.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\nvec4 borderColor = vec4( borderColor, borderOpacity );\n\n// This could be tweak to produce more smoothing\nfloat mult = 1.0;\n\n// Step 1 ----------------------------------------------\n// Draw the four borders ( top - right - bottom - left )\n// Without worrying about radiuses ( Straight boorders )\n\n// Top\nfloat topBorderUVy = 1.0 - borderWidth.x;\nif( borderWidth.x > 0.0 && vUvB.y > topBorderUVy )\n{\n\n\tfloat w = fwidth( 1.0 - vUvB.y ) * mult;\n\tfloat step = smoothstep( topBorderUVy , topBorderUVy + w , vUvB.y );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n}\n\n// Left\nfloat leftBorderUVx = borderWidth.w;\nif( borderWidth.w > 0.0 && vUvB.x < leftBorderUVx )\n{\n\n\tfloat w = fwidth( vUvB.x ) * mult ;\n\tfloat step = smoothstep( leftBorderUVx , leftBorderUVx - w , vUvB.x );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n}\n\n// Bottom\nfloat bottomBorderUVy = borderWidth.z;\nif( borderWidth.z > 0.0 && vUvB.y < bottomBorderUVy )\n{\n\tfloat w = fwidth( vUvB.y ) * mult;\n\tfloat step = smoothstep( bottomBorderUVy , bottomBorderUVy - w , vUvB.y );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n}\n\n// Right\nfloat rightBorderUVx = 1.0 - borderWidth.y;\nif( borderWidth.y > 0.0 && vUvB.x > rightBorderUVx )\n{\n\tfloat w = fwidth( 1.0 - vUvB.x ) * mult;\n\tfloat step = smoothstep( rightBorderUVx , rightBorderUVx + w , vUvB.x );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n}\n\n\n// Step 2 ----------------------------------------------\n// Process each corners ( topLeft, topRight, bottomRight, bottomLeft )\n// To transparentize outside radiuses\n// To draw ellipse border on the corner\n\n\n// Top Left corner\nif( vUvB.x < cornerTL.x && vUvB.y > cornerTL.y ) {\n\n\t\t// Only draw border if width is set\n\t\tif( borderWidth.w + borderWidth.x > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerTL, cornerTL.x - borderWidth.w,  ( 1.0 - cornerTL.y ) - borderWidth.x );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\t\t// Then then radius\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerTL, cornerTL.x, 1.0 - cornerTL.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n// Bottom Left\nif( vUvB.x < cornerBL.x && vUvB.y < cornerBL.y ) {\n\n\t\tif( borderWidth.w + borderWidth.z > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerBL, cornerBL.x - borderWidth.w,  cornerBL.y - borderWidth.z );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerBL, cornerBL.x, cornerBL.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n// Top Right\nif( vUvB.x > cornerTR.x && vUvB.y > cornerTR.y ) {\n\n\t\tif( borderWidth.y + borderWidth.x > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerTR, ( 1.0 - cornerTR.x ) - borderWidth.y,  ( 1.0 - cornerTR.y ) - borderWidth.x );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerTR, 1.0 - cornerTR.x, 1.0 - cornerTR.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n// Bottom Right\nif( vUvB.x > cornerBR.x && vUvB.y < cornerBR.y ) {\n\n\t\tif( borderWidth.y + borderWidth.z > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerBR, ( 1.0 - cornerBR.x ) - borderWidth.y,  cornerBR.y - borderWidth.z );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerBR, 1.0 - cornerBR.x, cornerBR.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n\n"},"./src/frame/renderers/ShaderChunk/frame-border.pars.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\n// borders sequences are : x:TOP, y:RIGHT, z:BOTTOM, w:LEFT\nuniform vec4 borderWidth;\nuniform vec3 borderColor;\nuniform float borderOpacity;\nuniform vec4 borderRadius;\n\nuniform vec2 cornerTL;\nuniform vec2 cornerTR;\nuniform vec2 cornerBR;\nuniform vec2 cornerBL;\n\nvarying vec2 vUvB;\n\nfloat getEllipticFactor( vec2 uv, vec2 center, float radiusX, float radiusY )\n{\n\n\t\tfloat edx = uv.x - center.x;\n\t\tfloat edy = uv.y - center.y;\n\n\t\tfloat ddx = (edx * edx) / (radiusX * radiusX);\n\t\tfloat ddy = (edy * edy) / (radiusY * radiusY);\n\n\t\treturn ddx + ddy;\n\n}\n\n"},"./src/frame/renderers/ShaderChunk/frame-border.pars.vertex.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\n// FrameBorder vertex pars\nattribute vec2 uvB;\nvarying vec2 vUvB;\n\n"},"./src/frame/renderers/ShaderChunk/frame-border.vertex.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\n\t// FrameBorder vertex shader\n\tvUvB = uvB;\n\n"},"./src/frame/renderers/ShaderChunk/frame-common.pars.fragment.glsl.js":(e,t,r)=>{r.d(t,{Z:()=>s});const s="\n\n// To be removed - required for both border and background\nuniform vec3 frameSize;\nuniform vec2 textureSize;\n\n"},"./src/frame/utils/FrameMaterialUtils.js":(e,t,r)=>{r.d(t,{Z:()=>c});var s=r("./node_modules/three/build/three.module.js"),i=r("./src/utils/mediator/transformers/MaterialTransformers.js"),n=r("./src/frame/renderers/ShaderChunk/frame-border.pars.vertex.glsl.js"),o=r("./src/frame/renderers/ShaderChunk/frame-border.vertex.glsl.js"),a=r("./src/frame/renderers/ShaderChunk/frame-background.pars.fragment.glsl.js"),l=r("./src/frame/renderers/ShaderChunk/frame-border.pars.fragment.glsl.js"),h=r("./src/frame/renderers/ShaderChunk/frame-common.pars.fragment.glsl.js"),u=r("./src/frame/renderers/ShaderChunk/frame-background.fragment.glsl.js"),d=r("./src/frame/renderers/ShaderChunk/frame-border.fragment.glsl.js");class c{static get mediation(){return _}static ensureMaterialOptions(e){e.transparent=!0,e.alphaTest=e.alphaTest||.02}static ensureDefines(e){e.defines||(e.defines={})}static ensureUserData(e,t){e.userData.borderColor={value:null},e.userData.borderRadius={value:new s.Ltg(0,0,0,0)},e.userData.cornerTL={value:new s.FM8(0,1)},e.userData.cornerTR={value:new s.FM8(1,1)},e.userData.cornerBR={value:new s.FM8(1,0)},e.userData.cornerBL={value:new s.FM8(0,0)},e.userData.borderWidth={value:new s.Ltg(0,0,0,0)},e.userData.borderOpacity={value:null},e.userData.frameSize={value:new s.Pa4(1,1,1)},e.userData.textureSize={value:new s.FM8(1,1)}}static bindUniformsWithUserData(e,t){e.uniforms.borderColor=t.userData.borderColor,e.uniforms.borderRadius=t.userData.borderRadius,e.uniforms.cornerTL=t.userData.cornerTL,e.uniforms.cornerTR=t.userData.cornerTR,e.uniforms.cornerBR=t.userData.cornerBR,e.uniforms.cornerBL=t.userData.cornerBL,e.uniforms.borderWidth=t.userData.borderWidth,e.uniforms.borderOpacity=t.userData.borderOpacity,e.uniforms.frameSize=t.userData.frameSize,e.uniforms.textureSize=t.userData.textureSize}static injectShaderChunks(e){c.injectVertexShaderChunks(e),c.injectFragmentShaderChunks(e)}static injectVertexShaderChunks(e){e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","#include <uv_pars_vertex>\n"+n.Z),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n"+o.Z)}static injectFragmentShaderChunks(e){e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+a.Z),e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+l.Z),e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+h.Z),e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",u.Z),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>",d.Z+"\n#include <alphamap_fragment>")}}const _={clippingPlanes:{m:"clippingPlanes"},backgroundAlphaTest:{m:"alphaTest",t:i.Dr},backgroundSide:{m:"side"},backgroundImage:{m:"map"},backgroundColor:{m:"color"},backgroundOpacity:{m:"opacity"},backgroundSize:{m:"computedBackgroundSize",t:function(e,t,r){r=["stretch","contain","cover"].indexOf(r),(0,i.WJ)(e,"BACKGROUND_MAPPING",r)}},borderWidth:{m:"borderWidth",t:i.Uf},borderColor:{m:"borderColor",t:i.Uf},cornerTL:{m:"cornerTL",t:i.Uf},cornerTR:{m:"cornerTR",t:i.Uf},cornerBR:{m:"cornerBR",t:i.Uf},cornerBL:{m:"cornerBL",t:i.Uf},borderOpacity:{m:"borderOpacity",t:i.Uf},size:{m:"frameSize",t:i.Uf},tSize:{m:"textureSize",t:i.Uf}}},"./src/three-mesh-ui.js":(e,t,r)=>{r.d(t,{cg:()=>N,gO:()=>k.Z,wb:()=>w,zV:()=>i.Z,HS:()=>Y.Z,Ec:()=>K.Z,gF:()=>j.Z,ol:()=>G,pz:()=>b.Z,tx:()=>x.Z,FV:()=>S.Z,sV:()=>m,xv:()=>R.Z,mx:()=>v.Z,gE:()=>y.Z,ZP:()=>Q,Vx:()=>J});var s=r("./src/components/core/UpdateManager.js"),i=r("./src/font/FontLibrary.js"),n=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js"),o=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),a=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),l=r("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),h=r("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),u=r("./src/frame/renderers/ShaderChunk/frame-border.pars.vertex.glsl.js"),d=r("./src/frame/renderers/ShaderChunk/frame-border.vertex.glsl.js"),c=r("./src/frame/renderers/ShaderChunk/frame-border.pars.fragment.glsl.js"),_=r("./src/frame/renderers/ShaderChunk/frame-border.fragment.glsl.js"),p=r("./src/frame/renderers/ShaderChunk/frame-common.pars.fragment.glsl.js"),f=r("./src/frame/renderers/ShaderChunk/frame-background.pars.fragment.glsl.js"),g=r("./src/frame/renderers/ShaderChunk/frame-background.fragment.glsl.js");const m={msdfAlphaglyphParsVertexGlsl:l.Z,msdfAlphaglyphVertexGlsl:n.Z,msdfOffsetglyphVertexGlsl:h.Z,msdfAlphaglyphParsFragmentGlsl:a.Z,msdfAlphaglyphFragmentGlsl:o.Z,frameBorderParsVertexGlsl:u.Z,frameBorderVertexGlsl:d.Z,frameCommonParsFragmentGlsl:p.Z,frameBorderParsFragmentGlsl:c.Z,frameBorderFragmentGlsl:_.Z,frameBackgroundParsFragmentGlsl:f.Z,frameBackgroundFragmentGlsl:g.Z};if("ex__font_svg"==r.j)var v=r("./src/font/TypographicFont.js");if("ex__font_svg"==r.j)var y=r("./src/font/TypographicGlyph.js");if("ex__font_svg"==r.j)var b=r("./src/font/InlineGlyph.js");var x=r("./src/font/msdf/utils/MSDFFontMaterialUtils.js"),w=r("./src/core/DefaultValues.js"),S=r("./src/core/elements/MeshUIBaseElement.js"),k=r("./src/elements/basic/BlockElement.js"),R=r("./src/elements/basic/TextElement.js"),j=r("./src/elements/basic/InlineElement.js"),C=r("./src/core/properties/LineBreakProperty.js"),P=r("./src/core/properties/hierarchy/ChildrenInline.js"),U=r("./src/core/properties/style-properties/font/FontKerningProperty.js"),M=r("./src/core/properties/style-properties/background/BackgroundColorProperty.js"),I=r("./src/core/properties/InlineLayouter.js"),B=r("./src/core/elements/glyphs/Inline.js"),Z=r("./src/frame/materials/FrameMaterial.js"),F=r("./src/core/properties/BaseProperty.js");class V extends F.Z{constructor(){super("inlines",null,!1),this._value=[]}process(e){this._value[0].paddingLeft=e._padding._value.w,this._value[0].marginLeft=e._margin._value.w;const t=this._value.length-1;this._value[t].paddingRight=e._padding._value.y,this._value[t].marginRight=e._margin._value.y}}var W=r("./src/core/properties/style-properties/font/LetterSpacingPropertyInline.js"),T=r("./src/core/properties/style-properties/font/FontSizePropertyInline.js"),O=r("./src/frame/Frame.js");class z extends F.Z{constructor(){super("renderer")}render(e){e._backgroundMesh||e.setBackgroundMesh(new O.Z(e)),e._backgroundMesh.position.x=e._inlines._value[0].offsetX+e._inlines._value[0].width/2,e._backgroundMesh.position.y=e._inlines._value[0].offsetY+e._inlines._value[0].lineBase/2,e._bounds.render(e)}}var L=r("./node_modules/three/build/three.module.js");class D extends F.Z{constructor(){super("bounds",null,!1),this._size=new L.Pa4(1,1,1),this._offsetWidth=0,this._offsetHeight=0,this._innerWidth=0,this._innerHeight=0}update(e,t){this.output(t),this._needsProcess=!0}process(e){this._offsetWidth=this._innerWidth=e._inlines._value[0].width,this._offsetHeight=this._innerHeight=e._inlines._value[0].height,this._needsRender=!0,e._borderWidth._needsRender=!0,e._borderRadius._needsRender=!0}render(e){this._size.x=this._offsetWidth,this._size.y=this._offsetHeight}output(e){e.size=this._size}}var A=r("./src/core/properties/style-properties/font/WhiteSpacePropertyInline.js"),E=r("./src/core/properties/style-properties/font/FontFamilyPropertyInline.js"),H=r("./src/core/properties/style-properties/font/FontWeightPropertyInline.js"),$=r("./src/core/properties/style-properties/font/FontStylePropertyInline.js");class G extends S.Z{constructor(e={}){const t={};G.definePropertiesValues(t,e),super(t,e),G.init(this)}clear(){for(const e of this._inlines._value)e.clear();return super.clear()}bindBackgroundMeshProperties(){this._backgroundMesh.raycast=()=>{},this._bounds._size=this._backgroundMesh.scale,this._bounds._needsUpdate=!0}unbindBackgroundMeshProperties(){this._bounds._size=new L.Pa4(1,1,1),this._bounds._needsUpdate=!0}add(e){const t=[];for(let e=0;e<arguments.length;e++){const r=arguments[e];r.isUI?console.warn("ThreeMeshUI::InlineBlockElement cannot contains UI Elements.",r):(t.push(r),r.position.z=.005)}return super.add(...t)}static definePropertiesValues(e,t){e.children||(e.children=P.Z),e.bounds||(e.bounds=D),e.inlines||(e.inlines=V),e.layouter||(e.layouter=I.Z),e.renderer||(e.renderer=z),e.fontFamily||(e.fontFamily=E.Z),e.fontWeight||(e.fontWeight=H.Z),e.fontStyle||(e.fontStyle=$.Z),e.fontSize||(e.fontSize=T.Z),e.backgroundColor||(e.backgroundColor=M.Z),e.lineBreak||(e.lineBreak=C.Z),e.letterSpacing||(e.letterSpacing=W.Z),e.whiteSpace||(e.whiteSpace=A.Z),e.fontKerning||(e.fontKerning=U.Z),t.backgroundSize||(t.backgroundSize="cover"),t.width||(t.width="100%"),t.height||(t.height="100%"),t.boxSizing||(t.boxSizing="border-box")}static init(e){Object.defineProperties(e,{isInline:{configurable:!1,enumerable:!0,value:!0},isInlineBlock:{configurable:!1,enumerable:!0,value:!0}}),e._inlines._value=[new X(e)],e.backgroundMaterial=new Z.Z,e._renderer.render(e)}}class X extends B.Z{constructor(e){super(),this._uiElement=e}get xadvance(){const e=this._uiElement._padding._value,t=this._uiElement._width;return t._relative?t._value*this._uiElement._fontSize.getInheritedInput(this._uiElement):e.w+e.y+t.value}get width(){const e=this._uiElement._width;return e._relative?e._value*this._uiElement._fontSize.getInheritedInput(this._uiElement):e.value}get height(){const e=this._uiElement._height;return e._relative?e._value*this._uiElement._fontSize.getInheritedInput(this._uiElement):e.value}get anchor(){return this.height}get lineHeight(){const e=this._uiElement._height;return e._relative?e._value*this._uiElement._fontSize.getInheritedInput(this._uiElement):e.value}get lineBase(){const e=this._uiElement._height;return e._relative?e._value*this._uiElement._fontSize.getInheritedInput(this._uiElement):e.value}clear(){this._uiElement=null}}var K=r("./src/core/properties/InheritableProperty.js");class N{constructor(e){this._subject=e}attach(){console.error(`Behavior::attach() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}act(){throw new Error(`Behavior::act() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}detach(){console.error(`Behavior::detach() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}clear(){}}var Y=r("./src/font/FontVariant.js");const J=()=>s.Z.update(),q={BaseProperty:F.Z,Block:k.Z,Text:R.Z,Inline:j.Z,InlineBlock:G,MeshUIBaseElement:S.Z,FontLibrary:i.Z,update:J,MSDFFontMaterialUtils:x.Z,ShaderChunkUI:m,Behavior:N,FontVariant:Y.Z};void 0!==r.g&&(r.g.ThreeMeshUI=q);const Q=/^(ex__(baseline|frame_materials)|tut__(box_sizing|sprite))$/.test(r.j)?null:q},"./src/utils/NumberUtils.js":(e,t,r)=>{r.d(t,{G:()=>s});const s=function(e,t,r=6){return e.toFixed(r)===t.toFixed(r)}},"./src/utils/mediator/transformers/MaterialTransformers.js":(e,t,r)=>{r.d(t,{Dr:()=>s,Uf:()=>o,WJ:()=>n,nY:()=>i});const s=function(e,t,r){e.alphaTest=r,i(e,"USE_ALPHATEST",r>0)},i=function(e,t,r){e.defines&&(r?void 0===e.defines[t]&&(e.defines[t]="",e.needsUpdate=!0):void 0!==e.defines[t]&&(delete e.defines[t],e.needsUpdate=!0))},n=function(e,t,r){e.defines[t]&&e.defines[t]===r||(e.defines[t]=r,e.needsUpdate=!0)},o=function(e,t,r){e.userData[t]?e.userData[t].value=r:e.uniforms[t].value=r}}}]);