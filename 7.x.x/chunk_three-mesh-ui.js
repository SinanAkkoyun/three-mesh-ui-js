"use strict";(self.webpackChunkthree_mesh_ui=self.webpackChunkthree_mesh_ui||[]).push([["chunk_three-mesh-ui"],{"./src/components/core/Inline.js":(e,t,s)=>{s.d(t,{Z:()=>r});class r{constructor(){this._offsetX=0,this._offsetY=0,this._lineBreak=null,this._kerning=0,this._fontFactor=1,this._fontSize=0,this._cumulativeWidth=0,this._paddingLeft=0,this._paddingRight=0,this._marginLeft=0,this._marginRight=0}resetOffsets(){this._offsetX=this._offsetY=0,this._cumulativeWidth=0}get xadvance(){return 0}get xoffset(){return 0}get yoffset(){return 0}get width(){return 0}get height(){return 0}set lineBreak(e){this._lineBreak=e}get lineBreak(){return this._lineBreak}get anchor(){return 0}get kerning(){return this._kerning*this._fontFactor}set kerning(e){this._kerning=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get lineHeight(){return 0}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e}get cumulativeWidth(){return this._cumulativeWidth}set cumulativeWidth(e){this._cumulativeWidth=e}get marginLeft(){return this._marginLeft}set marginLeft(e){this._marginLeft=e}get marginRight(){return this._marginRight}set marginRight(e){this._marginRight=e}get paddingLeft(){return this._paddingLeft}set paddingLeft(e){this._paddingLeft=e}get paddingRight(){return this._paddingRight}set paddingRight(e){this._paddingRight=e}get lineBase(){return 0}set fontFactor(e){this._fontFactor=e}}},"./src/components/core/Line.js":(e,t,s)=>{s.d(t,{Z:()=>r});class r extends Array{constructor(...e){super(...e),this.width=0,this.lineBase=0,this.lineHeight=0,this.y=0}}},"./src/components/core/Lines.js":(e,t,s)=>{s.d(t,{Z:()=>r});s("./src/components/core/Line.js");class r extends Array{constructor(...e){super(...e),this.width=0,this.height=0}}},"./src/components/core/UpdateManager.js":(e,t,s)=>{s.d(t,{Z:()=>r});class r{static requestUpdate(e,t,s,r){e.traverse((e=>{e.isUI&&(this.requestedUpdates[e.id]?(t&&(this.requestedUpdates[e.id].updateParsing=!0),s&&(this.requestedUpdates[e.id].updateLayout=!0),r&&(this.requestedUpdates[e.id].updateInner=!0)):this.requestedUpdates[e.id]={updateParsing:t,updateLayout:s,updateInner:r,needCallback:t||s||r})}))}static register(e){this.components.includes(e)||this.components.push(e)}static register7xx(e){this.elements7xx.includes(e)||this.elements7xx.push(e)}static remove7xx(e){const t=this.elements7xx.indexOf(e);-1!==t&&this.elements7xx.splice(t,1)}static disposeOf(e){const t=this.components.indexOf(e);t>-1&&this.components.splice(t,1)}static update(){if(Object.keys(this.requestedUpdates).length>0){const e=this.components.filter((e=>!e.parentUI));e.forEach((e=>this.traverseParsing(e))),e.forEach((e=>this.traverseUpdates(e)))}}static update7xx(){for(const e of this.elements7xx)e.update(),e.process(),e.process(),e.render()}static traverseParsing(e){const t=this.requestedUpdates[e.id];t&&t.updateParsing&&(e.parseParams(),t.updateParsing=!1),e.childrenUIs.forEach((e=>this.traverseParsing(e)))}static traverseUpdates(e){const t=this.requestedUpdates[e.id];delete this.requestedUpdates[e.id],t&&t.updateLayout&&(t.updateLayout=!1,e.updateLayout()),t&&t.updateInner&&(t.updateInner=!1,e.updateInner()),e.childrenUIs.forEach((e=>{this.traverseUpdates(e)})),t&&t.needCallback&&e.performAfterUpdate()}}r.components=[],r.elements7xx=[],r.requestedUpdates={}},"./src/core/elements/MeshUIBaseElement.js":(e,t,s)=>{s.d(t,{Z:()=>fe});var r=s("./node_modules/three/build/three.module.js");const i=function(e,t,s){e[t]=s},n=function(e,t,s){null!==s&&(e[t]=s)};class a{constructor(e){this._definition=e}set definition(e){this._definition=e}mediate(e,t,s,r=null){for(const e in this._definition){const n=this._definition[e];if(void 0!==s[e]){const a=n.t?n.t:i;a(t,n.m,s[e]),r&&a(r,n.m,s[e])}}}static mediate(e,t,s,r,n=null){if(t)for(const e in r){const a=r[e];if(void 0!==s[e]){const r=a.t?a.t:i;r(t,a.m,s[e]),n&&r(n,a.m,s[e])}}}}var o=s("./src/core/properties/BaseProperty.js");class h extends o.Z{constructor(){super("parent",null,!1)}update(e,t){e.parent&&e.parent.isUI?this._value=e.parent:this._value=null}set value(e){console.warn("ParentProperty is readonly")}get value(){return this._value}find(e){return this._value?e(this._value)?this._value:this._value._parent.find(e):null}dispose(){this._value=null}}var l=s("./src/utils/NumberUtils.js");class c extends o.Z{constructor(e,t){super(e,t,!0),this.output=this._outputValue}set value(e){this.isValid(e)&&((0,l.G)(this._value,e)||(this._value=e,this._needsUpdate=!0))}get value(){return this._value}}class u extends o.Z{constructor(e,t=null,s=!0){super(e,t,s),this.output=this._outputValue,this._notInheritedValue=null}update(e,t){this._notInheritedValue=this._value,"inherit"===this._notInheritedValue?this._notInheritedValue=this.getInheritedInput(e):this.propagate(e),this._outputValue(t)}propagate(e){for(const t of e._children._uis){"inherit"===t[`_${this._id}`]._value&&(t[`_${this._id}`]._needsUpdate=!0)}}_outputValue(e){e[this._id]=this._notInheritedValue}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return"inherit"===this._value?this._notInheritedValue:this._value}}class d extends u{constructor(e){super(e,"inherit",!0),this.isValid=_}}const p=[r.Wl3,r._Li,r.ehD];function _(e){return-1!==p.indexOf(e)||(console.warn(`SideProperty value '${e}' is not valid. Abort`),!1)}var f=s("./src/components/core/UpdateManager.js"),w=s("./src/font/FontVariant.js");class g extends o.Z{constructor(e=null){super("font",e,!1),this._needsUpdate=!1,this._fontVariant=null,this._handleFontReadyClosure=null,this.isValid=m}output(e){e[this._id]=this._fontVariant}update(e,t){if(this._fontVariant&&!this._fontVariant.isReady&&this._fontVariant.removeEventListener("ready",this._handleFontReadyClosure),this._value&&this._value instanceof w.Z)this._fontVariant=this._value;else{const t=e._fontFamily._value;t&&(this._fontVariant=t.getVariant(e._fontWeight._value,e._fontStyle._value))}this._fontVariant&&(this._handleFontReadyClosure=function(e,t){return function(){t._needsUpdate=!0,e._glyphs._needsProcess=!0,t._fontVariant.removeEventListener("ready",t._handleFontReadyClosure),t._handleFontReadyClosure=null}}(e,this),this._fontVariant.isReady?this._handleFontReadyClosure():this._fontVariant.addEventListener("ready",this._handleFontReadyClosure),e._fontMaterial._defaultMaterial&&e._fontMaterial._defaultMaterial instanceof this._fontVariant.fontMaterial||(e._fontMaterial._defaultMaterial=new this._fontVariant.fontMaterial,e._fontMaterial._needsUpdate=!0))}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return this._value}get fontVariant(){return this._fontVariant}dispose(){this._handleFontReadyClosure&&(this._fontVariant.removeEventListener("ready",this._handleFontReadyClosure),this._handleFontReadyClosure=null),this._value=null,this._fontVariant=null}}function m(e){return e instanceof w.Z||(console.warn(`.font value '${e}' is not valid. It requires a FontVariant instance. Aborted`),!1)}var v=s("./src/core/properties/style-properties/SubStyleProperty.js");class C extends v.Z{constructor(e,t){super(e,t,!1),this._input=0,this._value=new r.Ltg(0,0,0,0)}get value(){return this._value}computeOutputValue(e){this._vector4ValueSetter(this._value,this._input)}set top(e){this._inline.x!==e&&(this._inline.x=e,this._needsUpdate=!0)}get top(){return this._inline.x}set right(e){this._inline.y!==e&&(this._inline.y=e,this._needsUpdate=!0)}get right(){return this._inline.y}set bottom(e){this._inline.z!==e&&(this._inline.z=e,this._needsUpdate=!0)}get bottom(){return this._inline.z}set left(e){this._inline.w!==e&&(this._inline.w=e,this._needsUpdate=!0)}get left(){return this._inline.w}dispose(){this._computed=null,this._inline=null,this._input=null,this._output=null}_vector4ValueSetter(e,t){if(t instanceof r.Ltg)e.copy(t);else{if(("string"==typeof t||t instanceof String)&&(t=t.split(" ")),Array.isArray(t))switch((t=t.map((e=>parseFloat(e)))).length){case 1:return void e.setScalar(t[0]);case 2:return e.x=e.z=t[0],void(e.y=e.w=t[1]);case 3:return e.x=t[0],e.y=t[1],void(e.z=t[2]);case 4:return e.x=t[0],e.y=t[1],e.z=t[2],void(e.w=t[3]);default:return void console.error("StyleVector4Property::set() Four Dimension property had more than four values")}isNaN(t)||e.setScalar(t)}}}class y extends v.Z{constructor(e){super("display",e),this._value="flex",this._allowsInherit=!1,this._needsUpdate=!1,this.isValidValue=x}computeOutputValue(e){e._visible._value="none"!==this._output}}const b=["none","flex"];function x(e){return-1!==b.indexOf(e)||(console.warn(`(.style) display value '${e}' is not valid. Aborted`),!1)}class S extends v.Z{constructor(e){super("boxSizing",e),this._allowsInherit=!1,this.isValidValue=U}computeOutputValue(e){this._value=this._inheritedInput,e._bounds._needsUpdate=!0}}const k=["border-box","content-box"];function U(e){return-1!==k.indexOf(e)||(console.warn(`(.style) boxSizing value '${e}' is not valid. Aborted`),!1)}var I=s("./src/core/properties/style-properties/StyleColorProperty.js");class M extends v.Z{constructor(e,t){super(e,t,!0),this.isValidValue=R,this._input=this.getDefaultValue(),this._value=this.getDefaultValue(),this.output=this._outputValue}}function R(e){return!(e<0&&e>1)||(console.warn(`(.style) styleFactorProperty('${this.id}') value '${e}' is not valid)`),!1)}class j extends v.Z{constructor(e){super("backgroundImage",e,!0),this._allowsInherit=!1,this._textureSize=new r.FM8(1,1),this.isValidValue=P}get value(){return this._value}output(e){e[this._id]=this._value,e.tSize=this._textureSize}computeOutputValue(e){this._value=this._inheritedInput,this._value instanceof r.xEZ&&!this._value.image?console.warn("(.style) backgroundImage. The provided texture is not loaded. Therefore its ratio won't be computed, and it could cause inconsistent result. Please load the texture before, or feed with url()"):this._needsProcess=!0}process(e){this._value?this._textureSize.set(this._value.image.width,this._value.image.height):this._textureSize.set(1,1)}}function P(e){return!0}class F extends v.Z{constructor(e){super("backgroundSize",e,!0),this.isValidValue=B,this.output=this._outputValue}}const V=["cover","contain","stretch"];function B(e){return-1!==V.indexOf(e)||(console.warn(`(.style) backgroundSize value '${e}' is not valid. Aborted`),!1)}class T extends v.Z{constructor(e){super("overflow",e,!0),this.isValidValue=O}}const Z=["visible","hidden"];function O(e){return-1!==Z.indexOf(e)||(console.warn(`(.style) overflow value '${e}' is not valid. Aborted`),!1)}var A=s("./src/utils/Units.js");class W extends C{constructor(e){super("borderRadius",e),this._valueUV=this._value.clone(),this._mediation=!0,this._cornerTL=new r.FM8(0,1),this._cornerTR=new r.FM8(1,1),this._cornerBR=new r.FM8(1,0),this._cornerBL=new r.FM8(0,0);const t=new D(this._valueUV,["x","y"]),s=new D(this._valueUV,["z","w"]),i=new D(this._valueUV,["x","w"]),n=new D(this._valueUV,["y","z"]);t.complementaryMediation=s,s.complementaryMediation=t,i.complementaryMediation=n,n.complementaryMediation=i,this._sideMediators=[t,s,i,n],this._units=A.yt}set units(e){this._units=A.rP(e),this._needsProcess=!0}get units(){return this._units}set mediation(e){e!==this._mediation&&(this._mediation=e,this._needsUpdate=!0)}get mediation(){return this._mediation}output(e){e.cornerTL=this._cornerTL,e.cornerTR=this._cornerTR,e.cornerBR=this._cornerBR,e.cornerBL=this._cornerBL}computeOutputValue(e){this._vector4ValueSetter(this._value,this._input),this._needsProcess=!0}process(e){this._needsRender=!0}render(e){this._valueUV.copy(this._value);const t=e._bounds._offsetWidth,s=e._bounds._offsetHeight;if(this._units===A.JH&&this._valueUV.divideScalar(100),this._units===A.yt&&this._valueUV.divideScalar(Math.min(t,s)),this._mediation)do{this._sideMediators.forEach((e=>e.computeValue())),this._sideMediators.sort(((e,t)=>e.value<t.value?1:-1)),this._sideMediators[0].value>1&&this._sideMediators[0].mediate()}while(this._sideMediators[0].value>1);let r=t>s?s/t:1,i=t<s?t/s:1;this._units===A.JH&&(r=i=1),this._cornerTL.x=this._valueUV.x*r,this._cornerTL.y=1-this._valueUV.x*i,this._cornerTR.x=1-this._valueUV.y*r,this._cornerTR.y=1-this._valueUV.y*i,this._cornerBR.x=1-this._valueUV.z*r,this._cornerBR.y=this._valueUV.z*i,this._cornerBL.x=this._valueUV.w*r,this._cornerBL.y=this._valueUV.w*i}dispose(){for(const e of this._sideMediators)e.dispose();this._sideMediators=null,this._cornerTL=null,this._cornerTR=null,this._cornerBR=null,this._cornerBL=null,super.dispose()}set topLeft(e){this._inline.x!==e&&(this._inline.x=e,this._needsUpdate=!0)}get topLeft(){return this._inline.x}set topRight(e){this._inline.y!==e&&(this._inline.y=e,this._needsUpdate=!0)}get topRight(){return this._inline.y}set bottomRight(e){this._inline.z!==e&&(this._inline.z=e,this._needsUpdate=!0)}get bottomRight(){return this._inline.z}set bottomLeft(e){this._inline.w!==e&&(this._inline.w=e,this._needsUpdate=!0)}get bottomLeft(){return this._inline.w}set top(e){this._inline.x===e&&this._inline.y===e||(this._inline.x=this._inline.y=e,this._needsUpdate=!0)}get top(){return(this._inline.x+this._inline.y)/2}set right(e){this._inline.y===e&&this._inline.z===e||(this._inline.y=this._inline.z=e,this._needsUpdate=!0)}get right(){return(this._inline.y+this._inline.z)/2}set bottom(e){this._inline.z===e&&this._inline.w===e||(this._inline.z=this._inline.w=e,this._needsUpdate=!0)}get bottom(){return(this._inline.z+this._inline.w)/2}set left(e){this._inline.w===e&&this._inline.x===e||(this._inline.w=this._inline.x=e,this._needsUpdate=!0)}get left(){return(this._inline.w+this._inline.x)/2}}class D{constructor(e,t){this._borderRadiuses=e,this._sideProperties=t,this._complementaryMediation=null,this._value=0}get value(){return this._value}set complementaryMediation(e){this._complementaryMediation=e}computeValue(){let e=0;for(const t of this._sideProperties)e+=this._borderRadiuses[t];this._value=e}mediate(e=!0){if(!(this._value<1)){for(const e of this._sideProperties)this._borderRadiuses[e]/=this._value;e&&this._complementaryMediation.mediate(!1)}}dispose(){this._complementaryMediation=null,this._borderRadiuses=null}}class z extends C{constructor(e){super("borderWidth",e,!1),this._valueUV=this._value.clone(),this.output=this._outputValue,this._units=A.yt}set units(e){this._units=A.rP(e),this._needsUpdate=!0}get units(){return this._units}computeOutputValue(e){this._vector4ValueSetter(this._value,this._input),this._needsProcess=!0,e._bounds._needsUpdate=!0,e._layouter._needsUpdate=!0}_outputValue(e){e[this._id]=this._valueUV}process(e){this._needsRender=!0,e._borderRadius._needsRender=!0}render(e){this._valueUV.copy(this._value);const t=e._bounds._offsetWidth,s=e._bounds._offsetHeight;if(this._units===A.JH&&this._valueUV,this._units===A.yt)0!==t&&(this._valueUV.w/=t,this._valueUV.y/=t),0!==s&&(this._valueUV.x/=s,this._valueUV.z/=s);else if(this._units===A.UV){if(0!==t){const e=t>s?s/t:1;this._valueUV.y*=e,this._valueUV.w*=e}if(0!==s){const e=t<s?t/s:1;this._valueUV.x*=e,this._valueUV.z*=e}}}}class E extends o.Z{constructor(e,t=!0){super("visible",t,!0)}update(e,t){e.visible=this._value,e._parent._value&&(e._parent._value._children._needsUpdate=!0)}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return this._value}}var L=s("./src/core/properties/style-properties/background/BackgroundColorProperty.js"),H=s("./src/core/properties/EmptyProperty.js");class $ extends o.Z{constructor(){super("inlineJustificator",null,!1),this._value=null}update(e,t){}process(e){const t=e._bounds._innerHeight,s=e._layouter._value,r=Math.abs(s.height);let i=(()=>{switch(e._alignItems._value){case"inherit":case"start":return.5*t-s[0].lineHeight+s[0].y;case"end":return r-s[0].lineHeight+s[0].y-t/2;case"stretch":case"center":return r/2-s[0].lineHeight+s[0].y}})();const n=e._padding._value,a=e._borderWidth._value;i+=(-n.x+n.z)/2+(-a.x+a.z)/2,s.forEach((e=>{e.y+=i,e.forEach((e=>{e.offsetY+=i}))}))}}var N=s("./src/core/properties/style-properties/flex/AlignItemsProperty.js"),G=s("./src/core/properties/style-properties/font/TextAlignProperty.js"),X=s("./src/core/properties/style-properties/flex/FlexDirectionProperty.js"),K=s("./src/core/properties/style-properties/flex/JustifyContentProperty.js");class q extends v.Z{constructor(){super("order",0,!0),this._allowsInherit=!1}computeOutputValue(e){this._value=this._inheritedInput,this._needsProcess=!0}process(e){e._parent._value&&(e._parent._value._children._needsProcess=!0)}}var Y=s("./src/core/properties/style-properties/PositionProperty.js");class J extends v.Z{constructor(e,t=null){super(e,t,!0),this._input="auto",this._auto=!0,this._relative=!1,this._updateRequired=!0}set inline(e){this.isValidValue(e)&&e!==this._inline&&(this._inline=e,this._input!==this._inline&&this._parseInput())}get inline(){return this._inline}_parseInput(){let e=!0;if(void 0!==this._inline&&"unset"!==this._inline?this._input=this._inline:void 0!==this._computed?(this._computed===this._input&&(e=!1),this._input=this._computed):e="inherit"===this._input,e){if(this._auto=!this._input||"auto"===this._input,!this._auto)if(("string"==typeof this._input||this._input instanceof String)&&this._input.endsWith("%")){this._relative=!0,this._value=0;const e=parseFloat(this._input.replace("%","").trim());isNaN(e)||(this._value=e/100)}else this._relative=!1,this._value=this._input;this._needsUpdate=this._updateRequired=e}}update(e,t){if(this._updateRequired){this._updateRequired=!1,this._allowsInherit||(this._inheritedInput=this.getInheritedInput(e)),this.computeOutputValue(e);for(const t of e._children._uis)t[`_${this._id}`]._needsUpdate=!0;this.output(t),e._parent._value&&(e._parent._value._layouter._needsProcess=!0)}}computeOutputValue(e){e._bounds._needsUpdate=!0,e._renderer._needsRender=!0}getInheritedInput(e){if("inherit"!==this._input&&!this._auto)return this._input;const t=e._parent._value;return t?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}getDefaultValue(){return 0}get value(){return this._value}}class Q extends J{constructor(){super("width")}}class ee extends J{constructor(){super("height")}computeOutputValue(e){super.computeOutputValue(e)}}var te=s("./src/core/properties/TextContentEmpty.js"),se=s("./src/core/properties/style-properties/font/FontStyleProperty.js"),re=s("./src/core/properties/style-properties/font/FontWeightProperty.js"),ie=s("./src/core/properties/style-properties/font/FontFamilyProperty.js"),ne=s("./src/core/properties/style-properties/font/LineHeightProperty.js"),ae=s("./src/core/properties/style-properties/font/WhiteSpaceProperty.js"),oe=s("./src/core/properties/style-properties/font/LetterSpacingProperty.js");class he extends v.Z{constructor(){super("fontSize","inherit",!0)}}var le=s("./src/font/FontLibrary.js"),ce=s("./src/core/properties/geometry/SegmentsProperty.js");class ue extends u{constructor(){super("invertAlpha","inherit")}}var de=s("./src/core/properties/style-properties/font/FontKerningProperty.js");class pe extends u{constructor(e){super(e,"inherit",!0)}}class _e extends u{constructor(e){super(e,"inherit",!1),this._mediation={},this._defaultMaterial=null}update(e,t){this._notInheritedValue=this._value,"inherit"===this._notInheritedValue?this._notInheritedValue=this.getInheritedInput(e):this.propagate(e),this._notInheritedValue?this._mediation={...this._notInheritedValue.constructor.mediation}:this._mediation={},this._outputValue(t)}getInheritedInput(e){if("inherit"!==this._value)return this._value;let t=e,s=null;for(;t._parent._value;)if(t=t._parent._value,"inherit"!==t[`_${this._id}`]._value){s=t[`_${this._id}`]._value;break}return null!==s?s:this.getDefaultValue()}getDefaultValue(){return this._defaultMaterial}}class fe extends r.Tme{constructor(e=null,t=null){super(),Object.defineProperties(this,{isUI:{configurable:!1,enumerable:!0,value:!0}}),this._backgroundMesh=null,this._backgroundMaterial=null,this._backgroundCustomDepthMaterial=null,this._backgroundMaterialMediation={},this._backgroundMeshMediation={backgroundCastShadow:{m:"castShadow"},backgroundReceiveShadow:{m:"receiveShadow"},renderOrder:{m:"renderOrder"}},this._fontMesh=null,this._fontMaterial=new _e("fontMaterial"),this._fontCustomDepthMaterial=new _e("fontCustomDepthMaterial"),this._fontMeshMediation={fontMaterial:{m:"material"},fontCustomDepthMaterial:{m:"customDepthMaterial",t:n},fontCastShadow:{m:"castShadow"},fontReceiveShadow:{m:"receiveShadow"},renderOrder:{m:"renderOrder"}},this._children=e.children?new e.children:new H.Z("children"),this._parent=new h,this.addEventListener("added",this._rebuildParentUI),this.addEventListener("removed",this._rebuildParentUI),this._backgroundSide=new d("backgroundSide"),this._fontSide=new d("fontSide"),this._backgroundAlphaTest=new c("backgroundAlphaTest",.02),this._fontAlphaTest=new c("fontAlphaTest",.02),this._visible=new E("visible",!0),this._backgroundCastShadow=new pe("backgroundCastShadow"),this._fontCastShadow=new pe("fontCastShadow"),this._backgroundReceiveShadow=new pe("backgroundReceiveShadow"),this._fontReceiveShadow=new pe("fontReceiveShadow"),this._renderOrder=new c("renderOrder",0),this._segments=e.segments?new e.segments:new ce.Z,this._bounds=e.bounds?new e.bounds:new H.Z("bounds"),this._order=new q(0),this._padding=new C("padding",new r.Ltg(0,0,0,0)),this._margin=new C("margin",new r.Ltg(0,0,0,0)),this._position=new Y.Z,this._flexDirection=e.flexDirection?new e.flexDirection:new X.Z,this._justifyContent=e.justifyContent?new e.justifyContent:new K.Z,this._alignItems=e.alignItems?new e.alignItems:new N.Z,this._display=new y("flex"),this._boxSizing=new S("border-box"),this._width=new Q,this._height=new ee,this._backgroundColor=e.backgroundColor?new e.backgroundColor:new L.Z,this._backgroundOpacity=new M("backgroundOpacity",1),this._backgroundImage=new j,this._backgroundSize=new F("cover"),this._color=e.color?new e.color:new I.Z("color","inherit"),this._opacity=new M("opacity",1),this._whiteSpace=e.whiteSpace?new e.whiteSpace:new ae.Z,this._fontFamily=e.fontFamily?new e.fontFamily:new ie.Z,this._fontStyle=e.fontStyle?new e.fontStyle:new se.Z("normal"),this._fontWeight=e.fontWeight?new e.fontWeight:new re.Z,this._fontSize=e.fontSize?new e.fontSize:new he,this._lineHeight=e.lineHeight?new e.lineHeight:new ne.Z,this._fontKerning=e.fontKerning?new e.fontKerning:new de.Z,this._letterSpacing=e.letterSpacing?new e.letterSpacing:new oe.Z,this._overflow=new T("visible"),this._borderRadius=new W(0),this._borderWidth=new z(0),this._borderColor=new I.Z("borderColor",16711935),this._borderOpacity=new M("borderOpacity",1),this._font=new g,this._lineBreak=e.lineBreak?new e.lineBreak:new H.Z("lineBreak"),this._textContent=e.textContent?new e.textContent:new te.Z,this._glyphs=e.glyphs?new e.glyphs:new H.Z("glyphs"),this._inlines=e.inlines?new e.inlines:new H.Z("inlines"),this._layouter=e.layouter?new e.layouter:new H.Z("layouter"),this._inlineJustificator=new $,this._textAlign=e.textAlign?new e.textAlign:new G.Z,this._autoSize=e.autoSize?new e.autoSize:new H.Z("autoSize"),this._renderer=e.renderer?new e.renderer:new H.Z("renderer"),this._invertAlpha=new ue,this._components=[this._children,this._parent,this._fontFamily,this._fontStyle,this._fontWeight,this._font,this._whiteSpace,this._textContent,this._glyphs,this._inlines,this._visible,this._backgroundSide,this._fontSide,this._backgroundAlphaTest,this._fontAlphaTest,this._backgroundCastShadow,this._fontCastShadow,this._backgroundReceiveShadow,this._fontReceiveShadow,this._renderOrder,this._segments,this._padding,this._margin,this._width,this._height,this._borderWidth,this._boxSizing,this._bounds,this._position,this._flexDirection,this._justifyContent,this._alignItems,this._display,this._backgroundColor,this._backgroundOpacity,this._backgroundImage,this._backgroundSize,this._opacity,this._color,this._fontSize,this._lineHeight,this._fontKerning,this._letterSpacing,this._overflow,this._borderRadius,this._borderColor,this._borderOpacity,this._lineBreak,this._layouter,this._inlineJustificator,this._textAlign,this._autoSize,this._invertAlpha,this._fontMaterial,this._fontCustomDepthMaterial,this._renderer],this._onAfterUpdates=[],t.backgroundSide||(t.backgroundSide=0),t&&this.set(t)}update(){const e={};for(const t of this._components)t._needsUpdate&&(t.update(this,e),t._needsUpdate=!1);this._transferToBackgroundMesh(e),this._transferToFontMesh(e),this._transferToBackgroundMaterial(e),this._transferToFontMaterial(e);for(const e of this._children._uis)e.update()}process(){for(const e of this._children._uis)e.process();for(const e of this._components)e._needsProcess&&(e.process(this),e._needsProcess=!1)}render(){for(let e=0;e<this._components.length;e++){const t=this._components[e];t._needsRender&&(t.render(this),t._needsRender=!1)}for(const e of this._children._uis)e.render()}set(e){if(e.fontTexture&&(console.warn("ThreeMeshUI::set( {fontTexture} ) is deprecated. Please use fontLibrary to register font families and variants."),e.fontFamily)){const t=e.fontFamily.pages?e.fontFamily.info.face:e.fontFamily;let s=le.Z.getFontFamily(t);if(!s){const r=e.fontStyle?e.fontStyle:"normal",i=e.fontWeight?e.fontWeight:"400";s=le.Z.addFontFamily(t).addVariant(i,r,e.fontFamily,e.fontTexture)}e.fontFamily=s,delete e.fontTexture}for(let t of Object.keys(e)){const s=e[t];switch(t){case"contentDirection":console.warn("ThreeMeshUI v7xx: property `contentDirection` is deprecated and has been renamed as `flexDirection`"),t="flexDirection";break;case"interLine":console.warn("ThreeMeshUI v7xx: property `interLine` is deprecated and has been renamed as `lineHeight`"),t="lineHeight";break;case"content":console.warn("ThreeMeshUI v7xx: property `content` is deprecated and has been renamed as `textContent`"),t="textContent";break;case"fontColor":console.warn("ThreeMeshUI v7xx: property `fontColor` is deprecated and has been renamed as `color`"),t="color";break;case"hiddenOverflow":console.warn("ThreeMeshUI v7xx: property `hiddenOverflow` is deprecated and has been renamed as `overflow`"),t="overflow";break;case"backgroundTexture":console.warn("ThreeMeshUI v7xx: property `backgroundTexture` is deprecated and has been renamed as `backgroundImage`"),t="backgroundImage";break;case"alignContent":console.warn("ThreeMeshUI v7xx: property `alignContent` is deprecated and has been renamed as `alignItems`"),t="alignItems"}switch(t){case"segments":case"visible":case"fontSide":case"backgroundSide":case"fontCastShadow":case"backgroundCastShadow":case"fontReceiveShadow":case"backgroundReceiveShadow":case"fontMaterial":case"fontCustomDepthMaterial":this[`_${t}`].value=s;break;case"offset":this[t]=s,this.position.z=s;break;case"fontSupersampling":break;case"flexDirection":case"justifyContent":case"alignItems":case"color":case"fontFamily":case"fontOpacity":case"fontKerning":case"fontSize":case"fontStyle":case"fontWeight":case"textAlign":case"letterSpacing":case"lineHeight":case"whiteSpace":case"breakOn":case"width":case"height":case"padding":case"margin":case"backgroundColor":case"backgroundOpacity":case"backgroundImage":case"backgroundSize":case"borderColor":case"borderOpacity":case"borderRadius":case"borderWidth":case"overflow":case"boxSizing":this[`_${t}`]&&(this[`_${t}`].inline=s);break;case"side":case"castShadow":case"receiveShadow":const e=t.charAt(0).toUpperCase()+t.substr(1);this[`_background${e}`].value=s,this[`_font${e}`].value=s;break;default:this[t]=s}}}get(e){switch(e){case"width":case"height":return this[`_${e}`].inline}}_rebuildChildrenLists(){this._children._needsUpdate=!0}_rebuildParentUI=()=>{this._parent._needsUpdate=!0,this.parent&&!this.parent.isUI?f.Z.register7xx(this):f.Z.remove7xx(this)};add(e){let t=!1;for(let e=0;e<arguments.length;e++)super.add(arguments[e]),arguments[e].isUI&&(t=!0);return t&&this._rebuildChildrenLists(),this}remove(e){for(const e of Object.keys(arguments))arguments[e].isInline&&this.update(null,!0);return super.remove(...arguments),this._rebuildChildrenLists(),this}clear(){return this.traverse((e=>{f.Z.disposeOf(e),e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()})),super.clear(),this._backgroundMesh=null,this._backgroundMaterial=null,this._backgroundMaterialMediation=null,this._backgroundMeshMediation=null,this._children.dispose(),this._children=null,this._parent.dispose(),this._parent=null,this._backgroundSide=null,this._backgroundAlphaTest=null,this._visible=null,this._backgroundCastShadow=null,this._backgroundReceiveShadow=null,this._renderOrder=null,this._segments=null,this._bounds=null,this._boxSizing=null,this._padding=null,this._margin=null,this._position=null,this._flexDirection=null,this._justifyContent=null,this._alignItems=null,this._display=null,this._backgroundColor=null,this._backgroundOpacity=null,this._backgroundSize=null,this._opacity=null,this._color=null,this._whiteSpace=null,this._fontFamily=null,this._fontStyle=null,this._fontWeight=null,this._lineHeight=null,this._fontKerning=null,this._letterSpacing=null,this._overflow=null,this._textAlign=null,this._font=null,this._lineBreak=null,this._layouter=null,this}get textContent(){return this._textContent.process(this),this._textContent._value}get backgroundMaterial(){return this._backgroundMaterial}set backgroundMaterial(e){this._backgroundMaterial=e,this._backgroundMaterialMediation={...e.constructor.mediation},this._transferToBackgroundMaterial(),this._backgroundMesh&&(this._backgroundMesh.material=this._backgroundMaterial)}set backgroundCustomDepthMaterial(e){this._backgroundCustomDepthMaterial=e,this._transferToBackgroundMaterial(),this._backgroundMesh&&(this._backgroundMesh.customDepthMaterial=this._backgroundCustomDepthMaterial)}get backgroundCustomDepthMaterial(){return this._backgroundCustomDepthMaterial}_transferToBackgroundMaterial(e=null){if(!e){e={};for(const t of this._components)t.output(e)}a.mediate(this,this._backgroundMaterial,e,this._backgroundMaterialMediation,this._backgroundCustomDepthMaterial)}set backgroundSide(e){this._backgroundSide.value=e,this._backgroundMaterial&&(this._backgroundMaterial.side=e)}get backgroundSide(){return this._backgroundSide.value}set backgroundAlphaTest(e){this._backgroundAlphaTest.value=e,this._backgroundMaterial&&(this._backgroundMaterial.alphaTest=e)}get backgroundAlphaTest(){return this._backgroundAlphaTest.value}get fontMaterial(){return this._fontMaterial.value}set fontMaterial(e){this._fontMaterial.value=e}set fontCustomDepthMaterial(e){this._fontCustomDepthMaterial.value=e}get fontCustomDepthMaterial(){return this._fontCustomDepthMaterial.value}_transferToFontMaterial(e=null){const t=this._fontMaterial.value;if(t){if(!e){e={};for(const t of this._components)t.output(e)}a.mediate(this,t,e,this._fontMaterial._mediation,this._fontCustomDepthMaterial.value)}}set fontSide(e){this._fontSide.value=e}get fontSide(){return this._fontSide.value}set fontAlphaTest(e){this._fontAlphaTest.value=e}get fontAlphaTest(){return this._fontAlphaTest.value}_transferToBackgroundMesh(e=null){if(!e){e={};for(const t of this._components)t.output(e)}a.mediate(this,this._backgroundMesh,e,this._backgroundMeshMediation)}setBackgroundMesh(e){this._backgroundMesh&&(this.remove(this._backgroundMesh),this.unbindBackgroundMeshProperties()),this._backgroundMesh=e,this._backgroundMesh&&(this.bindBackgroundMeshProperties(),this._backgroundCustomDepthMaterial&&(this._backgroundMesh.customDepthMaterial=this._backgroundCustomDepthMaterial),this._transferToBackgroundMesh(),this.add(this._backgroundMesh))}bindBackgroundMeshProperties(){}unbindBackgroundMeshProperties(){}set backgroundCastShadow(e){this._backgroundCastShadow&&(this._backgroundCastShadow.value=e)}get backgroundCastShadow(){return this._backgroundCastShadow}set backgroundReceiveShadow(e){this._backgroundReceiveShadow&&(this._backgroundReceiveShadow.value=e)}get backgroundReceiveShadow(){return this._backgroundReceiveShadow}set renderOrder(e){this._renderOrder&&(this._renderOrder.value=e)}get renderOrder(){return this._renderOrder.value}_transferToFontMesh(e=null){if(this._fontMesh){if(!e){e={};for(const t of this._components)t.output(e)}a.mediate(this,this._fontMesh,e,this._fontMeshMediation)}}setFontMesh(e){this._fontMesh&&(this.remove(this._fontMesh),this._fontMesh.material&&this._fontMesh.material.dispose(),this._fontMesh.geometry&&this._fontMesh.geometry.dispose(),this._fontMesh=null,this.unbindFontMeshProperties()),this._fontMesh=e,this._fontMesh&&(this.bindFontMeshProperties(),this._transferToFontMaterial(),this._transferToFontMesh(),this.add(this._fontMesh))}bindFontMeshProperties(){}unbindFontMeshProperties(){}set fontCastShadow(e){this._fontCastShadow&&(this._fontCastShadow.value=e)}get fontCastShadow(){return this._fontCastShadow}set fontReceiveShadow(e){this._fontReceiveShadow&&(this._fontReceiveShadow.value=e)}get fontReceiveShadow(){return this._fontReceiveShadow}set segments(e){this._segments.value=e}get segments(){return this._segments.value}set onAfterUpdate(e){console.warn("`onAfterUpdate` property has been deprecated, please rely on `addAfterUpdate` instead."),this.addAfterUpdate(e)}addAfterUpdate(e){this._onAfterUpdates.push(e)}removeAfterUpdate(e){const t=this._onAfterUpdates.indexOf(e);-1!==t&&this._onAfterUpdates.splice(t,1)}performAfterUpdate(){for(let e=0;e<this._onAfterUpdates.length;e++)this._onAfterUpdates[e]()}replaceProperty(e,t){let s=this[`_${e}`];const r=this._components.indexOf(s);return this._components[r]=this[`_${e}`]=t,t.needsUpdate=!0,s}}},"./src/core/properties/BaseProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});const r={fontFamily:null,fontSize:.05,fontKerning:"normal",fontStyle:"normal",fontWeight:"400",offset:.01,lineHeight:1.2,lineBreak:"- ,.:?!\n",whiteSpace:"pre-line",flexDirection:"column",justifyContent:"start",alignItems:"start",backgroundImage:null,textAlign:"left",boxSizing:"content-box",position:"static",color:16751103,fontColor:16777215,fontOpacity:1,opacity:1,fontPXRange:4,fontSupersampling:!0,borderRadius:"0",borderWidth:"0",borderColor:"black",borderOpacity:1,backgroundSize:"cover",backgroundColor:2236962,backgroundOpacity:.5,overflow:"visible",letterSpacing:0,invertAlpha:!1,segments:1};class i{constructor(e,t=null,s=!0){this._id=e,this._value=t,this._needsUpdate=!0,this._needsProcess=!1,this._needsRender=!1,this._isPrimitive=s}get id(){return this._id}get value(){return this._value}set value(e){this.isValid(e)&&this._value!==e&&(this._value=e,this._needsUpdate=!0)}update(e,t){this.output(t)}output(e){}_outputValue(e){e[this._id]=this._value}process(e){}render(e){}getInheritedInput(e){if("inherit"!==this._value)return this._value;const t=e._parent._value;return t&&t[`_${this._id}`]?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}getDefaultValue(){return e=this._id,Object.prototype.hasOwnProperty.call(r,e)||console.warn(`ThreeMeshUI::DefaultValues is trying to retrieve non-existing property '${e}'`),r[e];var e}isValid(e){return!0}emptyStrategyLogic(){throw new Error(`ThreeMeshUI::${this.constructor.name} has empty strategy. Update has not been processed.`)}}},"./src/core/properties/BoundsBox.js":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./src/core/properties/BaseProperty.js"),i=s("./node_modules/three/build/three.module.js"),n=s("./src/utils/NumberUtils.js");class a extends r.Z{constructor(){super("bounds",null,!1),this._size=new i.Pa4(1,1,1),this._offsetWidth=0,this._offsetHeight=0,this._innerWidth=0,this._innerHeight=0,this._centerX=.5,this._centerY=.5,this._needsProcess=!0}setReferenceWidth(e,t){const s=e._width,r=e._padding._value,i=e._borderWidth._value,a=e._margin._value,h=t*(s._auto?1:s._value)-(a.y+a.w);(0,n.G)(h,this._offsetWidth)||(this._offsetWidth=h,this._innerWidth=this._offsetWidth-(r.y+r.w+i.y+i.w),this._centerX=o(e),this._propagateWidth(e),this._triggerCascadingDependencies(e))}setReferenceHeight(e,t){const s=e._height,r=e._padding._value,i=e._borderWidth._value,a=e._margin._value,o=t*(s._auto?1:s._value)-(a.x+a.z);(0,n.G)(o,this._offsetHeight)||(this._offsetHeight=o,this._innerHeight=this._offsetHeight-(r.x+r.z+i.x+i.z),this._centerY=h(e),this._propagateHeight(e),this._triggerCascadingDependencies(e))}setChildrenWidth(e,t){if((0,n.G)(this._innerWidth,t))return;const s=e._padding._value,r=e._borderWidth._value;this._innerWidth=t,this._offsetWidth=this._innerWidth+(s.y+s.w+r.y+r.w),this._centerX=o(e),this._propagateWidth(e),this._triggerCascadingDependencies(e)}setChildrenHeight(e,t){if((0,n.G)(this._innerHeight,t))return;const s=e._padding._value,r=e._borderWidth._value;this._innerHeight=t,this._offsetHeight=this._innerHeight+(s.x+s.z+r.x+r.z),this._centerY=h(e),this._propagateHeight(e),this._triggerCascadingDependencies(e)}update(e,t){const s=e._padding._value,r=e._borderWidth._value,i=e._width;i._auto||i._relative||("content-box"===e._boxSizing._value?(this._innerWidth=i._value,this._offsetWidth=this._innerWidth+s.y+s.w+r.y+r.w):(this._offsetWidth=i._value,this._innerWidth=this._offsetWidth-(s.y+s.w+r.y+r.w)),this._centerX=o(e),this._needsProcess=!0,this._propagateWidth(e),this._triggerCascadingDependencies(e));const n=e._height;n._auto||n._relative||("content-box"===e._boxSizing._value?(this._innerHeight=n._value,this._offsetHeight=this._innerHeight+s.x+s.z+r.x+r.z):(this._offsetHeight=n._value,this._innerHeight=this._offsetHeight-(s.x+s.z+r.x+r.z)),this._centerY=h(e),this._needsProcess=!0,this._propagateHeight(e),this._triggerCascadingDependencies(e))}render(e){this._size.x=this._offsetWidth,this._size.y=this._offsetHeight}output(e){e.size=this._size}process(e){}_computeChildrenSideWidth(e){return function(e){return e._children._boxes.reduce(((e,t)=>{const s=t._margin._value;return e+(t._bounds._offsetWidth+s.y+s.w)}),0)}(e)}_computeChildrenSideHeight(e){return function(e){return e._children._boxes.reduce(((e,t)=>{const s=t._margin._value;return e+(t._bounds._offsetHeight+s.x+s.z)}),0)}(e)}_propagateWidth(e){for(let t=0;t<e._children._boxes.length;t++){const s=e._children._boxes[t];s._width._relative&&s._bounds.setReferenceWidth(s,this._innerWidth)}}_propagateHeight(e){for(let t=0;t<e._children._boxes.length;t++){const s=e._children._boxes[t];s._height._relative&&s._bounds.setReferenceHeight(s,this._innerHeight)}}_triggerCascadingDependencies(e){e._parent._value&&(e._parent._value._autoSize._needsProcess=!0),e._flexDirection._needsProcess=!0,e._fontSize._needsProcess=!0,e._layouter._needsProcess=!0,this._needsRender=!0,e._borderWidth._needsRender=!0,e._borderRadius._needsRender=!0}}function o(e){const t=e._padding._value,s=e._borderWidth._value;return(t.w+s.w-(t.y+s.y))/2}function h(e){const t=e._padding._value,s=e._borderWidth._value,r=t.x+s.x;return(t.z+s.z-r)/2}},"./src/core/properties/EmptyProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/BaseProperty.js");class i extends r.Z{constructor(e="untitled"){super(e,void 0,!1)}update(e,t){}output(e){}}},"./src/core/properties/TextContentEmpty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/EmptyProperty.js");class i extends r.Z{constructor(){super("textContent"),this._needsUpdate=!1}set value(e){}process(e){let t="";for(let s=0;s<e.children.length;s++){const r=e.children[s];r.isUI&&(t+=r.textContent)}this._value,this._value=t}}},"./src/core/properties/TextLayouter.js":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./src/core/properties/BaseProperty.js"),i=s("./src/components/core/Lines.js"),n=s("./src/components/core/Line.js");class a extends r.Z{constructor(){super("layouter",null,!1),this._value=null}update(e,t){}process(e){let t=e._width._value;t="nowrap"===e._whiteSpace._value||"pre"===e._whiteSpace._value?1/0:e._bounds._innerWidth;const s=e._lineHeight._value,r=new i.Z(new n.Z);let a=0;e._children._inlines.forEach((e=>{if(!e._inlines.value)return;this._resetInlines(e);const s=e._fontSize._value,i=e._letterSpacing._value*s,o=e._whiteSpace._value,h=e._lineBreak._value,l={WHITESPACE:o,LETTERSPACING:i,BREAKON:h,INNER_WIDTH:t},c=e._whiteSpace._inlineWrapper;a+=e._margin._value.w+e._padding._value.w,e._inlines.value.forEach(((e,t,s)=>{const o=r[r.length-1];if(c(s,t,a,l))return r.push(new n.Z(e)),e.offsetX=e.xoffset,0===e.width?void(a=0):(e.cumulativeWidth=e.xadvance+i,void(a=e.cumulativeWidth));r[r.length-1].push(e),e.offsetX=a+e.xoffset+e.kerning,e.cumulativeWidth=e.xadvance+e.kerning+i,a+=e.cumulativeWidth,o.length-1==1&&0===o[o.length-2].width&&(e.offsetX-=e.xoffset,a-=e.xoffset)})),a+=e._margin._value.w+e._padding._value.w}));const o=e._whiteSpace._inlineCollapser;let h=0,l=0;r.forEach(((e,t)=>{const i=o(e);let n=0,a=0;e.forEach((e=>{n=Math.max(n,e.lineHeight),a=Math.max(a,e.lineBase),e.offsetX-=i})),e.lineHeight=n,e.lineBase=a;const c=n-a;if(e.forEach((t=>{t.offsetY=l-e.lineHeight+c+r[0].lineHeight})),e.y=0!==t?r[t-1].y-e.lineHeight*s/2:-(e.lineHeight*s-e.lineHeight)/2,l-=e.lineHeight*s,e.width=0,e[0]){const t=e[e.length-1];e.width=t.offsetX+t.cumulativeWidth+t.paddingRight+t.marginRight+e[0].offsetX,h=Math.max(h,e.width)}})),r.height=Math.abs(l),r.width=h,this._value=r,t===1/0&&e._bounds.setChildrenWidth(e,r.width),e._height._auto&&e._bounds.setChildrenHeight(e,r.height);const c=e._parent._value;c&&(c._autoSize._needsProcess=!0,c._flexDirection._needsProcess=!0),e._inlineJustificator._needsProcess=!0,e._textAlign._needsProcess=!0}_resetInlines(e){e._fontSize.process(e)}}},"./src/core/properties/geometry/SegmentsProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/BaseProperty.js");class i extends r.Z{constructor(){super("segments",1,!1)}}},"./src/core/properties/rendering/RendererPropertyBox.js":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./src/core/properties/BaseProperty.js"),i=s("./src/frame/Frame.js");class n extends r.Z{constructor(){super("renderer")}render(e){e._backgroundMesh||e.setBackgroundMesh(new i.Z(e)),e.performAfterUpdate()}}},"./src/core/properties/style-properties/PositionProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("position","static",!0),this._allowsInherit=!1,this._value="static",this._needsUpdate=!1,this.computeOutputValue=this._computeFromInherited,this.isValidValue=a}_computeFromInherited(e){super._computeFromInherited(e),e._parent._value&&(e._parent._value._children._needsProcess=!0)}}const n=["static","absolute"];function a(e){return-1!==n.indexOf(e)||(console.warn(`(.style) position value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/StyleColorProperty.js":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./src/core/properties/style-properties/SubStyleProperty.js"),i=s("./node_modules/three/build/three.module.js");class n extends r.Z{constructor(e,t){super(e,t,!1),this._value=new i.Ilk,this._needsUpdate=!1,this.output=this._outputValue}computeOutputValue(e){var t,s;"inherit"!==this._input&&(t=this._input,s=this._value,t instanceof i.Ilk||s instanceof i.Ilk?s.set(t):s=new i.Ilk(t))}}},"./src/core/properties/style-properties/SubStyleProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/BaseProperty.js");s("./src/core/elements/MeshUIBaseElement.js");class i extends r.Z{constructor(e,t,s=!0){super(e,"unset",s),this._input="inherit",this._allowsInherit=!0,this._inheritedInput=void 0,this._inline=void 0,this._computed=void 0}update(e,t){let s=!0;if(void 0!==this._inline&&"unset"!==this._inline?(this._inline===this._input&&(s=!1),this._input=this._inline):void 0!==this._computed?(this._computed===this._input&&(s=!1),this._input=this._computed):s="inherit"===this._input,s){this._allowsInherit||(this._inheritedInput=this.getInheritedInput(e)),this.computeOutputValue(e);for(const t of e._children._uis){const e=t[`_${this._id}`];"inherit"===(e._input?e._input:e._value)&&(t[`_${this._id}`]._needsUpdate=!0)}this.output(t)}}computeOutputValue(e){this._value=this._input}_computeFromInherited(e){this._value=this._inheritedInput}set value(e){console.warn(".(style) sub-property cannot be directly set. It must comes from inline or computed setter.")}set inline(e){this.isValidValue(e)&&e!==this._inline&&(this._inline=e,this._needsUpdate=!0)}get inline(){return this._inline}set computed(e){this.isValidValue(e)&&(this._computed!==e&&(this._computed=e),this._needsUpdate=!0)}get computed(){return this._computed}isValidValue(e){return!0}getInheritedInput(e){if("inherit"!==this._input)return this._input;const t=e._parent._value;return t?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}}},"./src/core/properties/style-properties/background/BackgroundColorProperty.js":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./node_modules/three/build/three.module.js"),i=s("./src/core/properties/style-properties/StyleColorProperty.js");class n extends i.Z{constructor(e){super("backgroundColor",e,!1),this._input="transparent",this._allowsInherit=!1}computeOutputValue(e){e._backgroundMesh.visible=!("none"===this._input||"transparent"===this._input),"inherit"===this._input?a(this.getInheritedInput(e),this._value):a(this._input,this._value)}}function a(e,t){e instanceof r.Ilk||t instanceof r.Ilk?t.set(e):t=new r.Ilk(e)}},"./src/core/properties/style-properties/flex/AlignItemsProperty.js":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");const i=["start","center","end","stretch"],n=function(e){return-1!==i.indexOf(e)||(console.warn(`(.style) alignItems value '${e}' is not valid. Aborted`),!1)};class a extends r.Z{constructor(){super("alignItems","inherit",!0),this.isValidValue=n}}},"./src/core/properties/style-properties/flex/FlexDirectionProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");s("./src/core/elements/MeshUIBaseElement.js");class i extends r.Z{constructor(){super("flexDirection","inherit",!0),this.isValid=a}}const n=["row","row-reverse","column","column-reverse"];function a(e){return-1!==n.indexOf(e)||(console.warn(`(.style) flexDirection value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/flex/JustifyContentProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("justifyContent","inherit",!0),this.isValidValue=a}}const n=["start","center","end","space-between","space-around","space-evenly"];function a(e){return-1!==n.indexOf(e)||(console.warn(`(.style) justifyContent value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontFamilyProperty.js":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./src/core/properties/style-properties/SubStyleProperty.js"),i=s("./src/font/FontLibrary.js"),n=s("./src/font/FontFamily.js");class a extends r.Z{constructor(){super("fontFamily","inherit",!0)}computeOutputValue(e){if(this._input instanceof n.Z)this._value=this._input;else if("inherit"===this._input);else if("string"==typeof this._input){const e=i.Z.getFontFamily(this._input);e?this._value=e:console.warn(`(.style) fontFamily, the font '${this._input}' is not registered. Aborted.`)}else console.warn("(.style) fontFamily requires a registered fontFamily instance, or the id of a registered fontFamily."),console.warn("If you want to set a specific font, please use .font property instead.")}get value(){return this._value}getInheritedInput(e){if("inherit"!==this._input)return this._input;const t=e._parent._value;return t?t[`_${this._id}`].getInheritedInput(t):this.getDefaultValue()}}},"./src/core/properties/style-properties/font/FontKerningProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("fontKerning","inherit"),this.isValidValue=a}}const n=["normal","none","inherit"];function a(e){return-1!==n.indexOf(e)||(console.warn(`(.style) fontKerning value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontStyleProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(e){super("fontStyle",e,!0),this.isValidValue=a}}const n=["normal","italic"];function a(e){return-1!==n.indexOf(e)||(console.warn(`(.style) fontStyle value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/FontWeightProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("fontWeight","inherit",!0),this.isValid=a}}const n=["100","200","300","400","500","600","700","800","900","light","normal","bold","bolder"];function a(e){return-1!==n.indexOf(e.toString())||(console.warn(`(.style) fontWeight value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/LetterSpacingProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("letterSpacing","inherit",!0)}}},"./src/core/properties/style-properties/font/LineHeightProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("lineHeight","inherit",!0)}}},"./src/core/properties/style-properties/font/TextAlignProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("textAlign","inherit",!0),this.isValidValue=a}}const n=["left","right","center","justify","justify-left","justify-right","justify-center"],a=function(e){return-1!==n.indexOf(e)||(console.warn(`(.style) textAlign value '${e}' is not valid. Aborted`),!1)}},"./src/core/properties/style-properties/font/WhiteSpaceProperty.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./src/core/properties/style-properties/SubStyleProperty.js");class i extends r.Z{constructor(){super("whiteSpace","inherit"),this.isValidValue=a}}const n=["normal","nowrap","pre","pre-line","pre-wrap"];function a(e){return-1!==n.indexOf(e)||(console.warn(`(.style) whiteSpace value '${e}' is not valid. Aborted`),!1)}},"./src/elements/basic/BlockElement.js":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./src/elements/basic/BoxElement.js"),i=s("./src/core/properties/BaseProperty.js");class n extends i.Z{constructor(){super("layouter",null,!1),this._needsUpdate=!0,this._childrenPos={}}update(e,t){this._childrenPos={};for(const t of e._children._boxes)"static"===t._position._value&&(this._childrenPos[t.id]=t.position)}process(e){}}class a extends r.Z{constructor(e=null){super({layouter:n},e),Object.defineProperties(this,{isBlock:{configurable:!1,enumerable:!0,value:!0}})}add(e){const t=[];for(let e=0;e<arguments.length;e++){const s=arguments[e];!s.isUI||s.isBox?(t.push(s),s.isUI&&(s.position.z=.005)):console.warn("Block element can only contain Box elements.",s)}return super.add(...t)}}},"./src/elements/basic/BoxElement.js":(e,t,s)=>{s.d(t,{Z:()=>W});var r=s("./src/frame/materials/FrameMaterial.js"),i=s("./src/core/elements/MeshUIBaseElement.js"),n=s("./src/core/properties/BaseProperty.js");class a extends n.Z{constructor(){super("children",null,!1),this._uis=[],this._boxes=[]}update(e,t){this._compute(e),e._layouter._needsUpdate=!0}process(e){this._compute(e)}_compute(e){this._uis=e.children.filter((e=>e.visible&&e.isUI)),this._boxes=this._uis.filter((e=>e.isBox)).sort(this._sortOrder)}dispose(){this._uis=null,this._boxes=null}_sortOrder=(e,t)=>e._order._value<t._order._value?-1:e._order._value>t._order._value?1:this._uis.indexOf(e)<this._uis.indexOf(t)?-1:1}var o=s("./src/core/properties/BoundsBox.js"),h=s("./src/core/properties/style-properties/flex/AlignItemsProperty.js");class l extends h.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!0,this._process=this.emptyStrategyLogic,this._childAlign=this.emptyStrategyLogic}computeOutputValue(e){switch(this._value=this._inheritedInput,e._flexDirection._value){case"row":case"row-reverse":switch(this._process=w,this._value){case"start":this._childAlign=d;break;case"end":this._childAlign=u;break;default:this._childAlign=c}break;case"column":case"column-reverse":switch(this._process=f,this._value){case"start":this._childAlign=_;break;case"end":this._childAlign=p;break;default:this._childAlign=c}}this._needsProcess=!0,e._autoSize._needsProcess=!0,e._flexDirection._needsProcess=!0,e._justifyContent._needsProcess=!0,this._needsProcess=!0,e._fontSize._needsProcess=!0,e._layouter._needsProcess=!0}process(e){this._process(e,this._childAlign);let t="center",s="center",r="center";const i=e._padding._value,n=e._borderWidth._value;t=-1!==e._flexDirection._value.indexOf("column")?"start"===this._value?s="left":"end"===this._value?s="right":"centerX":"start"===this._value?r="top":"end"===this._value?r="bottom":"centerY";let a=-(i.x-i.z)/2-(n.x-n.z)/2,o=-(i.y-i.w)/2-(n.y-n.w)/2;"left"===s?o=(i.w-i.y)/2+(n.w-n.y)/2:"right"===s&&(o=-(i.y-i.w)/2-(n.y-n.w)/2),"top"===r?a=-(i.x-i.z)/2-(n.x-n.z)/2:"bottom"===r&&(a=(i.z-i.x)/2+(n.z-n.x)/2),e._children._boxes.forEach((s=>{let r=0,i=0;"top"===t?i=-s._margin._value.x:"bottom"===t?i=s._margin._value.z:"left"===t?r=s._margin._value.w:"right"===t?r=-s._margin._value.y:"centerX"===t?r=(s._margin._value.w-s._margin._value.y)/2:"centerY"===t&&(i=(-s._margin._value.x+s._margin._value.z)/2),e._layouter._childrenPos[s.id].x+=o+r,e._layouter._childrenPos[s.id].y+=a+i}))}}function c(){return 0}function u(e,t){return-t+e._bounds._offsetHeight/2}function d(e,t){return t-e._bounds._offsetHeight/2}function p(e,t){return t-e._bounds._offsetWidth/2}function _(e,t){return-t+e._bounds._offsetWidth/2}function f(e,t){const s=e._bounds._innerWidth/2;e._children._boxes.forEach((r=>{e._layouter._childrenPos[r.id].x=t(r,s)}))}function w(e,t){const s=e._bounds._innerHeight/2;e._children._boxes.forEach((r=>{e._layouter._childrenPos[r.id].y=t(r,s)}))}var g=s("./src/core/properties/style-properties/flex/FlexDirectionProperty.js");class m extends g.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!0,this._offset=0,this._reverse=1,this._process=this.emptyStrategyLogic}computeOutputValue(e){switch(this._value=this._inheritedInput,this._value){case"row":this._process=v;break;case"row-reverse":this._process=C;break;case"column":this._process=y;break;case"column-reverse":this._process=b}e._justifyContent._needsUpdate||e._justifyContent.computeOutputValue(e),e._alignItems._needsUpdate||e._alignItems.computeOutputValue(e),this._needsProcess=!0}process(e){switch(this._value){case"row":this._offset=-e._bounds._innerWidth/2;break;case"row-reverse":this._offset=e._bounds._innerWidth/2;break;case"column":this._offset=e._bounds._innerHeight/2;break;case"column-reverse":this._offset=-e._bounds._innerHeight/2}this._reverse=-Math.sign(this._offset),0===this._reverse&&(this._reverse=1),this._process(e),e._justifyContent._needsProcess=!0,e._layouter._needsProcess=!0}}function v(e){let t=e._flexDirection._offset;const s=e._flexDirection._reverse,r=e._children._boxes;for(let i=0;i<r.length;i++){const n=r[i],a=n.id,o=n._bounds._offsetWidth;t+=n._margin._value.w*s;const h=e._layouter._childrenPos[a];h.x=t+o/2*s,h.y=0,t+=s*(o+n._margin._value.y)}}function C(e){let t=e._flexDirection._offset;const s=e._flexDirection._reverse,r=e._children._boxes;for(let i=0;i<r.length;i++){const n=r[i],a=n.id,o=n._bounds._offsetWidth;t+=n._margin._value.y*s;const h=e._layouter._childrenPos[a];h.x=t+o/2*s,h.y=0,t+=(o+n._margin._value.w)*s}}function y(e){let t=e._flexDirection._offset;const s=e._flexDirection._reverse,r=e._children._boxes;for(let i=0;i<r.length;i++){const n=r[i],a=n.id,o=n._bounds._offsetHeight;t+=n._margin._value.x*s;const h=e._layouter._childrenPos[a];h.x=0,h.y=t+o/2*s,t+=(o+n._margin._value.z)*s}}function b(e){let t=e._flexDirection._offset;const s=e._flexDirection._reverse,r=e._children._boxes;for(let i=0;i<r.length;i++){const n=r[i],a=n.id,o=n._bounds._offsetHeight;t+=n._margin._value.z*s;const h=e._layouter._childrenPos[a];h.x=0,h.y=t+o/2*s,t+=(o+n._margin._value.x)*s}}var x=s("./src/core/properties/style-properties/flex/JustifyContentProperty.js");class S extends x.Z{constructor(e){super("justifyContent",e,!0),this._allowsInherit=!1,this._needsUpdate=!0,this._computeOffset=this.emptyStrategyLogic,this._computeMargin=this.emptyStrategyLogic,this._process=this.emptyStrategyLogic}computeOutputValue(e){switch(this._value=this._inheritedInput,e._flexDirection._value){case"column-reverse":case"column":this._process=U.bind(this);break;case"row-reverse":case"row":this._process=k.bind(this)}switch(this._value){case"end":this._computeOffset=M,this._computeMargin=j;break;case"center":this._computeOffset=R,this._computeMargin=j;break;case"start":this._computeOffset=I,this._computeMargin=j;break;case"space-between":this._computeOffset=I,this._computeMargin=P;break;case"space-around":this._computeOffset=I,this._computeMargin=V;break;case"space-evenly":this._computeOffset=I,this._computeMargin=F}e._flexDirection._needsProcess=!0}process(e){this._process(e),e._alignItems._needsProcess=!0}}function k(e){const t=e._flexDirection._offset,{usedDirectionSpace:s,remainingSpace:r}=function(e){const t=e._bounds._computeChildrenSideWidth(e);return{usedDirectionSpace:t,remainingSpace:e._bounds._innerWidth-t}}(e),i=2*t-s*Math.sign(t),n=this._computeOffset(i),a=this._computeMargin(e,r,e._flexDirection._reverse);e._children._boxes.forEach(((t,s)=>{e._layouter._childrenPos[t.id].x-=n-a[s]}))}function U(e){const t=e._flexDirection._offset,{usedDirectionSpace:s,remainingSpace:r}=function(e){const t=e._bounds._computeChildrenSideHeight(e);return{usedDirectionSpace:t,remainingSpace:e._bounds._innerHeight-t}}(e),i=2*t-s*Math.sign(t),n=this._computeOffset(i),a=this._computeMargin(e,r,e._flexDirection._reverse);e._children._boxes.forEach(((t,s)=>{e._layouter._childrenPos[t.id].y-=n-a[s]}))}function I(e){return 0}function M(e){return e}function R(e){return e/2}function j(e,t=0,s=1){return Array(e._children._boxes.length).fill(0)}function P(e,t=0,s=1){const r=e._children._boxes.length,i=Array(r).fill(0);if(t>0&&r>1){const e=t/(r-1)*s;i[0]=0;for(let t=1;t<r;t++)i[t]=e*t}return i}function F(e,t=0,s=1){const r=e._children._boxes.length,i=Array(r).fill(0);if(t>0){const e=t/(r+1)*s;for(let t=0;t<r;t++)i[t]=e*(t+1)}return i}function V(e,t=0,s=1){const r=e._children._boxes.length,i=Array(r).fill(0);if(t>0){const e=t/r*s,n=e/2;i[0]=n;for(let t=1;t<r;t++)i[t]=n+e*t}return i}var B=s("./node_modules/three/build/three.module.js"),T=s("./src/core/properties/rendering/RendererPropertyBox.js"),Z=s("./src/core/properties/style-properties/PositionProperty.js");class O extends Z.Z{constructor(){super("position")}update(e,t){super.update(e,t),this._needsProcess=!0}}class A extends n.Z{constructor(){super("autosize"),this._needsProcess=!0}process(e){e._width._auto&&function(e){e._bounds.setChildrenWidth(e,function(e){switch(e._flexDirection._value){case"row":case"row-reverse":return function(e){let t=0;for(const s of e._children._boxes){if("static"!==s._position._value)continue;const e=s._margin._value;t+=s._bounds._offsetWidth+e.y+e.w}return t}(e);case"column":case"column-reverse":return function(e){let t=0;for(const s of e._children._boxes){if("static"!==s._position._value)continue;const e=s._margin._value,r=s._bounds._offsetWidth+e.y+e.w;r>t&&(t=r)}return t}(e)}}(e))}(e),e._height._auto&&function(e){e._bounds.setChildrenHeight(e,function(e){switch(e._flexDirection._value){case"row":case"row-reverse":return function(e){let t=0;for(const s of e._children._boxes){if("static"!==s._position._value)continue;const e=s._margin._value,r=s._bounds._offsetHeight+e.x+e.z;r>t&&(t=r)}return t}(e);case"column":case"column-reverse":return function(e){let t=0;for(const s of e._children._boxes){if("static"!==s._position._value)continue;const e=s._margin._value;t+=s._bounds._offsetHeight+e.x+e.z}return t}(e)}}(e))}(e);const t="stretch"===e._alignItems._value,s=t&&-1!==e._flexDirection._value.indexOf("column"),r=t&&!s;for(const t of e._children._boxes)(t._width._auto&&s||t._width._relative)&&t._bounds.setReferenceWidth(t,e._bounds._innerWidth),(t._height._auto&&r||t._height._relative)&&t._bounds.setReferenceHeight(t,e._bounds._innerHeight)}}class W extends i.Z{constructor(e=null,t=null){e||(e={}),e.children||(e.children=a),e.bounds||(e.bounds=o.Z),e.flexDirection||(e.flexDirection=m),e.justifyContent||(e.justifyContent=S),e.alignItems||(e.alignItems=l),e.position||(e.position=O),e.autoSize||(e.autoSize=A),e.renderer||(e.renderer=T.Z),t||(t={}),t.fontSide||(t.fontSide=0),t.invertAlpha||(t.invertAlpha=!1),t.fontCastShadow||(t.fontCastShadow=!1),t.fontReceiveShadow||(t.fontReceiveShadow=!1),t.backgroundCastShadow||(t.backgroundCastShadow=!1),t.backgroundReceiveShadow||(t.backgroundReceiveShadow=!1),super(e,t),Object.defineProperties(this,{isBox:{configurable:!1,enumerable:!0,value:!0}}),this.backgroundMaterial=new r.Z,this._renderer.render(this),this._backgroundMesh.visible=!1}bindBackgroundMeshProperties(){this._bounds._size=this._backgroundMesh.scale,this._bounds._needsProcess=!0}unbindBackgroundMeshProperties(){this._bounds._size=new B.Pa4(1,1,1),this._bounds._needsProcess=!0}}},"./src/font/FontFamily.js":(e,t,s)=>{s.d(t,{Z:()=>y});var r=s("./node_modules/three/build/three.module.js"),i=s("./src/font/FontVariant.js");class n extends class{constructor(){this._size=42,this._lineHeight=42,this._lineBase=38,this._name="-",this._charset=""}get size(){return this._size}get lineHeight(){return this._lineHeight}get lineBase(){return this._lineBase}get name(){return this._name}get charset(){return this._charset}}{constructor(e){super(),this._size=e.info.size,this._lineHeight=e.common.lineHeight,this._lineBase=e.common.base,this._name=e.info.face,this._textureWidth=e.common.scaleW,this._textureHeight=e.common.scaleH,this._charset=e.chars.map((e=>e.char)).join("")}get textureWidth(){return this._textureWidth}get textureHeight(){return this._textureHeight}}var a=s("./src/components/core/Inline.js");class o extends a.Z{constructor(e){super(),this._typographic=e}get typographic(){return this._typographic}get xadvance(){return this._typographic.xadvance*this._fontFactor}get xoffset(){return this._typographic.xoffset*this._fontFactor}get yoffset(){return this._typographic.yoffset*this._fontFactor}get width(){return this._typographic.width*this._fontFactor}get height(){return this._typographic.height*this._fontFactor}get char(){return this._typographic.char}get anchor(){const e=this._typographic.font.lineHeight,t=this._typographic.font.lineBase;return(this._typographic.yoffset+this._typographic.height-t)*this._fontSize/e}get lineHeight(){return this._typographic.font.lineHeight*this._fontFactor}get lineBase(){return this._typographic.font.lineBase*this._fontFactor}}class h extends o{constructor(e){super(e)}get uv(){return this.typographic.uv}}class l extends class{constructor(e){this._char="",this._width=1,this._heigth=1,this._xadvance=1,this._xoffset=0,this._yoffset=0,this._font=e}get font(){return this._font}get char(){return this._char}get width(){return this._width}get height(){return this._heigth}get xadvance(){return this._xadvance}get xoffset(){return this._xoffset}get yoffset(){return this._yoffset}set yoffset(e){this._yoffset=e}clone(e){throw new Error("Abstract... Need to be implemented")}asInlineGlyph(){throw new Error("Abstract... Need to be implemented")}}{constructor(e,t){super(e),this._char=t.char,this._width=t.width,this._heigth=t.height,this._xadvance=t.xadvance?t.xadvance:this._width,this._xoffset=t.xoffset?t.xoffset:0,this._yoffset=t.yoffset?t.yoffset:0,this._uv=t.uv?t.uv:null,isNaN(t.x)||(this._uv={left:t.x/e.textureWidth,right:(t.x+t.width)/e.textureWidth,top:1-(t.y+t.height)/e.textureHeight,bottom:1-t.y/e.textureHeight})}get uv(){return this._uv}clone(e){return new l(this._font,{char:e,width:this._width,height:this._heigth,xadvance:this._xadvance,xoffset:this._xoffset,yoffset:this._yoffset,uv:null})}asInlineGlyph(){return new h(this)}}class c extends r.BKK{constructor(e,t){let s=1,r=1;const i=e.typographic.font.size,n=t._segments.value;s=Math.ceil(e.typographic.width/i*n),r=Math.ceil(e.typographic.height/i*n),super(e.width,e.height,s,r),e.uv?(this._mapUVs(e),this._transformGeometry(e)):(this._nullifyUVs(),this.scale(0,0,1),this.translate(0,e.fontSize/2,0)),this.name="GlyphGeometry"}_mapUVs(e){const t=e.uv.right-e.uv.left,s=e.uv.bottom-e.uv.top,i=this.getAttribute("uv").array.slice(),n=[];for(let r=0;r<i.length;r+=2){const a=i[r],o=i[r+1];n.push(e.uv.left+t*a),n.push(e.uv.top+s*o)}this.setAttribute("uvG",new r.TlE(new Float32Array(n),2))}_nullifyUVs(){const e=[],t=this.getAttribute("uv").array.length;for(let s=0;s<t;s++)e.push(0);this.setAttribute("uvG",new r.TlE(new Float32Array(e),2))}_transformGeometry(e){this.translate(e.width/2,e.height/2-e.anchor,0)}}var u=s("./src/font/msdf/utils/MSDFFontMaterialUtils.js"),d=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),p=s("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),_=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),f=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),w=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js");const g=`\n${d.Z}\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t${w.Z}\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t${p.Z}\n\t#include <clipping_planes_vertex>\n}\n`,m=`\nuniform vec3 diffuse;\nuniform float opacity;\n${_.Z}\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t// instead of <color_fragment> : vec4 diffuseColor\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t${f.Z}\n\t#include <alphatest_fragment>\n\t// instead of <output_fragment>\n\tgl_FragColor = diffuseColor;\n\t#include <clipping_planes_fragment>\n}\n`;class v extends r.jyz{static get mediation(){return u.Z.mediation}constructor(e={}){super({uniforms:{glyphMap:{value:null},diffuse:{value:null},opacity:{value:1},unitRange:{value:new r.FM8(0,0)},alphaTest:{value:.02}},transparent:!0,clipping:!0,vertexShader:g,fragmentShader:m,extensions:{derivatives:!0}}),this.defines.USE_ALPHATEST="",this.needsUpdate=!0,this.noRGSS=e.noRGSS||!1}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get opacity(){return this.uniforms.opacity.value}get unitRange(){return this.uniforms.unitRange.value}set unitRange(e){this.uniforms.unitRange.value.copy(e)}get glyphMap(){return this.uniforms.glyphMap.value}set glyphMap(e){this.uniforms.glyphMap.value=e}get isDefault(){return this.constructor===v}get alphaTest(){return this.uniforms.alphaTest.value}set alphaTest(e){this.uniforms.alphaTest.value=e}}class C extends i.Z{constructor(e,t,s,i){var n,a;super(e,t),this._unitRange=new r.FM8(1,1),s.pages?this._buildData(s):(n=this,a=s,(new r.hH6).setResponseType("json").load(a,(e=>{n._buildData(e),n._checkReadiness()}))),i instanceof r.xEZ?this._buildTexture(i):function(e,t){e._texture=(new r.dpR).load(t,(t=>{e._buildTexture(t),e._checkReadiness()}))}(this,i),this._defaultMaterialClass=v,this._checkReadiness()}get texture(){return this._texture}get unitRange(){return this._unitRange}set fontMaterial(e){this._defaultMaterialClass=e}get fontMaterial(){return this._defaultMaterialClass}_buildData(e){this._font=new n(e),this._kernings=this._buildKerningPairs(e),this._chars=this._buildCharacters(e),this._chars[" "]=this._buildCharacterWhite(e),this._chars["\n"]=this._buildCharacterWhite(e,"\n",.001,1),this._chars["\t"]=this._buildCharacterWhite(e,"\t",4,1),this._size=e.info.size,this._lineHeight=e.common.lineHeight,this._lineBase=e.common.base,this._distanceRange=e.distanceField.distanceRange,this._unitRange=new r.FM8(this._distanceRange,this._distanceRange).divide(new r.FM8(e.common.scaleW,e.common.scaleH))}_buildTexture(e){e.generateMipmaps=!1,e.minFilter=r.wem,e.magFilter=r.wem,e.needsUpdate=!0}getGeometricGlyph(e,t){return new c(e,t)}_readyCondition(){return this._chars&&this._texture}_buildKerningPairs(e){const t={};for(let s=0;s<e.kernings.length;s++){const r=e.kernings[s];if(0===r.amount)continue;t[String.fromCharCode(r.first,r.second)]=r.amount}return t}_buildCharacters(e){const t={};for(let s=0;s<e.chars.length;s++){const r=e.chars[s];t[r.char]=new l(this._font,r)}return t}_buildCharacterWhite(e,t=" ",s=1,r=1){return new l(this._font,{char:t,width:e.info.size/3*s,height:.7*e.info.size*r})}}class y extends r.pBf{constructor(e){super(),this._name=e,this._variants=[],this._isReady=!1}get isReady(){return this._isReady}addVariant(e,t,s,r,i=!1){if(i||!this.getVariant(e,t)){this._isReady=!1;const i=new C(e,t,s,r);this._variants.push(i),i.isReady?this._checkReadiness():i.addEventListener("ready",this._checkReadiness)}else console.warn(`FontFamily('${this._name}')::addVariant() - Variant(${e}, ${t}) already exists.`);return this}addCustomImplementationVariant(e,t=!1){return t||!this.getVariant(e.weight,e.style)?(this._isReady=!1,this._variants.push(e),e.isReady?this._checkReadiness():e.addEventListener("ready",this._checkReadiness)):console.warn(`FontFamily('${this._name}')::addCustomImplementationVariant() - Variant(${e.weight}, ${e.style}) already exists.`),this}getVariant(e,t){return this._variants.find((s=>s.weight===e&&s.style===t))}get name(){return this._name}_checkReadiness=()=>{var e;this._variants.every((e=>e.isReady))&&((e=this)._isReady=!0,e.dispatchEvent(b))}}const b={type:"ready"}},"./src/font/FontLibrary.js":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./src/font/FontFamily.js");s("./src/font/FontVariant.js");const i={};const n={addFontFamily:function(e){return i[e]&&console.error(`FontLibrary::addFontFamily - Font('${e}') is already registered`),i[e]=new r.Z(e),i[e]},getFontFamily:function(e){return i[e]},prepare:function(e){const t=[...arguments];t.forEach((e=>{if(!(e instanceof r.Z))throw new Error(`FontLibrary::prepare() - One of the provided parameter is not a FontFamily. Instead ${typeof e} given.`)}));const s=function(){return t.every((e=>e.isReady))};return new Promise(((e,r)=>{if(s())e();else for(let r=0;r<t.length;r++){const i=t[r];i.isReady||i.addEventListener("ready",(()=>{s()&&e()}))}}))},setMissingCharacterHandler:function(e){a=e},missingCharacter:function(e,t){return a(e,t)}};let a=function(e,t){return console.error(`The character '${t}' is not included in the font characters set.`)," "}},"./src/font/FontVariant.js":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./node_modules/three/build/three.module.js"),i=s("./src/font/FontLibrary.js");class n extends r.pBf{constructor(e,t){super(),this._isReady=!1,this._weight=e,this._style=t,this._size=42,this._lineHeight=42,this._lineBase=42,this._font=null}get typographic(){return this._font}get isReady(){return this._isReady}get weight(){return this._weight}get style(){return this._style}get texture(){return this._texture}set fontMaterial(e){throw Error(`FontVariant('${this.id}')::fontMaterial - is abstract.`)}get fontMaterial(){throw Error(`FontVariant('${this.id}')::fontMaterial - is abstract.`)}get id(){return`${this._name}(w:${this.weight},s:${this.style})`}getTypographicGlyph(e){let t=this._chars[e];if(t)return t;if(e.match(/\s/))return this._chars[" "];const s=i.Z.missingCharacter(this,e);if(s&&(t=this._chars[s],t))return t;throw Error(`FontVariant('${this.id}')::getTypographicGlyph() - character('${e}') and/or fallback character were not found in provided msdf charset.`)}getGeometricGlyph(e,t){throw new Error(`FontVariant(${typeof this})::getGeometryCharacter() is abstract and should therefore be overridden.`)}getKerningAmount(e){return this._kernings[e]?this._kernings[e]:0}adjustTypographicGlyphs(e){for(const t in e){const s=this.getTypographicGlyph(t),r=e[t];for(const i in r)s["_"+i]=e[t][i]}}_checkReadiness(){var e;this._readyCondition()&&((e=this)._isReady=!0,e.dispatchEvent(a))}_readyCondition(){throw new Error(`FontVariant(${typeof this})::_readyCondition() is abstract and should therefore be overridden.`)}}const a={type:"ready"}},"./src/font/msdf/materials/MSDFDepthMaterial.js":(e,t,s)=>{if(s.d(t,{Z:()=>n}),/^ex__msdf_(crumple|shadows)$/.test(s.j))var r=s("./node_modules/three/build/three.module.js");var i=s("./src/font/msdf/utils/MSDFFontMaterialUtils.js");class n extends(/^ex__msdf_(crumple|shadows)$/.test(s.j)?r.lRF:null){static get mediation(){return i.Z.mediation}constructor(e={}){e.depthPacking=r.mSO,i.Z.ensureMaterialOptions(e),delete e.transparent,super(e),i.Z.ensureDefines(this),i.Z.ensureUserData(this,e),this.onBeforeCompile=e=>{i.Z.bindUniformsWithUserData(e,this),i.Z.injectShaderChunks(e)}}}},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\n\tfloat alpha;\n#ifdef NO_RGSS\n\n\talpha = tap( vUvG );\n\n#else\n\n\t// shader-based supersampling based on https://bgolus.medium.com/sharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec\n\t// per pixel partial derivatives\n\tvec2 dx = dFdx(vUvG);\n\tvec2 dy = dFdy(vUvG);\n\t// rotated grid uv offsets\n\tvec2 uvOffsets = vec2(0.125, 0.375);\n\tvec2 offsetUV = vec2(0.0, 0.0);\n\t// supersampled using 2x2 rotated grid\n\talpha = 0.0;\n\toffsetUV.xy = vUvG + uvOffsets.x * dx + uvOffsets.y * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG - uvOffsets.x * dx - uvOffsets.y * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG + uvOffsets.y * dx - uvOffsets.x * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG - uvOffsets.y * dx + uvOffsets.x * dy;\n\talpha += tap(offsetUV);\n\talpha *= 0.25;\n\n#endif\n\n\talpha = clamp( alpha, 0.0, 1.0 );\n\n#ifdef INVERT_ALPHA\n\n\talpha = 1.0 - alpha;\n\n#endif\n\n\tdiffuseColor.a *= alpha;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\nvarying vec2 vUvG;\nuniform sampler2D glyphMap;\nuniform vec2 unitRange;\n// functions from the original msdf repo:\n// https://github.com/Chlumsky/msdfgen#using-a-multi-channel-distance-field\nfloat median(float r, float g, float b) {\n\treturn max(min(r, g), min(max(r, g), b));\n}\nfloat screenPxRange() {\n\n\t// precomputed unitRange as recommended by Chlumsky\n\t// vec2 unitRange = vec2(pxRange)/vec2(textureSize(glyphMap, 0));\n\tvec2 screenTexSize = vec2(1.0)/fwidth(vUvG);\n\treturn max(0.5*dot(unitRange, screenTexSize), 1.0);\n}\nfloat tap(vec2 offsetUV) {\n\tvec3 msd = texture( glyphMap, offsetUV ).rgb;\n\tfloat sd = median(msd.r, msd.g, msd.b);\n\tfloat screenPxDistance = screenPxRange() * (sd - 0.5);\n\tfloat alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\treturn alpha;\n}\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\nattribute vec2 uvG;\nvarying vec2 vUvG;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\nvUvG = uvG;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\ngl_Position.z -= 0.00001;\n"},"./src/font/msdf/utils/MSDFFontMaterialUtils.js":(e,t,s)=>{s.d(t,{Z:()=>c});var r=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),i=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js"),n=s("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),a=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),o=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),h=s("./node_modules/three/build/three.module.js"),l=s("./src/utils/mediator/transformers/MaterialTransformers.js");class c{static ensureMaterialOptions(e){e.transparent=!0,e.alphaTest=e.alphaTest||.02}static ensureDefines(e){e.defines||(e.defines={})}static ensureUserData(e,t){e.userData.glyphMap={value:t.glyphMap},e.userData.unitRange={value:new h.FM8}}static bindUniformsWithUserData(e,t){e.uniforms.glyphMap=t.userData.glyphMap,e.uniforms.unitRange=t.userData.unitRange}static injectShaderChunks(e){c.injectVertexShaderChunks(e),c.injectFragmentShaderChunks(e)}static injectVertexShaderChunks(e){e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","#include <uv_pars_vertex>\n"+r.Z),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n"+i.Z),e.vertexShader=e.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n"+n.Z)}static injectFragmentShaderChunks(e){e.fragmentShader=e.fragmentShader.replace("#include <uv_pars_fragment>","#include <uv_pars_fragment>\n"+a.Z),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","#include <alphamap_fragment>\n"+o.Z)}static from(e){return class extends e{static get fontMaterialProperties(){return c.mediation}constructor(e={}){c.ensureMaterialOptions(e),super(e),c.ensureDefines(this),c.ensureUserData(this,e),this._userDefinedOnBeforeCompile=e=>{},this._onBeforeCompile=this._cumulativeOnBeforeCompile}set onBeforeCompile(e){this._userDefinedOnBeforeCompile=e}get onBeforeCompile(){return this._onBeforeCompile}_cumulativeOnBeforeCompile=e=>{c.bindUniformsWithUserData(e,this),c.injectShaderChunks(e),this._userDefinedOnBeforeCompile(e)}}}static get mediation(){return u}}const u={fontAlphaTest:{m:"alphaTest",t:l.Dr},fontSide:{m:"side"},font:{m:"glyphMap",t:function(e,t,s){const r=s?s.texture:null,i=s?s.unitRange:new h.FM8;if(void 0!==e[t])return e.glyphMap=r,void(e.unitRange=i);e.userData&&e.userData.glyphMap&&(e.userData.glyphMap.value=r,e.userData.unitRange.value=i)}},color:{m:"color"},fontOpacity:{m:"opacity"},fontSupersampling:{m:"NO_RGSS",t:function(e,t,s){s?delete e.defines.NO_RGSS:e.defines.NO_RGSS="",e.needsUpdate=!0}},invertAlpha:{m:"INVERT_ALPHA",t:l.nY}}},"./src/frame/Frame.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./node_modules/three/build/three.module.js");class i extends r.Kj0{constructor(e){const t=new r.BKK(1,1,e._segments.value,e._segments.value),s=new r.TlE(new Float32Array(t.getAttribute("uv").array),2);t.setAttribute("uvB",s).name="uvB",super(t,e.backgroundMaterial),this.name="UIBackgroundBox"}}},"./src/frame/materials/FrameDepthMaterial.js":(e,t,s)=>{if(s.d(t,{Z:()=>n}),"dev__frames"==s.j)var r=s("./node_modules/three/build/three.module.js");var i=s("./src/frame/utils/FrameMaterialUtils.js");class n extends("dev__frames"==s.j?r.lRF:null){static get mediation(){return i.Z.mediation}constructor(e={}){e.depthPacking=r.mSO,i.Z.ensureMaterialOptions(e),delete e.transparent,super(e),i.Z.ensureDefines(this),i.Z.ensureUserData(this,e),this.onBeforeCompile=e=>{i.Z.bindUniformsWithUserData(e,this),i.Z.injectShaderChunks(e)}}}},"./src/frame/materials/FrameMaterial.js":(e,t,s)=>{s.d(t,{Z:()=>h});var r=s("./node_modules/three/build/three.module.js"),i=s("./src/renderers/shaders/ShaderChunkUI.js");const n=`\n// Would be automatic on three materials and from USE_UV\n#ifdef USE_MAP\nvarying vec2 vUv;\n#endif\n\n${i.s.frame_border_pars_vertex}\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#ifdef USE_MAP\n\tvUv = uv;\n\t#endif\n\n\t${i.s.frame_border_vertex}\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <clipping_planes_vertex>\n\n}\n`,a=`\n\n// Basic\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif\n\n${i.s.frame_common_pars}\n\n${i.s.frame_border_pars_fragment}\n\n\n#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif\n\n${i.s.frame_background_pars_fragment}\n\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t// map\n\t${i.s.frame_background_fragment}\n\n\t${i.s.frame_border_fragment}\n\n\t#ifdef USE_ALPHATEST\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n\t#endif\n\n\t// output\n\tgl_FragColor = diffuseColor;\n\n\n\t#include <clipping_planes_fragment>\n}\n`;var o=s("./src/frame/utils/FrameMaterialUtils.js");class h extends r.jyz{static get mediation(){return o.Z.mediation}constructor(){super({uniforms:{alphaTest:{value:.02},map:{value:null},diffuse:{value:new r.Ilk(16777215)},opacity:{value:1},borderColor:{value:new r.Ilk(0)},borderOpacity:{value:0},borderRadius:{value:new r.Ltg(0,0,0,0)},cornerTL:{value:new r.FM8(0,1)},cornerTR:{value:new r.FM8(1,1)},cornerBR:{value:new r.FM8(1,0)},cornerBL:{value:new r.FM8(0,0)},borderWidth:{value:new r.Ltg(0,0,0,0)},frameSize:{value:new r.Pa4(1,1,1)},textureSize:{value:new r.FM8(1,1)}},side:r.Wl3,transparent:!0,clipping:!0,vertexShader:n,fragmentShader:a,extensions:{derivatives:!0}}),this.defines.USE_ALPHATEST="",this.needsUpdate=!0}set map(e){this.uniforms.map.value=e,e?void 0===this.defines.USE_UV&&(this.defines.USE_UV="",this.needsUpdate=!0):void 0!==this.defines.USE_UV&&(delete this.defines.USE_UV,this.needsUpdate=!0),this.needsUpdate=!0}get map(){return this.uniforms.map.value}get alphaTest(){return this.uniforms.alphaTest.value}set alphaTest(e){this.uniforms.alphaTest.value=e}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get opacity(){return this.uniforms.opacity.value}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}}},"./src/frame/utils/FrameMaterialUtils.js":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./node_modules/three/build/three.module.js"),i=s("./src/renderers/shaders/ShaderChunkUI.js"),n=s("./src/utils/mediator/transformers/MaterialTransformers.js");class a{static get mediation(){return o}static ensureMaterialOptions(e){e.transparent=!0,e.alphaTest=e.alphaTest||.02}static ensureDefines(e){e.defines||(e.defines={})}static ensureUserData(e,t){e.userData.borderColor={value:null},e.userData.borderRadius={value:new r.Ltg(0,0,0,0)},e.userData.cornerTL={value:new r.FM8(0,1)},e.userData.cornerTR={value:new r.FM8(1,1)},e.userData.cornerBR={value:new r.FM8(1,0)},e.userData.cornerBL={value:new r.FM8(0,0)},e.userData.borderWidth={value:new r.Ltg(0,0,0,0)},e.userData.borderOpacity={value:null},e.userData.frameSize={value:new r.Pa4(1,1,1)},e.userData.textureSize={value:new r.FM8(1,1)}}static bindUniformsWithUserData(e,t){e.uniforms.borderColor=t.userData.borderColor,e.uniforms.borderRadius=t.userData.borderRadius,e.uniforms.cornerTL=t.userData.cornerTL,e.uniforms.cornerTR=t.userData.cornerTR,e.uniforms.cornerBR=t.userData.cornerBR,e.uniforms.cornerBL=t.userData.cornerBL,e.uniforms.borderWidth=t.userData.borderWidth,e.uniforms.borderOpacity=t.userData.borderOpacity,e.uniforms.frameSize=t.userData.frameSize,e.uniforms.textureSize=t.userData.textureSize}static injectShaderChunks(e){a.injectVertexShaderChunks(e),a.injectFragmentShaderChunks(e)}static injectVertexShaderChunks(e){e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","#include <uv_pars_vertex>\n"+i.s.frame_border_pars_vertex),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n"+i.s.frame_border_vertex)}static injectFragmentShaderChunks(e){e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+i.s.frame_background_pars_fragment),e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+i.s.frame_border_pars_fragment),e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+i.s.frame_common_pars),e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",i.s.frame_background_fragment),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>",i.s.frame_border_fragment+"\n#include <alphamap_fragment>")}}const o={backgroundAlphaTest:{m:"alphaTest",t:n.Dr},backgroundSide:{m:"side"},backgroundImage:{m:"map"},backgroundColor:{m:"color"},backgroundOpacity:{m:"opacity"},backgroundSize:{m:"computedBackgroundSize",t:function(e,t,s){s=["stretch","contain","cover"].indexOf(s),(0,n.WJ)(e,"BACKGROUND_MAPPING",s)}},borderWidth:{m:"borderWidth",t:n.Uf},borderColor:{m:"borderColor",t:n.Uf},cornerTL:{m:"cornerTL",t:n.Uf},cornerTR:{m:"cornerTR",t:n.Uf},cornerBR:{m:"cornerBR",t:n.Uf},cornerBL:{m:"cornerBL",t:n.Uf},borderOpacity:{m:"borderOpacity",t:n.Uf},size:{m:"frameSize",t:n.Uf},tSize:{m:"textureSize",t:n.Uf}}},"./src/renderers/shaders/ShaderChunkUI.js":(e,t,s)=>{s.d(t,{s:()=>h});var r=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js"),i=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),n=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),a=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),o=s("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js");const h={msdf_alphaglyph_pars_vertex:a.Z,msdf_alphaglyph_vertex:r.Z,msdf_offset_vertex:o.Z,msdf_alphaglyph_pars_fragment:n.Z,msdf_alphaglyph_fragment:i.Z,frame_border_pars_vertex:"\n\n// FrameBorder vertex pars\nattribute vec2 uvB;\nvarying vec2 vUvB;\n\n",frame_border_vertex:"\n\n\t// FrameBorder vertex shader\n\tvUvB = uvB;\n\n",frame_common_pars:"\n\n// To be removed - required for both border and background\nuniform vec3 frameSize;\nuniform vec2 textureSize;\n\n",frame_border_pars_fragment:"\n\n// borders sequences are : x:TOP, y:RIGHT, z:BOTTOM, w:LEFT\nuniform vec4 borderWidth;\nuniform vec3 borderColor;\nuniform float borderOpacity;\nuniform vec4 borderRadius;\n\nuniform vec2 cornerTL;\nuniform vec2 cornerTR;\nuniform vec2 cornerBR;\nuniform vec2 cornerBL;\n\nvarying vec2 vUvB;\n\nfloat getEllipticFactor( vec2 uv, vec2 center, float radiusX, float radiusY )\n{\n\n\t\tfloat edx = uv.x - center.x;\n\t\tfloat edy = uv.y - center.y;\n\n\t\tfloat ddx = (edx * edx) / (radiusX * radiusX);\n\t\tfloat ddy = (edy * edy) / (radiusY * radiusY);\n\n\t\treturn ddx + ddy;\n\n}\n\n",frame_border_fragment:"\n\nvec4 borderColor = vec4( borderColor, borderOpacity );\n\n// This could be tweak to produce more smoothing\nfloat mult = 1.0;\n\n// Step 1 ----------------------------------------------\n// Draw the four borders ( top - right - bottom - left )\n// Without worrying about radiuses ( Straight boorders )\n\n// Top\nfloat topBorderUVy = 1.0 - borderWidth.x;\nif( borderWidth.x > 0.0 && vUvB.y > topBorderUVy )\n{\n\n\tfloat w = fwidth( 1.0 - vUvB.y ) * mult;\n\tfloat step = smoothstep( topBorderUVy , topBorderUVy + w , vUvB.y );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n}\n\n// Left\nfloat leftBorderUVx = borderWidth.w;\nif( borderWidth.w > 0.0 && vUvB.x < leftBorderUVx )\n{\n\n\tfloat w = fwidth( vUvB.x ) * mult ;\n\tfloat step = smoothstep( leftBorderUVx , leftBorderUVx - w , vUvB.x );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n}\n\n// Bottom\nfloat bottomBorderUVy = borderWidth.z;\nif( borderWidth.z > 0.0 && vUvB.y < bottomBorderUVy )\n{\n\tfloat w = fwidth( vUvB.y ) * mult;\n\tfloat step = smoothstep( bottomBorderUVy , bottomBorderUVy - w , vUvB.y );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n}\n\n// Right\nfloat rightBorderUVx = 1.0 - borderWidth.y;\nif( borderWidth.y > 0.0 && vUvB.x > rightBorderUVx )\n{\n\tfloat w = fwidth( 1.0 - vUvB.x ) * mult;\n\tfloat step = smoothstep( rightBorderUVx , rightBorderUVx + w , vUvB.x );\n\tdiffuseColor = mix( diffuseColor, borderColor, step );\n}\n\n\n// Step 2 ----------------------------------------------\n// Process each corners ( topLeft, topRight, bottomRight, bottomLeft )\n// To transparentize outside radiuses\n// To draw ellipse border on the corner\n\n\n// Top Left corner\nif( vUvB.x < cornerTL.x && vUvB.y > cornerTL.y ) {\n\n\t\t// Only draw border if width is set\n\t\tif( borderWidth.w + borderWidth.x > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerTL, cornerTL.x - borderWidth.w,  ( 1.0 - cornerTL.y ) - borderWidth.x );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\t\t// Then then radius\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerTL, cornerTL.x, 1.0 - cornerTL.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n// Bottom Left\nif( vUvB.x < cornerBL.x && vUvB.y < cornerBL.y ) {\n\n\t\tif( borderWidth.w + borderWidth.z > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerBL, cornerBL.x - borderWidth.w,  cornerBL.y - borderWidth.z );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerBL, cornerBL.x, cornerBL.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n// Top Right\nif( vUvB.x > cornerTR.x && vUvB.y > cornerTR.y ) {\n\n\t\tif( borderWidth.y + borderWidth.x > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerTR, ( 1.0 - cornerTR.x ) - borderWidth.y,  ( 1.0 - cornerTR.y ) - borderWidth.x );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerTR, 1.0 - cornerTR.x, 1.0 - cornerTR.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n// Bottom Right\nif( vUvB.x > cornerBR.x && vUvB.y < cornerBR.y ) {\n\n\t\tif( borderWidth.y + borderWidth.z > 0.0 ){\n\n\t\t\tfloat borderFactor = getEllipticFactor( vUvB, cornerBR, ( 1.0 - cornerBR.x ) - borderWidth.y,  cornerBR.y - borderWidth.z );\n\t\t\tfloat step = smoothstep( 1.0, 1.0 + fwidth( borderFactor ) * mult, borderFactor );\n\t\t\tdiffuseColor = mix( diffuseColor, borderColor, step );\n\n\t\t}\n\n\t\tfloat radiusFactor = getEllipticFactor( vUvB, cornerBR, 1.0 - cornerBR.x, cornerBR.y );\n\t\tfloat alphaStep = smoothstep( 1.0 , 1.0 + fwidth(radiusFactor) * mult , radiusFactor );\n\t\tdiffuseColor.a = mix( diffuseColor.a, 0.0, alphaStep );\n\n}\n\n",frame_background_pars_fragment:"\n\n#ifdef USE_MAP\n\nvec4 sampleTexture() {\n\n\tvec2 uv = vUv;\n\n\t// default stretch\n\t#if BACKGROUND_MAPPING != 0\n\n\tfloat textureRatio = textureSize.x / textureSize.y;\n\tfloat panelRatio = frameSize.x / frameSize.y;\n\tfloat ratio = panelRatio / textureRatio;\n\tfloat ratio2 = textureRatio / panelRatio;\n\n\t\t// contain\n\t\t#if BACKGROUND_MAPPING == 1\n\t\tif ( textureRatio < panelRatio ) { // repeat on X\n\t\t\tfloat newX = uv.x * ratio;\n\t\t\tnewX += 0.5 - 0.5 * ratio;\n\t\t\tuv.x = newX;\n\t\t} else { // repeat on Y\n\t\t\tfloat newY = uv.y * ratio2;\n\t\t\tnewY += 0.5 - 0.5 * ratio2;\n\t\t\tuv.y = newY;\n\t\t}\n\t\t#else\n\t\t// cover\n\t\tif ( textureRatio < panelRatio ) { // stretch on Y\n\t\t\tfloat newY = uv.y * ratio2;\n\t\t\tnewY += 0.5 - 0.5 * ratio2;\n\t\t\tuv.y = newY;\n\t\t} else { // stretch on X\n\t\t\tfloat newX = uv.x * ratio;\n\t\t\tnewX += 0.5 - 0.5 * ratio;\n\t\t\tuv.x = newX;\n\t\t}\n\n\t\t#endif\n\n\t#endif\n\n\treturn texture2D( map, uv );\n\n}\n#endif\n",frame_background_fragment:"\n#ifdef USE_MAP\n\n\tvec4 textureSample = sampleTexture();\n\tdiffuseColor *= textureSample;\n\n#endif\n"}},"./src/three-mesh-ui.js":(e,t,s)=>{s.d(t,{gO:()=>Qe.Z,zV:()=>$.Z,U9:()=>re,tx:()=>Ye.Z,sV:()=>Je.s,ZP:()=>Ms,Vx:()=>Us});var r={};s.r(r),s.d(r,{COLUMN:()=>u,COLUMN_REVERSE:()=>d,ROW:()=>l,ROW_REVERSE:()=>c,contentDirection:()=>p});var i={};s.r(i),s.d(i,{CENTER:()=>f,END:()=>w,START:()=>_,STRETCH:()=>g,alignItems:()=>m,warnAboutDeprecatedAlignItems:()=>v});var n={};s.r(n),s.d(n,{CENTER:()=>x,END:()=>S,SPACE_AROUND:()=>k,SPACE_BETWEEN:()=>U,SPACE_EVENLY:()=>I,START:()=>b,justifyContent:()=>M});var a={};s.r(a),s.d(a,{NORMAL:()=>P,NOWRAP:()=>F,PRE:()=>V,PRE_LINE:()=>B,PRE_WRAP:()=>T,WHITE_CHARS:()=>j,collapseWhitespaceOnInlines:()=>z,collapseWhitespaceOnString:()=>A,isValid:()=>O,newlineBreakability:()=>W,shouldBreak:()=>D});var o={};s.r(o),s.d(o,{CENTER:()=>q,JUSTIFY:()=>Y,JUSTIFY_CENTER:()=>ee,JUSTIFY_LEFT:()=>J,JUSTIFY_RIGHT:()=>Q,LEFT:()=>X,RIGHT:()=>K,textAlign:()=>te});var h={};s.r(h),s.d(h,{_applyRules:()=>We,addRoot:()=>ke,computeStyle:()=>Ae,elementChangeIdentity:()=>Ze,loadSheets:()=>Fe,querySelectorAll:()=>Ie,removeRoot:()=>Ue});const l="row",c="row-reverse",u="column",d="column-reverse";function p(e,t,s,r){let i=s,n="getOffsetWidth",a="x",o="y",h=["w","y"];0===t.indexOf(u)&&(n="getOffsetHeight",a="y",o="x",h=["x","z"]),-1!==t.indexOf("-reverse")&&h.reverse();for(let t=0;t<e.childrenBoxes.length;t++){const s=e.childrenBoxes[t],l=s.id,c=s[n]();i+=s._margin[h[0]]*r,e.childrenPos[l]={[a]:i+c/2*r,[o]:0},i+=r*(c+s._margin[h[1]])}}const _="start",f="center",w="end",g="stretch";function m(e,t){const s=e.getAlignItems();-1===C.indexOf(s)&&console.warn(`alignItems === '${s}' is not supported`);let r="getInnerWidth",i="x";0===t.indexOf(l)&&(r="getInnerHeight",i="y");const n=e[r]()/2;e.childrenBoxes.forEach((a=>{let o=0;switch(s){case w:case"right":case"bottom":o=0===t.indexOf(l)?-n+a[r]()/2:n-a[r]()/2;break;case _:case"left":case"top":o=0===t.indexOf(l)?n-a[r]()/2:-n+a[r]()/2}e.childrenPos[a.id][i]=o}))}function v(e){-1!==y.indexOf(e)&&console.warn(`alignItems === '${e}' is deprecated and will be remove in 7.x.x. Fallback are 'start'|'end'`)}const C=[_,f,w,g,"top","right","bottom","left"],y=["top","right","bottom","left"],b="start",x="center",S="end",k="space-around",U="space-between",I="space-evenly";function M(e,t,s,r){const i=e.getJustifyContent();-1===R.indexOf(i)&&console.warn(`justifyContent === '${i}' is not supported`);const n=0===t.indexOf("row")?"width":"height",a=e.getChildrenSideSum(n),o=("width"===n?e.innerWidth:e.innerHeight)-a,h=function(e,t){switch(e){case S:return t;case x:return t/2}return 0}(i,2*s-a*Math.sign(s)),l=function(e,t,s,r){const i=Array(e.length).fill(0);if(t>0)switch(s){case U:if(e.length>1){const s=t/(e.length-1)*r;i[0]=0;for(let t=1;t<e.length;t++)i[t]=s*t}break;case I:if(e.length>1){const s=t/(e.length+1)*r;for(let t=0;t<e.length;t++)i[t]=s*(t+1)}break;case k:if(e.length>1){const s=t/e.length*r,n=s/2;i[0]=n;for(let t=1;t<e.length;t++)i[t]=n+s*t}}return i}(e.childrenBoxes,o,i,r),c=0===t.indexOf("row")?"x":"y";e.childrenBoxes.forEach(((t,s)=>{e.childrenPos[t.id][c]-=h-l[s]}))}const R=[b,x,S,k,U,I];const j={"\t":"\t","\n":"\n","\r":"\r"," ":" "},P="normal",F="nowrap",V="pre",B="pre-line",T="pre-wrap",Z=[P,F,V,B,T];function O(e){return-1===Z.indexOf(e)&&(console.warn(`Whitespace::isValid() The provided white-space value ('${e}') is not valid !`),console.warn(`    - Automatic fallback to ('${B}')`),e=B),e}const A=function(e,t){switch(t){case F:case P:e=e.replace(/\n/g," ");case B:e=e.replace(/[ ]{2,}/g," ")}return e},W=function(e){switch(e){case V:case T:case B:return"mandatory"}return null},D=function(e,t,s,r){const i=e[t];switch(r.WHITESPACE){case P:case B:case T:if("mandatory"===i.lineBreak)return!0;if(s+i.xadvance+i.xoffset+i.kerning>r.INNER_WIDTH)return!0;const n=H(e,t,r);return function(e,t,s,r){return!(!e||!e.char)&&(!(t+s<r.INNER_WIDTH)&&r.BREAKON.indexOf(e.char)>-1)}(e[t-1],s,n,r);case V:return"mandatory"===i.lineBreak;default:return!1}},z=function(e,t){if(!e[0])return 0;const s=e[0],r=e[e.length-1];switch(t){case T:s.char&&"\n"===s.char&&e.length>1&&L([s],e[1]),r.char&&"\n"===r.char&&e.length>1&&E([r],e[e.length-2]);break;case B:case F:case P:let i,n=[];for(let t=0;t<e.length;t++){const s=e[t];if(!(s.char&&j[s.char]&&e.length>t))break;n.push(s),i=e[t+1]}L(n,i),n=[],i=null;for(let t=e.length-1;t>0;t--){const s=e[t];if(!(s.char&&j[s.char]&&t>0))break;n.push(s),i=e[t-1]}E(n,i);break;case V:break;default:return console.warn(`whiteSpace: '${t}' is not valid`),0}return s.offsetX};function E(e,t){if(t)for(let s=0;s<e.length;s++){const r=e[s];r.fontFactor=0,r.offsetX=t.offsetX+t.cumulativeWidth}}function L(e,t){if(t)for(let t=0;t<e.length;t++){const s=e[t];s.fontFactor=0,s.offsetX+=s.cumulativeWidth}}function H(e,t,s,r){if(r=r||0,!e[t])return r;const i=e[t];return i.lineBreak?r+i.xadvance:H(e,t+1,s,r+i.xadvance+i.xoffset+i.kerning+s.LETTERSPACING)}s("./src/components/core/Line.js"),s("./src/components/core/Lines.js");var $=s("./src/font/FontLibrary.js"),N=s("./src/components/core/UpdateManager.js"),G=s("./node_modules/three/build/three.module.js");const X="left",K="right",q="center",Y="justify",J="justify-left",Q="justify-right",ee="justify-center";function te(e,t,s,r){for(let i=0;i<t.length;i++){const n=t[i],a=se(n,s,r,i===t.length-1),o=e._padding,h=e._borderWidth,l=(-o.w+o.y)/2+(-h.w+h.y)/2;for(let e=0;e<n.length;e++)n[e].offsetX+=a-l}if(0===s.indexOf(Y))for(let e=0;e<t.length;e++){const i=t[e];if(-1!==s.indexOf("-")&&e===t.length-1)return;const n=r-i.width;if(n<=0)return;let a=0;for(let e=1;e<i.length-1;e++)a+=" "===i[e].char?1:0;const o=n/a;let h=1;s===Q&&(i.reverse(),h=-1);let l=0;for(let e=1;e<=i.length-1;e++){const t=i[e];t.offsetX+=l*h,l+=" "===t.char?o:0}s===Q&&i.reverse()}}const se=(e,t,s,r)=>{switch(t){case J:case Y:case X:return-s/2;case Q:case K:return-e.width+s/2;case q:return-e.width/2;case ee:return r?-e.width/2:-s/2;default:console.warn(`textAlign: '${t}' is not valid`)}};var re=s("./src/utils/font/FontWeight.js"),ie=s("./src/utils/font/FontStyle.js");ie.NORMAL,re.NORMAL,new G.Ilk(16777215),new G.Ltg(.025,.025,.025,.025),new G.Ltg(0,0,0,0),new G.Ilk("black"),new G.Ilk(2236962),new G.Ilk(16777215);var ne=s("./src/font/FontFamily.js");s("./src/utils/Units.js");s("./src/font/FontVariant.js");const ae=/((?:")([^"]*)(?:"))/g,oe=/([ >~+]*)([^+>~ ]+)/g,he=/^[ >~+]+/,le=/(#)([\w_-]+)/,ce=/(\.)([\w_-]+)/g,ue=/(:)([A-z0-9\-_]*)/g,de=/^[^#\.:\[]*/g,pe=/(\[([^\]]*)\])/g,_e=/([^*~$^=]+)(([*~$^]?=)(.*))?/;class fe{constructor(e,t=null){this._type=e,this._value=t}get type(){return this._type}get value(){return this._value}}class we extends fe{constructor(e){super("attribute"),this._value=[];for(let t=0;t<e.length;t++)this._value.push(new ge(e[t]))}get value(){return this._value}}class ge{constructor(e){const t=(e=e.substring(1,e.length-1)).match(_e);this.name=t[1],this.operator=t[3]||"!==",this.value=t[4]?function(e){e[0]!==e[e.length-1]||'"'!==e[0]&&"'"!==e[0]||(e=e.substring(1,e.length-1));return e}(t[4]):void 0}}class me extends fe{constructor(e,t){super(e),this._value=[];for(let e=0;e<t.length;e++)this._value.push(t[e].substring(1))}get value(){return this._value}}class ve{constructor(e){const t=e.match(he);this._query=e,this._combinator=t?t[0].trim():null,this._conditions=function(e){const t=[],s=e.match(pe);s&&t.push(new we(s));const r=(e=e.replace(pe,"")).match(le);r&&t.push(new fe("id",r[2]));const i=e.match(ce);i&&t.push(new me("class",i));const n=e.match(ue);n&&t.push(new me("pseudoClass",n));const a=e.replace(he,"").match(de,"");a&&a[0]&&t.push(new fe("tag",a[0]));return t}(e.replace(he,""))}get conditions(){return this._conditions}get combinator(){return this._combinator}get query(){return this._query}match(e){return this._conditions.every((t=>{switch(t.type){case"id":return e.elementID===t.value;case"class":return e.classList.containsEvery(t.value);case"pseudoClass":return e.pseudoClassList.containsEvery(t.value);case"tag":return e.tagName===t.value;case"attribute":return e.attributes.matchEvery(t.value);default:return console.warn(`CSSQuerySegment::match() - '${t.type}' is not implemented!`),!0}}))}}class Ce extends Array{constructor(...e){super(...e)}match(e){const t=this[this.length-1];if(!t.match(e))return!1;if(1===this.length)return!0;const s=[];let r=e;for(;r.parentUI;)s.push(r.parentUI),r=r.parentUI;if(0===s.length)return!1;let i=e,n=null;for(let e=this.length-2;e>=0;e--){const r=this[e];if(0===s.length)return!1;if(n=s.shift(),t.combinator&&""!==t.combinator){if(">"===t.combinator){if(!r.match(n))return!1;i=n}else if("~"===t.combinator||"+"===t.combinator){const e=n.childrenUIs.indexOf(i);let s;s="~"===t.combinator?n.childrenUIs.slice(e+1):n.childrenUIs.slice(e+1,e+2);for(let e=0;e<s.length;e++)if(r.match(s[e])){i=n;break}}}else{for(;!r.match(n);){if(0===s.length)return!1;if(s.length<e+1)return!1;n=s.shift()}i=n}}return!0}static build(e){const t=e.matchAll(ae),s=e.split("");for(const e of t)for(let t=0;t<e[1].length;t++)s[e.index+t]="_";const r=s.join("").matchAll(oe);if(!r)return[];const i=[];for(const e of r)i.push(e.index);i.push(e.length);const n=new Ce;for(let t=0;t<i.length-1;t++)n.push(new ve(e.substring(i[t],i[t+1])));return n}}class ye{constructor(e,t,s=null){this._query=Ce.build(e),this._specificity=function(e){e instanceof Ce||(e=Ce.build(e));let t=0;for(let s=0;s<e.length;s++){const r=e[s];for(let e=0;e<r.conditions.length;e++){const s=r.conditions[e];switch(s.type){case"id":t+=1e4;break;case"class":case"pseudoClass":case"attribute":t+=100*s.value.length;break;default:t+=1}}}return t}(this._query),this._order=0,this._styles={};for(let e=0;e<t.length;e++){const r=t[e];t[r];let i=t[r];if(i=i.replace(/rem|px|em/g,""),-1!==r.indexOf("color")&&0===i.indexOf("rgba")){const e=i.match(/([\d\.]+)/g);if(4===e.length){const s=r.replace("color","opacity");t[s]&&""!==t[s]||(this._styles[be(s)]=parseFloat(e[3]))}i=`rgb(${e[0]},${e[1]},${e[2]})`}let n=be(r);s&&s[n]&&(n=s[n]),this._styles[n]=i}this._enabled=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get query(){return this._query}get specificity(){return this._specificity}get order(){return this._order}set order(e){this._order=e}get styles(){return this._styles}}function be(e){return e.replace(/-./g,(e=>e[1].toUpperCase()))}class xe{constructor(e){this._condition=e,this._rules=[],this._matchMediaQuery=window.matchMedia(e)}addRule(e){this._rules.push(e)}init(e){this._callback=e,this._matchMediaQuery.addEventListener("change",this.handleMatchMediaChanges),this._matchMediaQuery.matches||this.disableRules()}enableRules(){for(const e of this._rules)e.enabled=!0}disableRules(){for(const e of this._rules)e.enabled=!1}handleMatchMediaChanges=e=>{e.matches?this.enableRules():this.disableRules(),this._callback()}}const Se=[];function ke(e){-1===Se.indexOf(e)&&Se.push(e)}function Ue(e){const t=Se.indexOf(e);-1!==t&&Se.splice(t,1)}function Ie(e,t=null){e instanceof Ce||(e=Ce.build(e)),t||(t=Se),Array.isArray(t)||(t=[t]);let s=[];for(let r=0;r<t.length;r++)s=s.concat(Me(t[r],e));for(let e=s.length-1;e>=0;e--){s.indexOf(s[e])!==e&&s.splice(e,1)}return s}function Me(e,t,s=!0){let r=[];if(s)for(let s=0;s<e.childrenUIs.length;s++)r=r.concat(Me(e.childrenUIs[s],t));if(t[0].match(e)){if(1===t.length)return r.push(e),r;const s=t.slice(1);if(s&&""!==s)if(s[0].combinator&&""!==s[0].combinator)if(">"===s[0].combinator)for(let t=0;t<e.childrenUIs.length;t++)r=r.concat(Me(e.childrenUIs[t],s,!1));else{if(!e.parentUI||"~"!==s[0].combinator&&"+"!==s[0].combinator)throw new Error(`UIDocument::querySelectorAll() - The provided css combinator('${s[0].combinator}') is not implemented`);{const t=e.parentUI.childrenUIs.indexOf(e);let i;i="~"===s[0].combinator?e.parentUI.childrenUIs.slice(t+1):e.parentUI.childrenUIs.slice(t+1,t+2);for(let e=0;e<i.length;e++)r=r.concat(Me(i[e],s,!1))}}else for(let t=0;t<e.childrenUIs.length;t++)r=r.concat(Me(e.childrenUIs[t],s))}return r}let Re=null,je=null,Pe=[];function Fe(e=!1){if(e&&document){for(let e=0;e<Pe.length;e++){let t=Pe[e];t.disconnect(),t=null}Pe=[],function(e){const t=new MutationObserver(Ve);t.observe(e,{childList:!0,subtree:!0}),Pe.push(t)}(document.documentElement);const e=document.querySelectorAll('link[media="vr"],style[media="vr"]');for(let t=0;t<e.length;t++)Te(e[t])}if(Re=[],je=[],document&&document.styleSheets){for(const e of document.styleSheets)if("vr"===e.media.mediaText){const{rules:t,conditions:s}=Ee(e.cssRules);Re=Re.concat(t),je=je.concat(s)}for(let e=0;e<Re.length;e++)Re[e].order=e;Re.sort(De);for(const e of je)e.init(We)}We()}function Ve(e){let t=!1;e.forEach((function(e){for(let s=0;s<e.addedNodes.length;s++)Be(e.addedNodes[s])&&(t=!0);for(let s=0;s<e.removedNodes.length;s++)Be(e.removedNodes[s])&&(t=!0)})),t&&Fe(!0)}function Be(e){return"LINK"===e.tagName||"STYLE"===e.tagName&&"vr"===e.getAttribute("media")}function Te(e){const t=new MutationObserver((function(e){Fe(!0)}));t.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),Pe.push(t)}function Ze(e){Oe(e),e.traverse((e=>{e.isUI&&Oe(e)}))}function Oe(e){let t={},s=!1;for(const r of Re)r.enabled&&r.query.match(e)&&(t={...t,...r.styles},s=!0);s&&e.set(t)}function Ae(e){const t=[];e.parentUI&&t.push(e.parentUI),e.traverse((e=>{e.isUI&&t.push(e)}));for(const e of t){let t={},s=!1;for(const r of Re)r.enabled&&r.query.match(e)&&(t={...t,...r.styles},s=!0);s&&e.set(t)}}function We(){for(const e of Re){if(!e.enabled)continue;const t=Ie(e.query);for(const s of t)s.set(e.styles)}}function De(e,t){return e.specificity<t.specificity?-1:e.specificity>t.specificity?1:e.order<t.order?-1:e.order>t.order?1:0}const ze={flexDirection:"contentDirection"};function Ee(e,t=null){let s=[],r=null,i=[];t&&""!==t&&(r=new xe(t),i.push(r));for(let n=0;n<e.length;n++){const a=e[n];if(a.selectorText){const e=new ye(a.selectorText,a.style,ze);s.push(e),r&&r.addRule(e)}else if(a.conditionText){let e=t;e&&""!==e?e+=` and ${a.conditionText}`:e=a.conditionText;const{rules:r,conditions:n}=Ee(a.cssRules,e);s=s.concat(r),i=i.concat(n)}}return{rules:s,conditions:i}}var Le=s("./src/frame/materials/FrameMaterial.js");s("./src/frame/utils/FrameMaterialUtils.js");const He=[[[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]}],[{width:.2,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],$e=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],Ne=[[[{width:1/12,chars:[{lowerCase:"й",upperCase:"Й"},{lowerCase:"q",upperCase:"Q"}]},{width:1/12,chars:[{lowerCase:"ц",upperCase:"Ц"},{lowerCase:"w",upperCase:"W"}]},{width:1/12,chars:[{lowerCase:"у",upperCase:"У"},{lowerCase:"e",upperCase:"E"}]},{width:1/12,chars:[{lowerCase:"к",upperCase:"К"},{lowerCase:"r",upperCase:"R"}]},{width:1/12,chars:[{lowerCase:"е",upperCase:"Е"},{lowerCase:"t",upperCase:"T"}]},{width:1/12,chars:[{lowerCase:"н",upperCase:"Н"},{lowerCase:"y",upperCase:"Y"}]},{width:1/12,chars:[{lowerCase:"г",upperCase:"Г"},{lowerCase:"u",upperCase:"U"}]},{width:1/12,chars:[{lowerCase:"ш",upperCase:"Ш"},{lowerCase:"i",upperCase:"I"}]},{width:1/12,chars:[{lowerCase:"щ",upperCase:"Щ"},{lowerCase:"o",upperCase:"O"}]},{width:1/12,chars:[{lowerCase:"з",upperCase:"З"},{lowerCase:"p",upperCase:"P"}]},{width:1/12,chars:[{lowerCase:"х",upperCase:"Х"},{lowerCase:"{",upperCase:"["}]},{width:1/12,chars:[{lowerCase:"ъ",upperCase:"Ъ"},{lowerCase:"}",upperCase:"]"}]}],[{width:1/12,chars:[{lowerCase:"ф",upperCase:"Ф"},{lowerCase:"a",upperCase:"A"}]},{width:1/12,chars:[{lowerCase:"ы",upperCase:"Ы"},{lowerCase:"s",upperCase:"S"}]},{width:1/12,chars:[{lowerCase:"в",upperCase:"В"},{lowerCase:"d",upperCase:"D"}]},{width:1/12,chars:[{lowerCase:"а",upperCase:"А"},{lowerCase:"f",upperCase:"F"}]},{width:1/12,chars:[{lowerCase:"п",upperCase:"П"},{lowerCase:"g",upperCase:"G"}]},{width:1/12,chars:[{lowerCase:"р",upperCase:"Р"},{lowerCase:"h",upperCase:"H"}]},{width:1/12,chars:[{lowerCase:"о",upperCase:"О"},{lowerCase:"j",upperCase:"J"}]},{width:1/12,chars:[{lowerCase:"л",upperCase:"Л"},{lowerCase:"k",upperCase:"K"}]},{width:1/12,chars:[{lowerCase:"д",upperCase:"Д"},{lowerCase:"l",upperCase:"L"}]},{width:1/12,chars:[{lowerCase:"ж",upperCase:"Ж"},{lowerCase:":",upperCase:";"}]},{width:1/12,chars:[{lowerCase:"э",upperCase:"Э"},{lowerCase:'"',upperCase:"'"}]},{width:1/12,chars:[{lowerCase:"ё",upperCase:"Ё"},{lowerCase:"|",upperCase:"\\"}]}],[{width:.125,command:"shift",chars:[{icon:"shift"}]},{width:1/12,chars:[{lowerCase:"я",upperCase:"Я"},{lowerCase:"z",upperCase:"Z"}]},{width:1/12,chars:[{lowerCase:"ч",upperCase:"Ч"},{lowerCase:"x",upperCase:"X"}]},{width:1/12,chars:[{lowerCase:"с",upperCase:"С"},{lowerCase:"c",upperCase:"C"}]},{width:1/12,chars:[{lowerCase:"м",upperCase:"М"},{lowerCase:"v",upperCase:"V"}]},{width:1/12,chars:[{lowerCase:"и",upperCase:"И"},{lowerCase:"b",upperCase:"B"}]},{width:1/12,chars:[{lowerCase:"т",upperCase:"Т"},{lowerCase:"n",upperCase:"N"}]},{width:1/12,chars:[{lowerCase:"ь",upperCase:"Ь"},{lowerCase:"m",upperCase:"M"}]},{width:1/12,chars:[{lowerCase:"б",upperCase:"Б"},{lowerCase:",",upperCase:""}]},{width:1/12,chars:[{lowerCase:"ю",upperCase:"Ю"},{lowerCase:".",upperCase:""}]},{width:.125,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.3,command:"switch",chars:[{lowerCase:"АБВ"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],Ge=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"ü",upperCase:"Ü"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"ö",upperCase:"Ö"}]},{width:1/11,chars:[{lowerCase:"ä",upperCase:"Ä"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],Xe=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"ñ",upperCase:"Ñ"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],Ke=[[[{width:.1,chars:[{lowerCase:";",upperCase:":"},{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"ς",upperCase:"ς"},{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"ε",upperCase:"Ε"},{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"ρ",upperCase:"Ρ"},{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"τ",upperCase:"Τ"},{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"υ",upperCase:"Υ"},{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"θ",upperCase:"Θ"},{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"ι",upperCase:"Ι"},{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"ο",upperCase:"Ο"},{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"π",upperCase:"Π"},{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"α",upperCase:"Α"},{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"σ",upperCase:"Σ"},{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"δ",upperCase:"Δ"},{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"φ",upperCase:"Φ"},{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"γ",upperCase:"Γ"},{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"η",upperCase:"Η"},{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"ξ",upperCase:"Ξ"},{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"κ",upperCase:"Κ"},{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"λ",upperCase:"Λ"},{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"ζ",upperCase:"Ζ"},{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"χ",upperCase:"Χ"},{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"ψ",upperCase:"Ψ"},{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"ω",upperCase:"Ω"},{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"β",upperCase:"Β"},{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"ν",upperCase:"Ν"},{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"μ",upperCase:"Μ"},{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],qe=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"å",upperCase:"Å"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"æ",upperCase:"Æ"}]},{width:1/11,chars:[{lowerCase:"ø",upperCase:"Ø"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]];new G.dpR;var Ye=s("./src/font/msdf/utils/MSDFFontMaterialUtils.js"),Je=s("./src/renderers/shaders/ShaderChunkUI.js"),Qe=s("./src/elements/basic/BlockElement.js"),et=s("./src/elements/basic/BoxElement.js"),tt=s("./src/core/elements/MeshUIBaseElement.js"),st=s("./src/core/properties/BaseProperty.js");class rt extends st.Z{constructor(){super("textContent",null,!1)}update(e,t){this._value,this._value.match(/\n/),e._glyphs._needsUpdate=!0,e._whiteSpace._needsProcess=!0}}class it extends st.Z{constructor(){super("inlines",null,!1),this._value=null}process(e){if(this._value=e._glyphs._value.map((e=>e.asInlineGlyph())),this._value.length){this._value[0].paddingLeft=e._padding._value.w,this._value[0].marginLeft=e._margin._value.w;const t=this._value.length-1;this._value[t].paddingRight=e._padding._value.y,this._value[t].marginRight=e._margin._value.y}e._fontSize._needsProcess=!0,e._lineBreak._needsProcess=!0,e._fontKerning._needsProcess=!0,e._layouter._needsProcess=!0}get value(){return this._value}}class nt extends st.Z{constructor(){super("glyphs",null,!1),this._needsUpdate=!1,this._value=null}process(e){e._font._fontVariant&&e._font._fontVariant.isReady&&(this._value=e._whiteSpace._whiteSpacedContent.split("").map((t=>e._font._fontVariant.getTypographicGlyph(t))),this._value&&(e._inlines._needsProcess=!0))}get value(){return this._value}}var at=s("./src/core/properties/style-properties/StyleColorProperty.js");class ot extends at.Z{constructor(){super("color","inherit",!1),this.output=this._outputValue}computeOutputValue(e){"inherit"===this._input?ht(this.getInheritedInput(e),this._value):ht(this._input,this._value)}}function ht(e,t){e instanceof G.Ilk||t instanceof G.Ilk?t.set(e):t=new G.Ilk(e)}class lt extends st.Z{constructor(e="- ,.:?!\n"){super("lineBreak",e,!0),this._newLineBreakability=null}update(e,t){this._needsProcess=!0}process(e){const t=e._whiteSpace._newLineBreakability;if(e._inlines._value)for(let s=0;s<e._inlines._value.length;s++){const r=e._inlines._value[s],i=r.char;let n=null;void 0!==i&&(t!==F&&(this._value.includes(i)||i.match(/\s/g))&&(n="possible"),i.match(/\n/g)&&(n=t)),r.lineBreak=n}}get value(){return this._value}}class ct extends st.Z{constructor(){super("layouter",null,!1),this._value=null}update(e,t){this._value=e._parent.find((e=>e.isUI&&e.isText)),this._needsProcess=!0}process(e){this._value&&(this._value._layouter._needsProcess=!0)}}class ut extends at.Z{constructor(e){super("backgroundColor",e,!1),this._allowsInherit=!1,this._input="transparent"}computeOutputValue(e){"inherit"===this._input?dt(this.getInheritedInput(e),this._value):dt(this._input,this._value)}}function dt(e,t){e instanceof G.Ilk||t instanceof G.Ilk?t.set(e):t=new G.Ilk(e)}var pt=s("./src/core/properties/style-properties/font/FontStyleProperty.js");class _t extends pt.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}}var ft=s("./src/core/properties/style-properties/font/FontWeightProperty.js");class wt extends ft.Z{constructor(){super()}computeOutputValue(e){const t=this.getInheritedInput(e),s=gt[t];this._value=s||t}}const gt={light:"100",normal:"400",bold:"700",bolder:"900"};var mt=s("./src/core/properties/style-properties/font/FontFamilyProperty.js");class vt extends mt.Z{constructor(){super("fontFamily","inherit",!0),this._input="inherit",this._needsUpdate=!0,this._allowsInherit=!1}computeOutputValue(e){let t=this._inheritedInput;if("inherit"===t&&(t=this.getInheritedInput(e)),t instanceof ne.Z)this._value=t,e._font._needsUpdate=!0;else if("string"==typeof t){const s=$.Z.getFontFamily(t);s?(this._value=s,e._font._needsUpdate=!0):console.warn(`(.style) fontFamily, the font '${t}' is not registered. Aborted.`)}else console.warn("(.style) fontFamily requires a registered fontFamily instance, or the id of a registered fontFamily."),console.warn("If you want to set a specific font, please use .font property instead.")}get value(){return this._value}}var Ct=s("./src/core/properties/style-properties/font/WhiteSpaceProperty.js");class yt extends Ct.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited,this._whiteSpacedContent="",this._stringCollapser=this.emptyStrategyLogic,this._inlineCollapser=this.emptyStrategyLogic,this._inlineWrapper=this.emptyStrategyLogic}_computeFromInherited(e){switch(super._computeFromInherited(e),this._newLineBreakability=xt(this._value),this._value){case"nowrap":case"normal":this._stringCollapser=St;break;case"pre-line":this._stringCollapser=kt;break;default:this._stringCollapser=Ut}switch(this._value){case"pre-line":case"nowrap":case"normal":this._inlineCollapser=Pt;break;case"pre-wrap":this._inlineCollapser=jt;break;default:this._inlineCollapser=Ft}switch(this._value){case"pre-line":case"pre-wrap":case"normal":this._inlineWrapper=It;break;case"pre":this._inlineWrapper=Mt;break;default:this._inlineWrapper=Rt}this._needsProcess=!0}process(e){e.isInline&&!e.isInlineBlock&&(this._whiteSpacedContent=this._stringCollapser(e._textContent._value),e._glyphs._needsProcess=!0)}}const bt={"\t":"\t","\n":"\n","\r":"\r"," ":" "},xt=function(e){switch(e){case"pre":case"pre-wrap":case"pre-line":return"mandatory"}return null};function St(e){return kt(e.replace(/\n/g," "))}function kt(e){return e.replace(/[ ]{2,}/g," ")}function Ut(e){return e}function It(e,t,s,r){const i=e[t];if("mandatory"===i.lineBreak)return!0;if(s+i.xadvance+i.xoffset+i.kerning>r.INNER_WIDTH)return!0;const n=Tt(e,t,r);return function(e,t,s,r){return!(!e||!e.char)&&(!(t+s<r.INNER_WIDTH)&&r.BREAKON.indexOf(e.char)>-1)}(e[t-1],s,n,r)}function Mt(e,t,s,r){return"mandatory"===e[t].lineBreak}function Rt(){return!1}function jt(e){if(!e[0])return 0;const t=e[0],s=e[e.length-1];return t.char&&"\n"===t.char&&e.length>1&&Bt([t],e[1]),s.char&&"\n"===s.char&&e.length>1&&Vt([s],e[e.length-2]),t.offsetX}function Pt(e){if(!e[0])return 0;let t,s=[];for(let r=0;r<e.length;r++){const i=e[r];if(!(i.char&&bt[i.char]&&e.length>r))break;s.push(i),t=e[r+1]}Bt(s,t),s=[],t=null;for(let r=e.length-1;r>0;r--){const i=e[r];if(!(i.char&&bt[i.char]&&r>0))break;s.push(i),t=e[r-1]}return Vt(s,t),e[0].offsetX}function Ft(e){return e[0]?e[0].offsetX:0}function Vt(e,t){if(t)for(let s=0;s<e.length;s++){const r=e[s];r.fontFactor=0,r.offsetX=t.offsetX+t.cumulativeWidth,r.cumulativeWidth=0}}function Bt(e,t){if(t)for(let s=0;s<e.length;s++){const r=e[s];r.fontFactor=0,r.offsetX=t.offsetX,r.cumulativeWidth=0}}function Tt(e,t,s,r){if(r=r||0,!e[t])return r;const i=e[t];return i.lineBreak?r+i.xadvance:Tt(e,t+1,s,r+i.xadvance+i.xoffset+i.kerning+s.LETTERSPACING)}var Zt=s("./src/core/properties/style-properties/font/LetterSpacingProperty.js");class Ot extends Zt.Z{constructor(){super(),this._input="inherit",this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}_computeFromInherited(e){super._computeFromInherited(e),e._fontSize._needsProcess=!0,e._layouter._needsProcess=!0}}var At=s("./src/core/properties/style-properties/SubStyleProperty.js");class Wt extends At.Z{constructor(){super("fontSize","inherit",!0),this._allowsInherit=!1}computeOutputValue(e){this._value=this._inheritedInput,e._font._fontVariant&&(e._layouter._needsProcess=!0)}process(e){if(!e._font._fontVariant||!e._font._fontVariant.isReady)return;const t=this._value/e._font._fontVariant.typographic.size,s=e._inlines._value;for(let e=0;e<s.length;e++){const r=s[e];r.resetOffsets(),r.fontSize=this._value,r.fontFactor=t}}get value(){return this._value}}var Dt=s("./src/core/properties/geometry/SegmentsProperty.js");class zt extends Dt.Z{constructor(){super("segments",1,!1),this._notInheritedValue=void 0}update(e,t){this._notInheritedValue=this._value,"inherit"===this._notInheritedValue&&(this._notInheritedValue=this.getInheritedInput(e)),e._layouter._needsUpdate=!0}set value(e){this._value!==e&&(this._value=e,this._needsUpdate=!0)}get value(){return"inherit"===this._value?this._notInheritedValue:this._value}}class Et extends zt{constructor(){super(),this._value="inherit"}}var Lt=s("./src/core/properties/style-properties/font/FontKerningProperty.js");class Ht extends Lt.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}_computeFromInherited(e){super._computeFromInherited(e),e._parent._value._layouter._needsProcess=!1}process(e){if("none"!==this._value){const t=e._whiteSpace._whiteSpacedContent,s=e._inlines._value;for(let r=1;r<s.length;r++){const i=t[r-1]+t[r];s[r].kerning=e._font._fontVariant.getKerningAmount(i)}}}}class $t extends st.Z{constructor(){super("children",null,!1),this._uis=[]}update(e,t){}process(e){}_compute(e){}dispose(){}}var Nt=s("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js");class Gt extends st.Z{constructor(){super("renderer")}render(e){if(!e._inlines._value||!e._inlines._value.length)return;const t=e._inlines._value.map((t=>e._font._fontVariant.getGeometricGlyph(t,e).translate(t.offsetX,t.offsetY,0))),s=(0,Nt.qf)(t);e.setFontMesh(new G.Kj0(s,e.fontMaterial)),e._fontMesh.renderOrder=1/0}}var Xt=s("./src/core/properties/style-properties/font/TextAlignProperty.js");class Kt extends Xt.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!1}computeOutputValue(e){this._value=this._inheritedInput,e._layouter._needsProcess=!0}}class qt extends tt.Z{constructor(e=null){const t={};t.children||(t.children=$t),t.textContent||(t.textContent=rt),t.glyphs||(t.glyphs=nt),t.inlines||(t.inlines=it),t.layouter||(t.layouter=ct),t.renderer||(t.renderer=Gt),t.fontFamily||(t.fontFamily=vt),t.fontWeight||(t.fontWeight=wt),t.fontStyle||(t.fontStyle=_t),t.fontSize||(t.fontSize=Wt),t.color||(t.color=ot),t.backgroundColor||(t.backgroundColor=ut),t.lineBreak||(t.lineBreak=lt),t.letterSpacing||(t.letterSpacing=Ot),t.whiteSpace||(t.whiteSpace=yt),t.segments||(t.segments=Et),t.textAlign||(t.textAlign=Kt),t.fontKerning||(t.fontKerning=Ht),super(t,e),Object.defineProperties(this,{isInline:{configurable:!1,enumerable:!0,value:!0}})}add(e){const t=[];for(let e=0;e<arguments.length;e++){const s=arguments[e];!s.isUI||s.isInline?(t.push(s),s.position.z=.005):console.warn("Block element can only contain Box elements.",s)}return super.add(...t)}_rebuildParentUI=()=>{super._rebuildParentUI(),this._layouter._needsUpdate=!0};set textContent(e){this._textContent.value=e}get textContent(){return this._textContent._value}set invertAlpha(e){this._invertAlpha.value=e}get invertAlpha(){return this._invertAlpha._value}}var Yt=s("./src/core/properties/TextContentEmpty.js");class Jt extends Yt.Z{constructor(){super("textContent",null,!1),this._needsUpdate=!1}update(e,t){for(let t=e.children.length-1;t>=0;t--){const s=e.children[t];s.isUI&&(e.remove(s),s.clear())}this._value&&e.add(new qt({name:"anonymousInline",textContent:this._value}))}}var Qt=s("./src/core/properties/TextLayouter.js");class es extends Xt.Z{constructor(){super(),this._allowsInherit=!1,this._needsUpdate=!0}computeOutputValue(e){this._value=this._inheritedInput,this._needsProcess=!0}process(e){!function(e){const t=e._layouter._value,s=e._textAlign._value,r=e._bounds._innerWidth;for(let s=0;s<t.length;s++){const r=t[s],i=ts(e,r,s===t.length-1),n=e._padding._value,a=e._borderWidth._value,o=(-n.w+n.y)/2+(-a.w+a.y)/2;for(let e=0;e<r.length;e++)r[e].offsetX+=i-o}if(0===s.indexOf("justify"))for(let e=0;e<t.length;e++){const i=t[e];if(-1!==s.indexOf("-")&&e===t.length-1)return;const n=r-i.width;if(n<=0)return;let a=0;for(let e=1;e<i.length-1;e++)a+=" "===i[e].char?1:0;const o=n/a;let h=1;"justify-right"===s&&(i.reverse(),h=-1);let l=0;for(let e=1;e<=i.length-1;e++){const t=i[e];t.offsetX+=l*h,l+=" "===t.char?o:0}"justify-right"===s&&i.reverse()}}(e),e._renderer._needsRender=!0}}function ts(e,t,s){switch(e._textAlign._value){case"justify-left":case"justify":case"left":return-e._bounds._innerWidth/2;case"justify-right":case"right":return-t.width+e._bounds._innerWidth/2;case"center":return-t.width/2;case"justify-center":return s?-t.width/2:-e._bounds._innerWidth/2;default:console.warn(`textAlign: '${e._textAlign._value}' is not valid`)}}var ss=s("./src/core/properties/style-properties/flex/FlexDirectionProperty.js");class rs extends ss.Z{constructor(){super(),this._value=this._input="column",this._allowsInherit=!1,this._needsUpdate=!0}computeOutputValue(e){this._value=this._inheritedInput}}var is=s("./src/core/properties/style-properties/flex/JustifyContentProperty.js"),ns=s("./src/core/properties/style-properties/flex/AlignItemsProperty.js"),as=s("./src/core/properties/style-properties/font/LineHeightProperty.js");class os extends as.Z{constructor(){super(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}}class hs extends Lt.Z{constructor(){super(),this._value=this._input=this.getDefaultValue(),this._allowsInherit=!1,this.computeOutputValue=this._computeFromInherited}_computeFromInherited(e){super._computeFromInherited(e)}}var ls=s("./src/core/properties/BoundsBox.js");class cs extends ls.Z{constructor(){super(),this._innerWidth=1/0,this._innerHeight=0}}class us extends st.Z{constructor(){super("children",null,!1),this._uis=[],this._inlines=[],this._boxes=[]}update(e,t){this._compute(e),this._needsProcess=!0}process(e){this._compute(e)}_compute(e){this._uis=e.children.filter((e=>e.visible&&e.isUI)),this._inlines=this._uis.filter((e=>e.isInline))}dispose(){this._inlines=null}}class ds extends st.Z{constructor(){super("autosize")}process(e){if(e._layouter._value&&e._layouter._value.length){const t=e._layouter._value,s=e._padding._value,r=e._borderWidth._value;e._width._auto&&e._bounds.setOffsetWidth(e,t.width+s.w+s.y+r.w+r.y),e._height._auto&&e._bounds.setOffsetHeight(e,t.height+s.x+s.z+r.x+r.z)}}}var ps=s("./src/core/properties/rendering/RendererPropertyBox.js");class _s extends ps.Z{constructor(){super("renderer"),this._needsUpdate=!1}render(e){super.render(e);for(const t of e._children._inlines)t._renderer.render(t);e.performAfterUpdate()}}class fs extends et.Z{constructor(e=null){const t={};t.flexDirection=rs,t.justifyContent=is.Z,t.alignItems=ns.Z,t.bounds=cs,t.autoSize=ds,t.renderer=_s,t.children||(t.children=us),t.textContent||(t.textContent=Jt),t.layouter||(t.layouter=Qt.Z),t.lineHeight||(t.lineHeight=os),t.textAlign||(t.textAlign=es),t.whiteSpace||(t.whiteSpace=yt),t.fontKerning||(t.fontKerning=hs),t.segments||(t.segments=zt),e||(e={}),e.width||(e.width="100%"),e.fontSide||(e.fontSide=0),super(t,e),Object.defineProperties(this,{isText:{configurable:!1,enumerable:!0,value:!0}})}add(e){const t=[];let s=!1;for(let e=0;e<arguments.length;e++){const r=arguments[e];!r.isUI||r.isInline?(r.isInline&&(s=!0),t.push(r),r.position.z=.005,r.renderOrder=r.id):console.warn("Block element can only contain Box elements.",r)}return t.length>0&&super.add(...t),s&&(this._layouter._needsProcess=!0),this}set textContent(e){for(let e=this.children.length-1;e>=0;e--){const t=this.children[e];t.isUI&&(this.remove(t),t.clear())}e&&this.add(new qt({name:"anonymousInline",textContent:e}))}get textContent(){return super.textContent}set invertAlpha(e){this._invertAlpha.value=e}get invertAlpha(){return this._invertAlpha._value}get lines(){return this._layouter._value}}var ws=s("./src/core/properties/style-properties/background/BackgroundColorProperty.js"),gs=s("./src/components/core/Inline.js");class ms extends st.Z{constructor(){super("inlines",null,!1),this._value=[]}process(e){this._value[0].paddingLeft=e._padding._value.w,this._value[0].marginLeft=e._margin._value.w;const t=this._value.length-1;this._value[t].paddingRight=e._padding._value.y,this._value[t].marginRight=e._margin._value.y}}var vs=s("./src/frame/Frame.js");class Cs extends st.Z{constructor(){super("renderer")}render(e){e._backgroundMesh||e.setBackgroundMesh(new vs.Z(e)),e._backgroundMesh.position.x=e._inlines._value[0].offsetX+e._inlines._value[0].width/2,e._backgroundMesh.position.y=e._inlines._value[0].offsetY+e._inlines._value[0].lineBase/2,e._bounds.render(e)}}class ys extends st.Z{constructor(){super("bounds",null,!1),this._size=new G.Pa4(1,1,1)}update(e,t){this.output(t),this._needsRender=!0}render(e){this._size.x=e._inlines._value[0].width,this._size.y=e._inlines._value[0].height}output(e){e.size=this._size}}class bs extends tt.Z{constructor(e=null){const t={};t.children||(t.children=$t),t.bounds||(t.bounds=ys),t.inlines||(t.inlines=ms),t.layouter||(t.layouter=ct),t.renderer||(t.renderer=Cs),t.fontFamily||(t.fontFamily=mt.Z),t.fontWeight||(t.fontWeight=ft.Z),t.fontStyle||(t.fontStyle=pt.Z),t.fontSize||(t.fontSize=Wt),t.backgroundColor||(t.backgroundColor=ws.Z),t.lineBreak||(t.lineBreak=lt),t.letterSpacing||(t.letterSpacing=Ot),t.whiteSpace||(t.whiteSpace=yt),t.fontKerning||(t.fontKerning=Lt.Z),e||(e={}),e.backgroundSize||(e.backgroundSize="cover"),super(t,e),Object.defineProperties(this,{isInline:{configurable:!1,enumerable:!0,value:!0},isInlineBlock:{configurable:!1,enumerable:!0,value:!0}}),this._inlines._value=[new xs(this)],this.backgroundMaterial=new Le.Z,this._renderer.render(this)}clear(){for(const e of this._inlines._value)e.clear();return super.clear()}bindBackgroundMeshProperties(){this._bounds._size=this._backgroundMesh.scale,this._bounds._needsUpdate=!0}unbindBackgroundMeshProperties(){this._bounds._size=new G.Pa4(1,1,1),this._bounds._needsUpdate=!0}add(e){const t=[];for(let e=0;e<arguments.length;e++){const s=arguments[e];s.isUI?console.warn("ThreeMeshUI::InlineBlockElement cannot contains UI Elements.",s):(t.push(s),s.position.z=.005)}return super.add(...t)}}class xs extends gs.Z{constructor(e){super(),this._uiElement=e}get xadvance(){const e=this._uiElement._padding._value,t=this._uiElement._width;return e.w+e.y+t.value}get width(){return this._uiElement._width.value}get height(){return this._uiElement._height.value}get lineHeight(){return this._uiElement._height.value}get lineBase(){return this._uiElement._height.value}clear(){this._uiElement=null}}const Ss=new G.dpR;class ks extends Qe.Z{constructor(e){let t;if(e||(e={}),e.width||(e.width=1),e.height||(e.height=.4),e.margin||(e.margin=.003),e.padding||(e.padding=.01),super(),this.currentPanel=0,this.isLowerCase=!0,this.charsetCount=1,e.language||navigator.language)switch(e.language||navigator.language){case"fr":case"fr-CH":case"fr-CA":t=He;break;case"ru":this.charsetCount=2,t=Ne;break;case"de":case"de-DE":case"de-AT":case"de-LI":case"de-CH":t=Ge;break;case"es":case"es-419":case"es-AR":case"es-CL":case"es-CO":case"es-ES":case"es-CR":case"es-US":case"es-HN":case"es-MX":case"es-PE":case"es-UY":case"es-VE":t=Xe;break;case"el":this.charsetCount=2,t=Ke;break;case"nord":t=qe;break;default:t=$e}else t=$e;this.keys=[],this.panels=t.map((t=>{const s=e.height/t.length-2*e.margin,r=new Qe.Z({boxSizing:"border-box",width:e.width+2*e.padding,height:e.height+2*e.padding,padding:e.padding,fontFamily:e.fontFamily,fontTexture:e.fontTexture,backgroundColor:16748544,backgroundOpacity:e.backgroundOpacity});return r.charset=0,r.add(...t.map((t=>{const i=new Qe.Z({width:e.width,height:s,margin:e.margin,flexDirection:"row",justifyContent:"center"}),n=[];return t.forEach((t=>{const i=new fs({boxSizing:"border-box",width:e.width*t.width-2*e.margin,height:s,margin:e.margin,alignItems:"center",textAlign:"center",backgroundColor:0,backgroundOpacity:.8}),a=t.chars[r.charset].lowerCase||t.chars[r.charset].icon||"undif";if("enter"===a&&e.enterTexture||"shift"===a&&e.shiftTexture||"backspace"===a&&e.backspaceTexture){const t=(()=>{switch(a){case"backspace":return e.backspaceTexture;case"enter":return e.enterTexture;case"shift":return e.shiftTexture;default:console.warn("There is no icon image for this key")}})();Ss.load(t,(e=>{i.add(new bs({width:.65*s,height:.65*s,backgroundSize:"contain",backgroundTexture:e}))}))}else i.set({textContent:a});i.type="Key",i.info=t,i.info.input=a,i.panel=r,n.push(i),this.keys.push(i)})),i.add(...n),i}))),r})),this.add(this.panels[0])}setNextPanel(){this.panels.forEach((e=>{this.remove(e)})),this.currentPanel=(this.currentPanel+1)%this.panels.length,this.add(this.panels[this.currentPanel])}setNextCharset(){this.panels[this.currentPanel].charset=(this.panels[this.currentPanel].charset+1)%this.charsetCount,this.keys.forEach((e=>{if(!this.panels[this.currentPanel].getObjectById(e.id))return;const t=e.info.chars[e.panel.charset]||e.info.chars[0],s=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(!e.childrenTexts.length)return;const r=e.childrenTexts[0];e.info.input=s,r.set({textContent:s})}))}toggleCase(){this.isLowerCase=!this.isLowerCase,this.keys.forEach((e=>{const t=e.info.chars[e.panel.charset]||e.info.chars[0],s=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(!e.childrenTexts.length)return;const r=e.childrenTexts[0];e.info.input=s,r.set({content:s})}))}}const Us=()=>N.Z.update7xx(),Is={Block:Qe.Z,Text:fs,Inline:qt,InlineBlock:bs,Keyboard:ks,FontLibrary:$.Z,FontStyle:ie,FontWeight:re,update:Us,TextAlign:o,Whitespace:a,JustifyContent:n,AlignItems:i,ContentDirection:r,MSDFFontMaterialUtils:Ye.Z,ShaderChunkUI:Je.s,VRDocument:h,addRoot:ke,removeRoot:Ue,querySelectorAll:Ie,loadSheets:Fe};void 0!==s.g&&(s.g.ThreeMeshUI=Is);const Ms="ex__frame_materials"!=s.j?Is:null},"./src/utils/Behavior.js":(e,t,s)=>{s.d(t,{Z:()=>r});class r{constructor(e){this._subject=e}attach(){console.error(`Behavior::attach() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}act(){throw new Error(`Behavior::act() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}detach(){console.error(`Behavior::detach() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}clear(){}}},"./src/utils/NumberUtils.js":(e,t,s)=>{s.d(t,{G:()=>r});const r=function(e,t,s=6){return e.toFixed(s)===t.toFixed(s)}},"./src/utils/Units.js":(e,t,s)=>{s.d(t,{JH:()=>n,UV:()=>i,rP:()=>o,yt:()=>r});const r="rem",i="em",n="%",a=[r,i,n],o=function(e){return-1===a.indexOf(e)?r:e}},"./src/utils/font/FontStyle.js":(e,t,s)=>{s.r(t),s.d(t,{ITALIC:()=>i,NORMAL:()=>r,OBLIQUE:()=>n,obliqueCustomAngle:()=>a});const r="normal",i="italic",n="oblique";function a(e){return`${n} ${e=e<-90?-90:e>90?90:e}deg`}},"./src/utils/font/FontWeight.js":(e,t,s)=>{s.r(t),s.d(t,{BOLD:()=>u,BOLDER:()=>_,LIGHTER:()=>r,NORMAL:()=>o,_100:()=>i,_200:()=>n,_300:()=>a,_400:()=>h,_500:()=>l,_600:()=>c,_700:()=>d,_800:()=>p,_900:()=>f});const r="100",i="100",n="200",a="300",o="400",h="400",l="500",c="600",u="700",d="700",p="800",_="900",f="900"},"./src/utils/mediator/transformers/MaterialTransformers.js":(e,t,s)=>{s.d(t,{Dr:()=>r,Uf:()=>a,WJ:()=>n,nY:()=>i});const r=function(e,t,s){e.alphaTest=s,i(e,"USE_ALPHATEST",s>0)},i=function(e,t,s){s?void 0===e.defines[t]&&(e.defines[t]="",e.needsUpdate=!0):void 0!==e.defines[t]&&(delete e.defines[t],e.needsUpdate=!0)},n=function(e,t,s){e.defines[t]&&e.defines[t]===s||(e.defines[t]=s,e.needsUpdate=!0)},a=function(e,t,s){e.userData[t]?e.userData[t].value=s:e.uniforms[t].value=s}}}]);