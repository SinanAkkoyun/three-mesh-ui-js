"use strict";(self.webpackChunkthree_mesh_ui=self.webpackChunkthree_mesh_ui||[]).push([["chunk_three-mesh-ui"],{"./src/font/msdf/materials/MSDFDepthMaterial.js":(e,t,s)=>{if(s.d(t,{Z:()=>i}),/^(ex__msdf_(crumple|shadows)|tut__preloaded_font)$/.test(s.j))var r=s("./node_modules/three/build/three.module.js");var a=s("./src/font/msdf/utils/MSDFFontMaterialUtils.js");class i extends(/^(ex__msdf_(crumple|shadows)|tut__preloaded_font)$/.test(s.j)?r.lRF:null){static get fontMaterialProperties(){return a.Z.fontMaterialProperties}constructor(e={}){e.depthPacking=r.mSO,a.Z.ensureMaterialOptions(e),delete e.transparent,super(e),a.Z.ensureDefines(this),a.Z.ensureUserData(this,e),this.onBeforeCompile=e=>{a.Z.bindUniformsWithUserData(e,this),a.Z.injectShaderChunks(e)}}}},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\n\tfloat alpha;\n#ifdef NO_RGSS\n\n\talpha = tap( vUvG );\n\n#else\n\n\t// shader-based supersampling based on https://bgolus.medium.com/sharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec\n\t// per pixel partial derivatives\n\tvec2 dx = dFdx(vUvG);\n\tvec2 dy = dFdy(vUvG);\n\t// rotated grid uv offsets\n\tvec2 uvOffsets = vec2(0.125, 0.375);\n\tvec2 offsetUV = vec2(0.0, 0.0);\n\t// supersampled using 2x2 rotated grid\n\talpha = 0.0;\n\toffsetUV.xy = vUvG + uvOffsets.x * dx + uvOffsets.y * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG - uvOffsets.x * dx - uvOffsets.y * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG + uvOffsets.y * dx - uvOffsets.x * dy;\n\talpha += tap(offsetUV);\n\toffsetUV.xy = vUvG - uvOffsets.y * dx + uvOffsets.x * dy;\n\talpha += tap(offsetUV);\n\talpha *= 0.25;\n\n#endif\n\n\talpha = clamp( alpha, 0.0, 1.0 );\n\n#ifdef INVERT_ALPHA\n\n\talpha = 1.0 - alpha;\n\n#endif\n\n\tdiffuseColor.a *= alpha;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\nvarying vec2 vUvG;\nuniform sampler2D glyphMap;\nuniform vec2 unitRange;\n// functions from the original msdf repo:\n// https://github.com/Chlumsky/msdfgen#using-a-multi-channel-distance-field\nfloat median(float r, float g, float b) {\n\treturn max(min(r, g), min(max(r, g), b));\n}\nfloat screenPxRange() {\n\n\t// precomputed unitRange as recommended by Chlumsky\n\t// vec2 unitRange = vec2(pxRange)/vec2(textureSize(glyphMap, 0));\n\tvec2 screenTexSize = vec2(1.0)/fwidth(vUvG);\n\treturn max(0.5*dot(unitRange, screenTexSize), 1.0);\n}\nfloat tap(vec2 offsetUV) {\n\tvec3 msd = texture( glyphMap, offsetUV ).rgb;\n\tfloat sd = median(msd.r, msd.g, msd.b);\n\tfloat screenPxDistance = screenPxRange() * (sd - 0.5);\n\tfloat alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\treturn alpha;\n}\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\nattribute vec2 uvG;\nvarying vec2 vUvG;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\nvUvG = uvG;\n"},"./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r="\ngl_Position.z -= 0.00001;\n"},"./src/font/msdf/utils/MSDFFontMaterialUtils.js":(e,t,s)=>{s.d(t,{Z:()=>c});var r=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),a=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js"),i=s("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),n=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),h=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),o=s("./node_modules/three/build/three.module.js");class c{static ensureMaterialOptions(e){e.transparent=!0,e.alphaTest=e.alphaTest||.02}static ensureDefines(e){e.defines||(e.defines={})}static ensureUserData(e,t){e.userData.glyphMap={value:t.glyphMap},e.userData.unitRange={value:new o.FM8}}static bindUniformsWithUserData(e,t){e.uniforms.glyphMap=t.userData.glyphMap,e.uniforms.unitRange=t.userData.unitRange}static injectShaderChunks(e){c.injectVertexShaderChunks(e),c.injectFragmentShaderChunks(e)}static injectVertexShaderChunks(e){e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","#include <uv_pars_vertex>\n"+r.Z),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n"+a.Z),e.vertexShader=e.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n"+i.Z)}static injectFragmentShaderChunks(e){e.fragmentShader=e.fragmentShader.replace("#include <uv_pars_fragment>","#include <uv_pars_fragment>\n"+n.Z),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","#include <alphamap_fragment>\n"+h.Z)}static from(e){return class extends e{static get fontMaterialProperties(){return c.fontMaterialProperties}constructor(e={}){c.ensureMaterialOptions(e),super(e),c.ensureDefines(this),c.ensureUserData(this,e),this._userDefinedOnBeforeCompile=e=>{},this._onBeforeCompile=this._cumulativeOnBeforeCompile}set onBeforeCompile(e){this._userDefinedOnBeforeCompile=e}get onBeforeCompile(){return this._onBeforeCompile}_cumulativeOnBeforeCompile=e=>{c.bindUniformsWithUserData(e,this),c.injectShaderChunks(e),this._userDefinedOnBeforeCompile(e)}}}static get fontMaterialProperties(){return l}}const l={alphaTest:{m:"alphaTest",t:function(e,t,s){e.alphaTest=s;(0===s?"":null)?void 0===e.defines.USE_ALPHATEST&&(e.defines.USE_ALPHATEST="",e.needsUpdate=!0):void 0!==e.defines.USE_ALPHATEST&&(delete e.defines.USE_ALPHATEST,e.needsUpdate=!0)}},font:{m:"glyphMap",t:function(e,t,s){const r=s?s.texture:null,a=s?s.unitRange:new o.FM8;if(void 0!==e[t])return e.glyphMap=r,void(e.unitRange=a);e.userData&&e.userData.glyphMap&&(e.userData.glyphMap.value=r,e.userData.unitRange.value=a)}},fontColor:{m:"color"},fontOpacity:{m:"opacity"},fontSupersampling:{m:"NO_RGSS",t:function(e,t,s){s?delete e.defines.NO_RGSS:e.defines.NO_RGSS="",e.needsUpdate=!0}},invertAlpha:{m:"INVERT_ALPHA",t:function(e,t,s){s?e.defines[t]="":delete e.defines[t],e.needsUpdate=!0}}}},"./src/frame/materials/FrameDepthMaterial.js":(e,t,s)=>{if(s.d(t,{Z:()=>i}),"dev__frames"==s.j)var r=s("./node_modules/three/build/three.module.js");var a=s("./src/frame/utils/FrameMaterialUtils.js");class i extends("dev__frames"==s.j?r.lRF:null){static get fontMaterialProperties(){return a.Z.frameMaterialProperties}constructor(e={}){e.depthPacking=r.mSO,a.Z.ensureMaterialOptions(e),delete e.transparent,super(e),a.Z.ensureDefines(this),a.Z.ensureUserData(this,e),this.onBeforeCompile=e=>{a.Z.bindUniformsWithUserData(e,this),a.Z.injectShaderChunks(e)}}}},"./src/frame/utils/FrameMaterialUtils.js":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./node_modules/three/build/three.module.js"),a=s("./src/three-mesh-ui.js");class i{static get frameMaterialProperties(){return o}static ensureMaterialOptions(e){e.transparent=!0,e.alphaTest=e.alphaTest||.02}static ensureDefines(e){e.defines||(e.defines={})}static ensureUserData(e,t){e.userData.borderColor={value:null},e.userData.borderRadius={value:new r.Ltg(0,0,0,0)},e.userData.borderWidth={value:new r.Ltg(0,0,0,0)},e.userData.borderOpacity={value:null},e.userData.frameSize={value:new r.FM8(1,1)},e.userData.textureSize={value:new r.FM8(1,1)}}static bindUniformsWithUserData(e,t){e.uniforms.borderColor=t.userData.borderColor,e.uniforms.borderRadius=t.userData.borderRadius,e.uniforms.borderWidth=t.userData.borderWidth,e.uniforms.borderOpacity=t.userData.borderOpacity,e.uniforms.frameSize=t.userData.frameSize,e.uniforms.textureSize=t.userData.textureSize}static injectShaderChunks(e){i.injectVertexShaderChunks(e),i.injectFragmentShaderChunks(e)}static injectVertexShaderChunks(e){e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","#include <uv_pars_vertex>\n"+a.sV.frame_border_pars_vertex),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n"+a.sV.frame_border_vertex)}static injectFragmentShaderChunks(e){e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+a.sV.frame_background_pars_fragment),e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+a.sV.frame_border_pars_fragment),e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n"+a.sV.frame_common_pars),e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",a.sV.frame_background_fragment),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>",a.sV.frame_border_fragment+"\n#include <alphamap_fragment>")}}const n=function(e,t,s){e.userData[t]?e.userData[t].value=s:e.uniforms[t].value=s},h=function(e,t,s){e.defines[t]&&e.defines[t]===s||(e.defines[t]=s,e.needsUpdate=!0)},o={alphaTest:{m:"alphaTest",t:function(e,t,s){e.alphaTest=s;(0===s?"":null)?void 0===e.defines.USE_ALPHATEST&&(e.defines.USE_ALPHATEST="",e.needsUpdate=!0):void 0!==e.defines.USE_ALPHATEST&&(delete e.defines.USE_ALPHATEST,e.needsUpdate=!0)}},backgroundTexture:{m:"map"},backgroundColor:{m:"color"},backgroundOpacity:{m:"opacity"},backgroundSize:{m:"u_backgroundMapping",t:function(e,t,s){s=["stretch","contain","cover"].indexOf(s),h(e,"BACKGROUND_MAPPING",s)}},_borderWidth:{m:"borderWidth",t:n},borderColor:{m:"borderColor",t:n},_borderRadius:{m:"borderRadius",t:n},borderOpacity:{m:"borderOpacity",t:n},size:{m:"frameSize",t:n},tSize:{m:"textureSize",t:n}}},"./src/three-mesh-ui.js":(e,t,s)=>{s.d(t,{gO:()=>et,zV:()=>ye,tx:()=>oe.Z,sV:()=>Xe,xv:()=>at,ZP:()=>Et,Wb:()=>vt,Vx:()=>Ot});var r={};s.r(r),s.d(r,{COLUMN:()=>d,COLUMN_REVERSE:()=>u,ROW:()=>c,ROW_REVERSE:()=>l,contentDirection:()=>p});var a={};s.r(a),s.d(a,{CENTER:()=>f,END:()=>C,START:()=>w,STRETCH:()=>g,alignItems:()=>m,warnAboutDeprecatedAlignItems:()=>_});var i={};s.r(i),s.d(i,{CENTER:()=>x,END:()=>k,SPACE_AROUND:()=>S,SPACE_BETWEEN:()=>U,SPACE_EVENLY:()=>R,START:()=>b,justifyContent:()=>I});var n={};s.r(n),s.d(n,{NORMAL:()=>O,NOWRAP:()=>B,PRE:()=>E,PRE_LINE:()=>M,PRE_WRAP:()=>D,WHITE_CHARS:()=>P,collapseWhitespaceOnInlines:()=>H,collapseWhitespaceOnString:()=>W,isValid:()=>L,newlineBreakability:()=>z,shouldBreak:()=>j});var h={};s.r(h),s.d(h,{CENTER:()=>q,JUSTIFY:()=>X,JUSTIFY_CENTER:()=>J,JUSTIFY_LEFT:()=>K,JUSTIFY_RIGHT:()=>Y,LEFT:()=>G,RIGHT:()=>Z,textAlign:()=>Q});var o=s("./node_modules/three/build/three.module.js");const c="row",l="row-reverse",d="column",u="column-reverse";function p(e,t,s,r){let a=s,i="getWidth",n="x",h="y";0===t.indexOf(d)&&(i="getHeight",n="y",h="x");for(let t=0;t<e.childrenBoxes.length;t++){const s=e.childrenBoxes[t],o=s.id,c=s[i](),l=s.margin||0;a+=l*r,e.childrenPos[o]={[n]:a+c/2*r,[h]:0},a+=r*(c+l)}}const w="start",f="center",C="end",g="stretch";function m(e,t){const s=e.getAlignItems();-1===v.indexOf(s)&&console.warn(`alignItems === '${s}' is not supported`);let r="getWidth",a="x";0===t.indexOf(c)&&(r="getHeight",a="y");const i=e[r]()/2-(e.padding||0);e.childrenBoxes.forEach((n=>{let h;switch(s){case C:case"right":case"bottom":h=0===t.indexOf(c)?-i+n[r]()/2+(n.margin||0):i-n[r]()/2-(n.margin||0);break;case w:case"left":case"top":h=0===t.indexOf(c)?i-n[r]()/2-(n.margin||0):-i+n[r]()/2+(n.margin||0)}e.childrenPos[n.id][a]=h||0}))}function _(e){-1!==y.indexOf(e)&&console.warn(`alignItems === '${e}' is deprecated and will be remove in 7.x.x. Fallback are 'start'|'end'`)}const v=[w,f,C,g,"top","right","bottom","left"],y=["top","right","bottom","left"],b="start",x="center",k="end",S="space-around",U="space-between",R="space-evenly";function I(e,t,s,r){const a=e.getJustifyContent();-1===T.indexOf(a)&&console.warn(`justifyContent === '${a}' is not supported`);const i=0===t.indexOf("row")?"width":"height",n=e.getChildrenSideSum(i),h=("width"===i?e.getInnerWidth():e.getInnerHeight())-n,o=function(e,t){switch(e){case k:return t;case x:return t/2}return 0}(a,2*s-n*Math.sign(s)),c=function(e,t,s,r){const a=Array(e.length).fill(0);if(t>0)switch(s){case U:if(e.length>1){const s=t/(e.length-1)*r;a[0]=0;for(let t=1;t<e.length;t++)a[t]=s*t}break;case R:if(e.length>1){const s=t/(e.length+1)*r;for(let t=0;t<e.length;t++)a[t]=s*(t+1)}break;case S:if(e.length>1){const s=t/e.length*r,i=s/2;a[0]=i;for(let t=1;t<e.length;t++)a[t]=i+s*t}}return a}(e.childrenBoxes,h,a,r),l=0===t.indexOf("row")?"x":"y";e.childrenBoxes.forEach(((t,s)=>{e.childrenPos[t.id][l]-=o-c[s]}))}const T=[b,x,k,S,U,R];function F(e){return class extends e{constructor(e){super(e),this.isBoxComponent=!0,this.childrenPos={}}getInnerWidth(){const e=this.getContentDirection();switch(e){case"row":case"row-reverse":return this.width-(2*this.padding||0)||this.getChildrenSideSum("width");case"column":case"column-reverse":return this.getHighestChildSizeOn("width");default:console.error(`Invalid contentDirection : ${e}`)}}getInnerHeight(){const e=this.getContentDirection();switch(e){case"row":case"row-reverse":return this.getHighestChildSizeOn("height");case"column":case"column-reverse":return this.height-(2*this.padding||0)||this.getChildrenSideSum("height");default:console.error(`Invalid contentDirection : ${e}`)}}getChildrenSideSum(e){return this.childrenBoxes.reduce(((t,s)=>{const r=2*s.margin||0;return t+("width"===e?s.getWidth()+r:s.getHeight()+r)}),0)}setPosFromParentRecords(){this.parentUI&&this.parentUI.childrenPos[this.id]&&(this.position.x=this.parentUI.childrenPos[this.id].x,this.position.y=this.parentUI.childrenPos[this.id].y)}computeChildrenPosition(){if(this.children.length>0){const e=this.getContentDirection();let t;switch(e){case c:t=-this.getInnerWidth()/2;break;case l:t=this.getInnerWidth()/2;break;case d:t=this.getInnerHeight()/2;break;case u:t=-this.getInnerHeight()/2}const s=-Math.sign(t);p(this,e,t,s),I(this,e,t,s),m(this,e)}}getHighestChildSizeOn(e){return this.childrenBoxes.reduce(((t,s)=>{const r=s.margin||0,a="width"===e?s.getWidth()+2*r:s.getHeight()+2*r;return Math.max(t,a)}),0)}getWidth(){return this.parentUI&&"stretch"===this.parentUI.getAlignItems()&&-1!==this.parentUI.getContentDirection().indexOf("column")?this.parentUI.getWidth()-(2*this.parentUI.padding||0):this.width||this.getInnerWidth()+(2*this.padding||0)}getHeight(){return this.parentUI&&"stretch"===this.parentUI.getAlignItems()&&-1!==this.parentUI.getContentDirection().indexOf("row")?this.parentUI.getHeight()-(2*this.parentUI.padding||0):this.height||this.getInnerHeight()+(2*this.padding||0)}}}const P={"\t":"\t","\n":"\n","\r":"\r"," ":" "},O="normal",B="nowrap",E="pre",M="pre-line",D="pre-wrap",A=[O,B,E,M,D];function L(e){return-1===A.indexOf(e)&&(console.warn(`Whitespace::isValid() The provided white-space value ('${e}') is not valid !`),console.warn(`    - Automatic fallback to ('${M}')`),e=M),e}const W=function(e,t){switch(t){case B:case O:e=e.replace(/\n/g," ");case M:e=e.replace(/[ ]{2,}/g," ")}return e},z=function(e){switch(e){case E:case D:case M:return"mandatory"}return null},j=function(e,t,s,r){const a=e[t];switch(r.WHITESPACE){case O:case M:case D:if("mandatory"===a.lineBreak)return!0;if(s+a.xadvance+a.xoffset+a.kerning>r.INNER_WIDTH)return!0;const i=$(e,t,r);return function(e,t,s,r){return!(!e||!e.char)&&(!(t+s<r.INNER_WIDTH)&&r.BREAKON.indexOf(e.char)>-1)}(e[t-1],s,i,r);case E:return"mandatory"===a.lineBreak;default:return!1}},H=function(e,t){const s=e[0],r=e[e.length-1];switch(t){case D:s.char&&"\n"===s.char&&e.length>1&&N([s],e[1]),r.char&&"\n"===r.char&&e.length>1&&V([r],e[e.length-2]);break;case M:case B:case O:let a,i=[];for(let t=0;t<e.length;t++){const s=e[t];if(!(s.char&&P[s.char]&&e.length>t))break;i.push(s),a=e[t+1]}N(i,a),i=[],a=null;for(let t=e.length-1;t>0;t--){const s=e[t];if(!(s.char&&P[s.char]&&t>0))break;i.push(s),a=e[t-1]}V(i,a);break;case E:break;default:return console.warn(`whiteSpace: '${t}' is not valid`),0}return s.offsetX};function V(e,t){if(t)for(let s=0;s<e.length;s++){const r=e[s];r.fontFactor=0,r.offsetX=t.offsetX+t.width}}function N(e,t){if(t)for(let s=0;s<e.length;s++){const r=e[s];r.fontFactor=0,r.offsetX=t.offsetX}}function $(e,t,s,r){if(r=r||0,!e[t])return r;const a=e[t];return a.lineBreak?r+a.xadvance:$(e,t+1,s,r+a.xadvance+a.xoffset+a.kerning+s.LETTERSPACING)}const G="left",Z="right",q="center",X="justify",K="justify-left",Y="justify-right",J="justify-center";function Q(e,t,s){for(let r=0;r<e.length;r++){const a=e[r],i=ee(a,t,s,r===e.length-1);for(let e=0;e<a.length;e++)a[e].offsetX+=i}if(0===t.indexOf(X))for(let r=0;r<e.length;r++){const a=e[r];if(-1!==t.indexOf("-")&&r===e.length-1)return;const i=s-a.width;if(i<=0)return;let n=0;for(let e=1;e<a.length-1;e++)n+=" "===a[e].char?1:0;const h=i/n;let o=1;t===Y&&(a.reverse(),o=-1);let c=0;for(let e=1;e<=a.length-1;e++){const t=a[e];t.offsetX+=c*o,c+=" "===t.char?h:0}t===Y&&a.reverse()}}const ee=(e,t,s,r)=>{switch(t){case K:case X:case G:return-s/2;case Y:case Z:return-e.width+s/2;case q:return-e.width/2;case J:return r?-e.width/2:-s/2;default:console.warn(`textAlign: '${t}' is not valid`)}};function te(e){return class extends e{computeInlinesPosition(){const e=this.getWidth()-(2*this.padding||0),t=this.getHeight()-(2*this.padding||0),s=this.getJustifyContent(),r=this.getTextAlign(),a=this.getInterLine(),i=this.computeLines();let n=i.reduce(((e,t,s,r)=>{const i=t.lineHeight-t.lineBase;return t.forEach((s=>{s.offsetY=e-t.lineHeight+i+r[0].lineHeight})),e-t.lineHeight-a}),0)+a;n=Math.abs(n);const h=(()=>{switch(s){case"start":return t/2-i[0].lineHeight;case"end":return n-i[0].lineHeight-t/2+(i[i.length-1].lineHeight-i[i.length-1].lineHeight);case"center":return n/2-i[0].lineHeight;default:console.warn(`justifyContent: '${s}' is not valid`)}})();i.forEach((e=>{e.forEach((e=>{e.offsetY+=h}))})),Q(i,r,e),this.lines=i}computeLines(){const e=this.getWidth()-(2*this.padding||0),t=[[]];return this.childrenInlines.reduce(((s,r)=>{if(!r.inlines)return;const a=r._fitFontSize||r.getFontSize(),i=r.isText?r.getLetterSpacing()*a:0,n=r.getWhiteSpace(),h=r.getBreakOn(),o={WHITESPACE:n,LETTERSPACING:i,BREAKON:h,INNER_WIDTH:e};return r.inlines.reduce(((e,s,r,a)=>j(a,r,e,o)?(t.push([s]),s.offsetX=s.xoffset,0===s.width?0:s.xadvance+i):(t[t.length-1].push(s),s.offsetX=e+s.xoffset+s.kerning,e+s.xadvance+s.kerning+i)),s)}),0),t.forEach((e=>{e.lineHeight=e.reduce(((e,t)=>{const s=void 0!==t.lineHeight?t.lineHeight:t.height;return Math.max(e,s)}),0),e.lineBase=e.reduce(((e,t)=>{const s=void 0!==t.lineBase?t.lineBase:t.height;return Math.max(e,s)}),0),e.width=0;if(e[0]){const t=this.getWhiteSpace(),s=H(e,t);e.forEach((e=>{e.offsetX-=s})),e.width=this.computeLineWidth(e)}})),t}calculateHeight(e){this.childrenInlines.forEach((t=>{t.isInlineBlock||(t._fitFontSize=t.getFontSize()*e,t.calculateInlines(t._fitFontSize))}));const t=this.computeLines(),s=this.getInterLine(),r=t.reduce(((e,t)=>e-t.lineHeight-s),0)+s;return Math.abs(r)}computeLineWidth(e){const t=e[0],s=e[e.length-1];return s.offsetX+s.width+t.offsetX}}}class se extends o.pBf{constructor(e,t){super(),this._isReady=!1,this._weight=e,this._style=t,this._size=42,this._lineHeight=42,this._lineBase=42,this._font=null}get typographic(){return this._font}get isReady(){return this._isReady}get weight(){return this._weight}get style(){return this._style}get texture(){return this._texture}set fontMaterial(e){throw Error(`FontVariant('${this.id}')::fontMaterial - is abstract.`)}get fontMaterial(){throw Error(`FontVariant('${this.id}')::fontMaterial - is abstract.`)}get id(){return`${this._name}(w:${this.weight},s:${this.style})`}getTypographicGlyph(e){let t=this._chars[e];if(t)return t;if(e.match(/\s/))return this._chars[" "];const s=ye.missingCharacter(this,e);if(s&&(t=this._chars[s],t))return t;throw Error(`FontVariant('${this.id}')::getTypographicGlyph() - character('${e}') and/or fallback character were not found in provided msdf charset.`)}getGeometricGlyph(e,t=1){throw new Error(`FontVariant(${typeof this})::getGeometryCharacter() is abstract and should therefore be overridden.`)}getKerningAmount(e){return this._kernings[e]?this._kernings[e]:0}adjustTypographicGlyphs(e){for(const t in e){const s=this.getTypographicGlyph(t),r=e[t];for(const a in r)s["_"+a]=e[t][a]}}_checkReadiness(){var e;this._readyCondition()&&((e=this)._isReady=!0,e.dispatchEvent(re))}_readyCondition(){throw new Error(`FontVariant(${typeof this})::_readyCondition() is abstract and should therefore be overridden.`)}}const re={type:"ready"};class ae extends class{constructor(){this._size=42,this._lineHeight=42,this._lineBase=38,this._name="-",this._charset=""}get size(){return this._size}get lineHeight(){return this._lineHeight}get lineBase(){return this._lineBase}get name(){return this._name}get charset(){return this._charset}}{constructor(e){super(),this._size=e.info.size,this._lineHeight=e.common.lineHeight,this._lineBase=e.common.base,this._name=e.info.face,this._textureWidth=e.common.scaleW,this._textureHeight=e.common.scaleH,this._charset=e.chars.map((e=>e.char)).join("")}get textureWidth(){return this._textureWidth}get textureHeight(){return this._textureHeight}}class ie extends class{constructor(e){this._typographic=e,this._fontFactor=1,this._lineBreak=null,this._fontSize=0,this._kerning=0,this._offsetX=0,this._offsetY=0}get typographic(){return this._typographic}resetOffsets(){this._offsetX=this._offsetY=0}get xadvance(){return this._typographic.xadvance*this._fontFactor}get xoffset(){return this._typographic.xoffset*this._fontFactor}get yoffset(){return this._typographic.yoffset*this._fontFactor}get width(){return this._typographic.width*this._fontFactor}get height(){return this._typographic.height*this._fontFactor}get char(){return this._typographic.char}set lineBreak(e){this._lineBreak=e}get lineBreak(){return this._lineBreak}get anchor(){const e=this._typographic.font.lineHeight,t=this._typographic.font.lineBase;return(this._typographic.yoffset+this._typographic.height-t)*this._fontSize/e}get kerning(){return this._kerning*this._fontFactor}set kerning(e){this._kerning=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get lineHeight(){return this._typographic.font.lineHeight*this._fontFactor}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e}get lineBase(){return this._typographic.font.lineBase*this._fontFactor}set fontFactor(e){this._fontFactor=e}}{constructor(e){super(e)}get uv(){return this.typographic.uv}}class ne extends class{constructor(e){this._char="",this._width=1,this._heigth=1,this._xadvance=1,this._xoffset=0,this._yoffset=0,this._font=e}get font(){return this._font}get char(){return this._char}get width(){return this._width}get height(){return this._heigth}get xadvance(){return this._xadvance}get xoffset(){return this._xoffset}get yoffset(){return this._yoffset}set yoffset(e){this._yoffset=e}asInlineGlyph(){throw new Error("Abstract... Need to be implemented")}}{constructor(e,t){super(e),this._char=t.char,this._width=t.width,this._heigth=t.height,this._xadvance=t.xadvance?t.xadvance:this._width,this._xoffset=t.xoffset?t.xoffset:0,this._yoffset=t.yoffset?t.yoffset:0,this._uv=null,isNaN(t.x)||(this._uv={left:t.x/e.textureWidth,right:(t.x+t.width)/e.textureWidth,top:1-(t.y+t.height)/e.textureHeight,bottom:1-t.y/e.textureHeight})}get uv(){return this._uv}asInlineGlyph(){return new ie(this)}}class he extends o.BKK{constructor(e,t=1){let s=1,r=1;const a=e.typographic.font.size;s=Math.ceil(e.typographic.width/a*t),r=Math.ceil(e.typographic.height/a*t),super(e.width,e.height,s,r),e.uv?(this._mapUVs(e),this._transformGeometry(e)):(this._nullifyUVs(),this.scale(0,0,1),this.translate(0,e.fontSize/2,0))}_mapUVs(e){const t=e.uv.right-e.uv.left,s=e.uv.bottom-e.uv.top,r=this.getAttribute("uv").array.slice(),a=[];for(let i=0;i<r.length;i+=2){const n=r[i],h=r[i+1];a.push(e.uv.left+t*n),a.push(e.uv.top+s*h)}this.setAttribute("uvG",new o.TlE(new Float32Array(a),2))}_nullifyUVs(){const e=[],t=this.getAttribute("uv").array.length;for(let s=0;s<t;s++)e.push(0);this.setAttribute("uvG",new o.TlE(new Float32Array(e),2))}_transformGeometry(e){this.translate(e.width/2,e.height/2-e.anchor,0)}}var oe=s("./src/font/msdf/utils/MSDFFontMaterialUtils.js"),ce=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.vertex.glsl.js"),le=s("./src/font/msdf/renderers/ShaderChunks/msdf-offsetglyph.vertex.glsl.js"),de=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.pars.fragment.glsl.js"),ue=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.fragment.glsl.js"),pe=s("./src/font/msdf/renderers/ShaderChunks/msdf-alphaglyph.vertex.glsl.js");const we=`\n${ce.Z}\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t${pe.Z}\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t${le.Z}\n\t#include <clipping_planes_vertex>\n}\n`,fe=`\nuniform vec3 diffuse;\nuniform float opacity;\n${de.Z}\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t// instead of <color_fragment> : vec4 diffuseColor\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t${ue.Z}\n\t#include <alphatest_fragment>\n\t// instead of <output_fragment>\n\tgl_FragColor = diffuseColor;\n\t#include <clipping_planes_fragment>\n}\n`;class Ce extends o.jyz{static get fontMaterialProperties(){return oe.Z.fontMaterialProperties}constructor(e={}){super({uniforms:{glyphMap:{value:null},diffuse:{value:null},opacity:{value:1},unitRange:{value:new o.FM8(0,0)},alphaTest:{value:.02}},transparent:!0,clipping:!0,vertexShader:we,fragmentShader:fe,extensions:{derivatives:!0}}),this.defines.USE_ALPHATEST="",this.needsUpdate=!0,this.noRGSS=e.noRGSS||!1}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get opacity(){return this.uniforms.opacity.value}get unitRange(){return this.uniforms.unitRange.value}set unitRange(e){this.uniforms.unitRange.value.copy(e)}get glyphMap(){return this.uniforms.glyphMap.value}set glyphMap(e){this.uniforms.glyphMap.value=e}get isDefault(){return this.constructor===Ce}get alphaTest(){return this.uniforms.alphaTest.value}set alphaTest(e){this.uniforms.alphaTest.value=e}}class ge extends se{constructor(e,t,s,r){var a,i;super(e,t),s.pages?this._buildData(s):(a=this,i=s,(new o.hH6).setResponseType("json").load(i,(e=>{a._buildData(e),a._checkReadiness()}))),r instanceof o.xEZ?this._buildTexture(r):function(e,t){e._texture=(new o.dpR).load(t,(t=>{e._buildTexture(t),e._checkReadiness()}))}(this,r),this._defaultMaterialClass=Ce,this._checkReadiness()}get texture(){return this._texture}get unitRange(){return this._unitRange}set fontMaterial(e){this._defaultMaterialClass=e}get fontMaterial(){return this._defaultMaterialClass}_buildData(e){this._font=new ae(e),this._kernings=this._buildKerningPairs(e),this._chars=this._buildCharacters(e),this._chars[" "]=this._buildCharacterWhite(e),this._size=e.info.size,this._lineHeight=e.common.lineHeight,this._lineBase=e.common.base,this._distanceRange=e.distanceField.distanceRange,this._unitRange=new o.FM8(this._distanceRange,this._distanceRange).divide(new o.FM8(e.common.scaleW,e.common.scaleH))}_buildTexture(e){e.generateMipmaps=!1,e.minFilter=o.wem,e.magFilter=o.wem,e.needsUpdate=!0}getGeometricGlyph(e,t=1){return new he(e,t)}_readyCondition(){return this._chars&&this._texture}_buildKerningPairs(e){const t={};for(let s=0;s<e.kernings.length;s++){const r=e.kernings[s];if(0===r.amount)continue;t[String.fromCharCode(r.first,r.second)]=r.amount}return t}_buildCharacters(e){const t={};for(let s=0;s<e.chars.length;s++){const r=e.chars[s];t[r.char]=new ne(this._font,r)}return t}_buildCharacterWhite(e){return new ne(this._font,{char:" ",width:e.info.size/3,height:.7*e.info.size})}}class me extends o.pBf{constructor(e){super(),this._name=e,this._variants=[],this._isReady=!1}get isReady(){return this._isReady}addVariant(e,t,s,r,a=!1){if(a||!this.getVariant(e,t)){this._isReady=!1;const a=new ge(e,t,s,r);this._variants.push(a),a.isReady?this._checkReadiness():a.addEventListener("ready",this._checkReadiness)}else console.warn(`FontFamily('${this._name}')::addVariant() - Variant(${e}, ${t}) already exists.`);return this}addCustomImplementationVariant(e,t=!1){return t||!this.getVariant(e.weight,e.style)?(this._isReady=!1,this._variants.push(e),e.isReady?this._checkReadiness():e.addEventListener("ready",this._checkReadiness)):console.warn(`FontFamily('${this._name}')::addCustomImplementationVariant() - Variant(${e.weight}, ${e.style}) already exists.`),this}getVariant(e,t){return this._variants.find((s=>s.weight===e&&s.style===t))}get name(){return this._name}_checkReadiness=()=>{var e;this._variants.every((e=>e.isReady))&&((e=this)._isReady=!0,e.dispatchEvent(_e))}}const _e={type:"ready"};const ve={};const ye={addFontFamily:function(e){return ve[e]&&console.error(`FontLibrary::addFontFamily - Font('${e}') is already registered`),ve[e]=new me(e),ve[e]},getFontFamily:function(e){return ve[e]},prepare:function(e){const t=[...arguments];t.forEach((e=>{if(!(e instanceof me))throw new Error(`FontLibrary::prepare() - One of the provided parameter is not a FontFamily. Instead ${typeof e} given.`)}));const s=function(){return t.every((e=>e.isReady))};return new Promise(((e,r)=>{if(s())e();else for(let r=0;r<t.length;r++){const a=t[r];a.isReady||a.addEventListener("ready",(()=>{s()&&e()}))}}))},setMissingCharacterHandler:function(e){be=e},missingCharacter:function(e,t){return be(e,t)}};let be=function(e,t){return console.error(`The character '${t}' is not included in the font characters set.`)," "};class xe{static requestUpdate(e,t,s,r){e.traverse((e=>{e.isUI&&(this.requestedUpdates[e.id]?(t&&(this.requestedUpdates[e.id].updateParsing=!0),s&&(this.requestedUpdates[e.id].updateLayout=!0),r&&(this.requestedUpdates[e.id].updateInner=!0)):this.requestedUpdates[e.id]={updateParsing:t,updateLayout:s,updateInner:r,needCallback:t||s||r})}))}static register(e){this.components.includes(e)||this.components.push(e)}static disposeOf(e){const t=this.components.indexOf(e);t>-1&&this.components.splice(t,1)}static update(){if(Object.keys(this.requestedUpdates).length>0){const e=this.components.filter((e=>!e.parentUI));e.forEach((e=>this.traverseParsing(e))),e.forEach((e=>this.traverseUpdates(e)))}}static traverseParsing(e){const t=this.requestedUpdates[e.id];t&&t.updateParsing&&(e.parseParams(),t.updateParsing=!1),e.childrenUIs.forEach((e=>this.traverseParsing(e)))}static traverseUpdates(e){const t=this.requestedUpdates[e.id];delete this.requestedUpdates[e.id],t&&t.updateLayout&&(t.updateLayout=!1,e.updateLayout()),t&&t.updateInner&&(t.updateInner=!1,e.updateInner()),e.childrenUIs.forEach((e=>{this.traverseUpdates(e)})),t&&t.needCallback&&e.performAfterUpdate()}}xe.components=[],xe.requestedUpdates={};var ke=s("./src/utils/font/FontWeight.js"),Se=s("./src/utils/font/FontStyle.js");const Ue={container:null,fontFamily:null,fontSize:.05,fontKerning:"normal",fontStyle:Se.yu,fontWeight:ke.yu,bestFit:"none",offset:.01,interLine:.01,breakOn:"- ,.:?!\n",whiteSpace:M,contentDirection:d,alignItems:f,justifyContent:b,fontTexture:null,textAlign:q,fontColor:new o.Ilk(16777215),fontOpacity:1,fontPXRange:4,fontSupersampling:!0,borderRadius:new o.Ltg(.01,.01,.01,.01),borderWidth:new o.Ltg(0,0,0,0),borderColor:new o.Ilk("black"),borderOpacity:1,backgroundSize:"cover",backgroundColor:new o.Ilk(2236962),backgroundWhiteColor:new o.Ilk(16777215),backgroundOpacity:.8,backgroundOpaqueOpacity:1,backgroundTexture:null,hiddenOverflow:!1,letterSpacing:0};class Re{constructor(){this._subject=null}setSubject(e){return this._subject=e,this}attach(){return console.error(`Behavior::attach() - Is abstract and therefore should be overridden in ${this.constructor.name}`),this}act(e=null){throw new Error(`Behavior::act() - Is abstract and therefore should be overridden in ${this.constructor.name}`)}detach(){return console.error(`Behavior::detach() - Is abstract and therefore should be overridden in ${this.constructor.name}`),this}dispose(){this.detach(),this.clear()}clear(){}}class Ie{constructor(e,...t){this._callback=e,this._tokens=[...t]}clear(){this._tokens=[]}contains=e=>-1!==this._tokens.indexOf(e);containsAll=(...e)=>e.every(this.contains);containsEvery=e=>e.every(this.contains);toggle(e){this.contains(e)?this.remove(e):this.add(e)}add(...e){for(const t of e)this.contains(t)||this._tokens.push(t)}remove(...e){for(const t of e){const e=this._tokens.indexOf(t);-1!==e&&this._tokens.splice(e,1)}}toString(e){return this._tokens.length?e+this._tokens.join(e):""}dispose(){this.containsEvery=null,this.containsAll=null,this._callback=null,this._tokens=null}}class Te{constructor(e,t={}){this._callback=e,this._map=new Map;for(const e in t)this.set(e,t[e])}clear(){this._map.clear()}set(e,t=null){void 0===t&&this.remove(e),this._map.set(e,t)}get(e){return this._map.get(e)}remove(e){this._map.delete(e)}has(e){return this._map.has(e)}toString(){let e="";const t=this._map.entries();for(const[s,r]of t)e+=r?`[${s}="${r}"]`:`[${s}]`;return e}match=e=>{const t=e.name,s=e.value,r=e.operator;let a;switch(r){case"^=":return a=this._map.get(t),a&&a.startsWith(s);case"*=":return a=this._map.get(t),a&&a.includes(s);case"$=":return a=this._map.get(t),a&&a.endsWith(s);case"!==":return this._map.has(t);default:console.warn(`NamedMap::match() - The provided operator '${r}' is not implemented`)}};matchEvery=e=>e.every(this.match);dispose(){this._callback=!1,this._map.clear(),this._map=null,this._map=null}}const Fe=/((?:")([^"]*)(?:"))/g,Pe=/([ >~+]*)([^+>~ ]+)/g,Oe=/^[ >~+]+/,Be=/(#)([\w_-]+)/,Ee=/(\.)([\w_-]+)/g,Me=/(:)([A-z0-9\-_]*)/g,De=/^[^#\.:\[]*/g,Ae=/(\[([^\]]*)\])/g,Le=/([^*~$^]+)(([*~$^]?={1,2})(.*))?/;class We{constructor(e,t=null){this._type=e,this._value=t}get type(){return this._type}get value(){return this._value}}class ze extends We{constructor(e){super("attribute"),this._value=[];for(let t=0;t<e.length;t++)this._value.push(new je(e[t]))}get value(){return this._value}}class je{constructor(e){const t=(e=e.substring(1,e.length-1)).match(Le);this.name=t[1],this.operator=t[3]||"!==",this.value=t[4]?function(e){e[0]!==e[e.length-1]||'"'!==e[0]&&"'"!==e[0]||(e=e.substring(1,e.length-1));return e}(t[4]):void 0}}class He extends We{constructor(e,t){super(e),this._value=[];for(let e=0;e<t.length;e++)this._value.push(t[e].substring(1))}get value(){return this._value}}class Ve{constructor(e){const t=e.match(Oe);this._query=e,this._combinator=t?t[0].trim():null,this._conditions=function(e){const t=[],s=e.match(Ae);s&&t.push(new ze(s));const r=(e=e.replace(Ae,"")).match(Be);r&&t.push(new We("id",r[2]));const a=e.match(Ee);a&&t.push(new He("class",a));const i=e.match(Me);i&&t.push(new He("pseudoClass",i));const n=e.replace(Oe,"").match(De,"");n&&n[0]&&t.push(new We("tag",n[0]));return t}(e.replace(Oe,""))}get conditions(){return this._conditions}get combinator(){return this._combinator}get query(){return this._query}match(e){return this._conditions.every((t=>{switch(t.type){case"id":return e.id===t.value;case"class":return e.classList.containsEvery(t.value);case"pseudoClass":return e.pseudoClassList.containsEvery(t.value);case"tag":return e.tagName===t.value;case"attribute":return e.attributes.matchEvery(t.value);default:return console.warn(`CSSQuerySegment::match() - '${t.type}' is not implemented!`),!0}}))}}function Ne(e){return class extends e{constructor(e){super(e),this.states={},this.currentState=void 0,this.isUI=!0,this.autoLayout=!0,this.childrenUIs=[],this.childrenBoxes=[],this.childrenTexts=[],this.childrenInlines=[],this.parentUI=null,this.addEventListener("added",this._rebuildParentUI),this.addEventListener("removed",this._rebuildParentUI),this._main=null,this._hooks={},this._onAfterUpdates=[],this.position.z=this.getOffset(),this._materialProperties={},this._borderRadius=(new o.Ltg).copy(Ue.borderRadius),this._borderWidth=(new o.Ltg).copy(Ue.borderWidth),this._id=null,this._classList=new Ie((()=>{})),this._pseudoClassList=new Ie((()=>{})),this._attributes=new Te((()=>{})),this._tagName="",this.backgroundColor=new o.Ilk(0),this.fontColor=new o.Ilk(16777215)}get id(){return this._id}get tagName(){return this._tagName}get attributes(){return this._attributes}get classList(){return this._classList}get pseudoClassList(){return this._pseudoClassList}copyAttributes(){let e=this._tagName;return this._id&&(e+=`#${this._id}`),e+=this._classList.toString("."),e+=this._attributes.toString(),e+=this._pseudoClassList.toString(":"),e}pasteAttributes(e){e instanceof Ve||(e=new Ve(e)),this._id=null,this._classList.clear(),this._pseudoClassList.clear(),this._attributes.clear();for(let t=0;t<e.conditions.length;t++){const s=e.conditions[t];switch(s.type){case"tag":""===this._tagName&&(this._tagName=s.value);continue;case"id":this._id=s.value;continue;case"class":for(let e=0;e<s.value.length;e++)this._classList.add(s.value[e]);continue;case"pseudoClass":for(let e=0;e<s.value.length;e++)this._pseudoClassList.add(s.value[e]);continue;case"attribute":for(let e=0;e<s.value.length;e++){const t=s.value[e];this._attributes.set(t.name,t.value)}}}return this}querySelectorAll(e){return vt(e,this)}getClippingPlanes(){const e=[];if(this.parentUI){if(this.isBlock&&this.parentUI.getHiddenOverflow()){const t=this.parentUI.getHeight()/2-(this.parentUI.padding||0),s=this.parentUI.getWidth()/2-(this.parentUI.padding||0),r=[new o.JOQ(new o.Pa4(0,1,0),t),new o.JOQ(new o.Pa4(0,-1,0),t),new o.JOQ(new o.Pa4(1,0,0),s),new o.JOQ(new o.Pa4(-1,0,0),s)];r.forEach((e=>{e.applyMatrix4(this.parent.matrixWorld)})),e.push(...r)}this.parentUI.parentUI&&e.push(...this.parentUI.getClippingPlanes())}return e}updateClippingPlanes(e){const t=void 0!==e?e:this.getClippingPlanes();JSON.stringify(t)!==JSON.stringify(this.clippingPlanes)&&(this.clippingPlanes=t,this.material&&(this.material.clippingPlanes=this.clippingPlanes))}getHighestParent(){return this.parentUI?this.parent.getHighestParent():this}_getProperty(e){return void 0===this[e]&&this.parentUI?this.parent._getProperty(e):void 0!==this[e]?this[e]:Ue[e]}getFontSize(){return this._getProperty("fontSize")}getSegments(){return this.segments||1}getAlphaTest(){return this.alphaTest||.02}getFontKerning(){return this._getProperty("fontKerning")}getFontStyle(){return this._getProperty("fontStyle")}getFontWeight(){return this._getProperty("fontWeight")}getLetterSpacing(){return this._getProperty("letterSpacing")}getFontTexture(){return this._font&&this._font.isReady?this._font.texture:this._getProperty("fontTexture")}getFontFamily(){return this._getProperty("fontFamily")}getBreakOn(){return this._getProperty("breakOn")}getWhiteSpace(){return this._getProperty("whiteSpace")}getTextAlign(){return this._getProperty("textAlign")}getFontColor(){return this._getProperty("fontColor")}getFontSupersampling(){return this._getProperty("fontSupersampling")}getFontOpacity(){return this._getProperty("fontOpacity")}getFontPXRange(){return this._getProperty("fontPXRange")}getBorderRadius(){return this._getProperty("borderRadius")}getBorderWidth(){return this._getProperty("borderWidth")}getBorderColor(){return this._getProperty("borderColor")}getBorderOpacity(){return this._getProperty("borderOpacity")}getContainer(){return!this.threeOBJ&&this.parent?this.parent.getContainer():this.threeOBJ?this:Ue.container}getParentsNumber(e){return e=e||0,this.parentUI?this.parentUI.getParentsNumber(e+1):e}getBackgroundOpacity(){return this.backgroundOpacity||0===this.backgroundOpacity?this.backgroundOpacity:Ue.backgroundOpacity}getBackgroundColor(){return this.backgroundColor||Ue.backgroundColor}getBackgroundTexture(){return this.backgroundTexture||Ue.backgroundTexture}getAlignContent(){return this.alignContent||Ue.alignContent}getAlignItems(){return this.alignItems||Ue.alignItems}getContentDirection(){return this.contentDirection||Ue.contentDirection}getJustifyContent(){return this.justifyContent||Ue.justifyContent}getInterLine(){return void 0===this.interLine?Ue.interLine:this.interLine}getOffset(){return void 0===this.offset?Ue.offset:this.offset}getBackgroundSize(){return void 0===this.backgroundSize?Ue.backgroundSize:this.backgroundSize}getHiddenOverflow(){return void 0===this.hiddenOverflow?Ue.hiddenOverflow:this.hiddenOverflow}getBestFit(){return void 0===this.bestFit?Ue.bestFit:this.bestFit}_rebuildChildrenLists(){this.childrenUIs=this.children.filter((e=>e.isUI)),this.childrenBoxes=this.children.filter((e=>e.isBoxComponent)),this.childrenInlines=this.children.filter((e=>e.isInline)),this.childrenTexts=this.children.filter((e=>e.isText))}_rebuildParentUI=()=>{this.parent&&this.parent.isUI?(this.parentUI=this.parent,this.position.z=this.getOffset()):this.parentUI=null,this.isBlock&&!this.parentUI?(ThreeMeshUI.addRoot(this),this.pseudoClassList.add("root")):(ThreeMeshUI.removeRoot(this),this.pseudoClassList.remove("root"))};add(){for(const e of Object.keys(arguments))arguments[e].isUI&&this.update(null,!0);const e=super.add(...arguments);return this._rebuildChildrenLists(),e}remove(){for(const e of Object.keys(arguments))arguments[e].isInline&&this.update(null,!0);const e=super.remove(...arguments);return this._rebuildChildrenLists(),e}update(e,t,s){xe.requestUpdate(this,e,t,s)}performAfterUpdate(){for(let e=0;e<this._onAfterUpdates.length;e++)this._onAfterUpdates[e]()}set onAfterUpdate(e){console.warn("`onAfterUpdate` property has been deprecated, please rely on `addAfterUpdate` instead."),this.addAfterUpdate(e)}addAfterUpdate(e){this._onAfterUpdates.push(e)}hook(e,t,s=10){this._hooks[e]?(t instanceof Re||(t={priority:s,act:t}),this._hooks[e].find((e=>e.act===t.act))?console.error(`MeshUIComponent::hook() - The provided func('${t.act}') is already registered in hooks. Aborted`):(e._hooks[e].push(t),e._hooks[e].sort(((e,t)=>e.priority<t.priority?-1:e.priority>t.priority?1:0)))):console.error(`MeshUIComponent::hook() - The provided type('${e}') is not valid on ${typeof this} component`)}unhook(e,t){if(!this._hooks[e])return void console.error(`MeshUIComponent::unhook() - The provided type('${e}') is not valid on ${typeof this} component`);t instanceof Re||(t={act:t});const s=this._hooks[e].findIndex((e=>e.act===t.act));-1!==s&&this._hooks[e].splice(s,1)}performHooks(e,t=null){for(let s=0;s<e.length;s++)e[s](t)}set(e){let t,s,r;if(xe.register(this),e&&JSON.stringify(e)!==JSON.stringify({})){e.alignContent&&(e.alignItems=e.alignContent,e.textAlign||(e.textAlign=e.alignContent),console.warn("`alignContent` property has been deprecated, please rely on `alignItems` and `textAlign` instead."),delete e.alignContent),e.alignItems&&_(e.alignItems);for(const a of Object.keys(e))if(this[a]!=e[a]){const i=e[a];switch(a){case"content":case"fontWeight":case"fontStyle":case"whiteSpace":this.isText&&(t=!0),s=!0,this[a]=i;break;case"fontSize":case"fontKerning":case"breakOn":case"segments":case"margin":case"contentDirection":case"justifyContent":case"alignContent":case"alignItems":case"textAlign":case"textType":s=!0,this[a]=i;break;case"bestFit":this.isBlock&&(t=!0,s=!0),this[a]=i;break;case"width":case"height":case"padding":(this.isInlineBlock||this.isBlock)&&(t=!0),s=!0,this[a]=i;break;case"letterSpacing":case"interLine":this.isBlock&&(t=!0),s=!0,this[a]=i;break;case"flexDirection":s=!0,this.contentDirection=i;break;case"backgroundColor":this[a].copy(i),s=!0,r=!0;break;case"fontColor":this[a].copy(i),r=!0;break;case"fontOpacity":case"fontSupersampling":case"borderColor":case"backgroundOpacity":case"backgroundTexture":case"backgroundSize":case"borderOpacity":r=!0,this[a]=i;break;case"hiddenOverflow":default:this[a]=i;break;case"offset":this.isBlock&&!this.parentUI||(this[a]=i,this.position.z=i);break;case"borderRadius":this._fourDimensionsValueSetter(this._borderRadius,i);break;case"borderRadiusTopLeft":case"borderTopLeftRadius":this._borderRadius.x=i;break;case"borderRadiusTopRight":case"borderTopRightRadius":this._borderRadius.y=i;break;case"borderRadiusBottomRight":case"borderBottomRightRadius":this._borderRadius.z=i;break;case"borderRadiusBottomLeft":case"borderBottomLeftRadius":this._borderRadius.w=i;break;case"borderRadiusTop":case"borderTopRadius":this._borderRadius.x=i,this._borderRadius.y=i;break;case"borderRadiusRight":case"borderRightRadius":this._borderRadius.y=i,this._borderRadius.z=i;break;case"borderRadiusLeft":case"borderLeftRadius":this._borderRadius.x=i,this._borderRadius.w=i;break;case"borderRadiusBottom":case"borderBottomRadius":this._borderRadius.z=i,this._borderRadius.w=i;break;case"borderWidth":this._fourDimensionsValueSetter(this._borderWidth,i);break;case"borderWidthTop":this._borderWidth.x=i;break;case"borderWidthRight":this._borderWidth.y=i;break;case"borderWidthBottom":this._borderWidth.z=i;break;case"borderWidthLeft":this._borderWidth.w=i;break;case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":(this.isInlineBlock||this.isBlock)&&(t=!0),s=!0,this.padding=i;break;case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":(this.isInlineBlock||this.isBlock)&&(t=!0),s=!0,this.margin=i}}if(e.fontFamily instanceof me)this.fontFamily=e.fontFamily,this.font=e.fontFamily.getVariant(ke.yu,Se.yu);else if("string"!=typeof e.fontFamily||e.fontTexture){if(e.fontFamily&&e.fontTexture){const t=e.fontFamily.pages?e.fontFamily.info.face:e.fontFamily;let s=ye.getFontFamily(t);s||(s=ye.addFontFamily(t).addVariant(ke.yu,Se.yu,e.fontFamily,e.fontTexture)),this.fontFamily=s,this.font=s.getVariant(ke.yu,Se.yu)}}else{const t=ye.getFontFamily(e.fontFamily);t&&(this.fontFamily=t,this.font=t.getVariant(ke.yu,Se.yu))}this.parentUI&&"none"!=this.parentUI.getBestFit()&&this.parentUI.update(!0,!0,!1),this.update(t,s,r),s&&this.getHighestParent().update(!1,!0,!1),this._transferToMaterial(e)}}setupState(e){this.states[e.state]={attributes:e.attributes,onSet:e.onSet}}setState(e){const t=this.states[e];t?e!==this.currentState&&(this.currentState=e,t.onSet&&t.onSet(),t.attributes&&this.set(t.attributes)):console.warn(`state "${e}" does not exist within this component`)}clear(){this.traverse((e=>{xe.disposeOf(e),e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()})),this._pseudoClassList.dispose(),this._pseudoClassList=null,this._classList.dispose(),this._pseudoClassList=null}get material(){return this._material}set material(e){this._material=e,this._materialProperties={...e.constructor.fontMaterialProperties},this._transferToMaterial(),this._main&&(this._main.material=this._material)}set customDepthMaterial(e){this._customDepthMaterial=e,this._transferToMaterial(),this._main&&(this._main.customDepthMaterial=this._customDepthMaterial)}get customDepthMaterial(){return this._customDepthMaterial}_transferToMaterial(e=null){if(this._material){if(!e){e={};for(const t in this._materialProperties){let s=this[t];if(void 0===s){const e=t[0].toUpperCase()+t.substring(1);this["get"+e]&&(s=this["get"+e]())}void 0!==s&&(e[t]=s)}}for(const t in this._materialProperties){const s=this._materialProperties[t];if(void 0!==e[t]){const r=s.t?s.t:$e;r(this._material,s.m,e[t]),this._customDepthMaterial&&r(this._customDepthMaterial,s.m,e[t])}}}}_fourDimensionsValueSetter(e,t){if(t instanceof o.Ltg)e.copy(t);else{if(("string"==typeof t||t instanceof String)&&(t=t.split(" ")),Array.isArray(t))switch((t=t.map((e=>parseFloat(e)))).length){case 1:return void e.setScalar(t[0]);case 2:return e.x=e.z=t[0],void(e.y=e.w=t[1]);case 3:return e.x=t[0],e.y=t[1],void(e.z=t[2]);case 4:return e.x=t[0],e.y=t[1],e.z=t[2],void(e.w=t[3]);default:return void console.error("Four Dimension property has more than four values")}isNaN(t)||e.setScalar(t)}}}}const $e=function(e,t,s){e[t]=s};class Ge extends o.Kj0{constructor(e){const t=new o.BKK;t.setAttribute("uvB",new o.TlE(new Float32Array(t.getAttribute("uv").array),2)).name="uvB",super(t,e),this.castShadow=!0,this.receiveShadow=!0,this.name="MeshUI-Frame"}}let Ze=null;function qe(...e){if(!Ze)throw new Error("Cannot use mixins with Base null");let t=Ze;Ze=null;let s,r=e.length;for(;--r>=0;)s=e[r],t=s(t);return t}qe.withBase=e=>(Ze=e,qe);const Xe={msdf_alphaglyph_pars_vertex:ce.Z,msdf_alphaglyph_vertex:pe.Z,msdf_offset_vertex:le.Z,msdf_alphaglyph_pars_fragment:de.Z,msdf_alphaglyph_fragment:ue.Z,frame_border_pars_vertex:"\n\n// FrameBorder vertex pars\nattribute vec2 uvB;\nvarying vec2 vUvB;\n\n",frame_border_vertex:"\n\n\t// FrameBorder vertex shader\n\tvUvB = uvB;\n\n",frame_common_pars:"\n\n// To be removed - required for both border and background\nuniform vec2 frameSize;\nuniform vec2 textureSize;\n\n",frame_border_pars_fragment:"\n\n// borders sequences are : x:TOP, y:RIGHT, z:BOTTOM, w:LEFT\nuniform vec4 borderWidth;\nuniform vec3 borderColor;\nuniform float borderOpacity;\nuniform vec4 borderRadius;\n\nvarying vec2 vUvB;\n\n// Borders\nfloat getEdgeDist() {\n\n\t// This allows to go the uv position in a [-1, 1] referencial system\n\tvec2 ndc = vec2( vUvB.x * 2.0 - 1.0, vUvB.y * 2.0 - 1.0 );\n\n\t//\n\tvec2 planeSpaceCoord = vec2( frameSize.x * 0.5 * ndc.x, frameSize.y * 0.5 * ndc.y );\n\tvec2 corner = frameSize * 0.5;\n\tvec2 offsetCorner = corner - abs( planeSpaceCoord );\n\n\tfloat innerRadDist = min( offsetCorner.x, offsetCorner.y ) * -1.0;\n\n\tif (vUvB.x < 0.5 && vUvB.y >= 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - frameSize * 0.5 + borderRadius.x, 0.0 ) ) - borderRadius.x;\n\t\tfloat s = step( innerRadDist * -1.0, borderRadius.x );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUvB.x >= 0.5 && vUvB.y >= 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - frameSize * 0.5 + borderRadius.y, 0.0 ) ) - borderRadius.y;\n\t\tfloat s = step( innerRadDist * -1.0, borderRadius.y );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUvB.x >= 0.5 && vUvB.y < 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - frameSize * 0.5 + borderRadius.z, 0.0 ) ) - borderRadius.z;\n\t\tfloat s = step( innerRadDist * -1.0, borderRadius.z );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUvB.x < 0.5 && vUvB.y < 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - frameSize * 0.5 + borderRadius.w, 0.0 ) ) - borderRadius.w;\n\t\tfloat s = step( innerRadDist * -1.0, borderRadius.w );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n}\n\n",frame_border_fragment:"\n\nfloat edgeDist = getEdgeDist();\nfloat change = fwidth( edgeDist );\n\nfloat alpha = smoothstep( change, 0.0, edgeDist );\ndiffuseColor.a *= alpha;\n\nif( diffuseColor.a <= 0.02 ) discard;\n\n// if the length square is not zerp\nif( borderWidth.x * borderWidth.x + borderWidth.y * borderWidth.y + borderWidth.z * borderWidth.z + borderWidth.w * borderWidth.w  > 0.0 )\n{\n\n\tvec4 borderColor = vec4( borderColor, borderOpacity * alpha );\n\tfloat stp = smoothstep( edgeDist + change, edgeDist, borderWidth.x * -1.0 );\n\n\t// @TODO: Implement border width sequence : top,right,bottom,left\n\t// if( vUvB.x <= borderWidth.w || vUvB.x >= 1.0 - borderWidth.y || vUvB.y >= 1.0 - borderWidth.x || vUvB.y <= borderWidth.z )\n\t// {\n\n\t//\t// would be nicer with smoothstep\n\t//\tdiffuseColor.rgb = borderColor.rgb;\n\n\t//}\n\n\tif( diffuseColor.a <= 0.02 ) discard;\n\n\tdiffuseColor = mix( diffuseColor, borderColor, stp );\n\n}\n\n",frame_background_pars_fragment:"\n\n#ifdef USE_MAP\n\nvec4 sampleTexture() {\n\n\tvec2 uv = vUv;\n\n\t// default stretch\n\t#if BACKGROUND_MAPPING != 0\n\n\tfloat textureRatio = textureSize.x / textureSize.y;\n\tfloat panelRatio = frameSize.x / frameSize.y;\n\tfloat ratio = panelRatio / textureRatio;\n\tfloat ratio2 = textureRatio / panelRatio;\n\n\t\t// contain\n\t\t#if BACKGROUND_MAPPING == 1\n\t\tif ( textureRatio < panelRatio ) { // repeat on X\n\t\t\tfloat newX = uv.x * ratio;\n\t\t\tnewX += 0.5 - 0.5 * ratio;\n\t\t\tuv.x = newX;\n\t\t} else { // repeat on Y\n\t\t\tfloat newY = uv.y * ratio2;\n\t\t\tnewY += 0.5 - 0.5 * ratio2;\n\t\t\tuv.y = newY;\n\t\t}\n\t\t#else\n\t\t// cover\n\t\tif ( textureRatio < panelRatio ) { // stretch on Y\n\t\t\tfloat newY = uv.y * ratio2;\n\t\t\tnewY += 0.5 - 0.5 * ratio2;\n\t\t\tuv.y = newY;\n\t\t} else { // stretch on X\n\t\t\tfloat newX = uv.x * ratio;\n\t\t\tnewX += 0.5 - 0.5 * ratio;\n\t\t\tuv.x = newX;\n\t\t}\n\n\t\t#endif\n\n\t#endif\n\n\treturn texture2D( map, uv );\n\n}\n#endif\n",frame_background_fragment:"\n#ifdef USE_MAP\n\n\tvec4 textureSample = sampleTexture();\n\tdiffuseColor *= textureSample;\n\n#endif\n"},Ke=`\n// Would be automatic on three materials and from USE_UV\n#ifdef USE_MAP\nvarying vec2 vUv;\n#endif\n\n${Xe.frame_border_pars_vertex}\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#ifdef USE_MAP\n\tvUv = uv;\n\t#endif\n\n\t${Xe.frame_border_vertex}\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <clipping_planes_vertex>\n\n}\n`,Ye=`\n\n// Basic\nuniform vec3 diffuse;\nuniform float opacity;\n\n${Xe.frame_common_pars}\n\n${Xe.frame_border_pars_fragment}\n\n\n#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif\n\n${Xe.frame_background_pars_fragment}\n\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t// map\n\t${Xe.frame_background_fragment}\n\n\t${Xe.frame_border_fragment}\n\n\n\t// output\n\tgl_FragColor = diffuseColor;\n\n\n\t#include <clipping_planes_fragment>\n}\n`;var Je=s("./src/frame/utils/FrameMaterialUtils.js");class Qe extends o.jyz{static get fontMaterialProperties(){return Je.Z.frameMaterialProperties}constructor(){super({uniforms:{alphaTest:{value:.02},map:{value:null},diffuse:{value:new o.Ilk(16777215)},opacity:{value:1},borderColor:{value:null},borderRadius:{value:new o.Ltg(0,0,0,0)},borderWidth:{value:new o.Ltg(0,0,0,0)},borderOpacity:{value:null},frameSize:{value:new o.FM8(1,1)},textureSize:{value:new o.FM8(1,1)}},side:o.ehD,transparent:!0,clipping:!0,vertexShader:Ke,fragmentShader:Ye,extensions:{derivatives:!0}}),this.defines.USE_ALPHATEST="",this.needsUpdate=!0}set map(e){this.uniforms.map.value=e,e?void 0===this.defines.USE_UV&&(this.defines.USE_UV="",this.needsUpdate=!0):void 0!==this.defines.USE_UV&&(delete this.defines.USE_UV,this.needsUpdate=!0),this.needsUpdate=!0}get map(){return this.uniforms.map.value}get alphaTest(){return this.uniforms.alphaTest.value}set alphaTest(e){this.uniforms.alphaTest.value=e}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get opacity(){return this.uniforms.opacity.value}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}}class et extends(qe.withBase(o.Tme)(F,te,Ne)){constructor(e){super(e),this.isBlock=!0,this.size=new o.FM8(1,1),this._material=new Qe,this._main=new Ge(this._material),this._materialProperties={...Je.Z.frameMaterialProperties},this._main.onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()},this.add(this._main),this.set(e),this._transferToMaterial()}get frame(){return this._main}parseParams(){}updateLayout(){const e=this.getWidth(),t=this.getHeight();if(!e||!t)return console.warn("Block got no dimension from its parameters or from children parameters"),void console.warn(this.copyAttributes());this.size.set(e,t),this._main.scale.set(e,t,1),this._main.renderOrder=this.getParentsNumber(),this.autoLayout&&this.setPosFromParentRecords(),this.childrenInlines.length&&this.computeInlinesPosition(),this.computeChildrenPosition()}updateInner(){}}function tt(e){return class extends e{constructor(e){super(e),this.isInline=!0}}}const st=function e(t){t.children.forEach((s=>{s.children.length>0&&e(s),t.remove(s),xe.disposeOf(s),s.material&&s.material.dispose(),s.geometry&&s.geometry.dispose()})),t.children=[]};var rt=s("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js");class at extends(qe.withBase(o.Tme)(tt,Ne)){constructor(e){super(),this.isText=!0,this._textContent=null,this._textContentGlyphs=null,this._textContentInlines=null,this._font=null,this.set(e),this.addEventListener("added",this._acquireFont)}_handleFontVariantReady=()=>{this.update(!0,!0,!1),this.getHighestParent().update(!1,!0,!1),this._font.removeEventListener("ready",this._handleFontVariantReady)};_acquireFont=()=>{if(!this._font){let e=this.getFontFamily();if(e)if(e instanceof me)this.font=e.getVariant(this.getFontWeight(),this.getFontStyle());else{const t=e.pages?e.info.face:e;e=ye.getFontFamily(t),e&&(this.font=e.getVariant(this.getFontWeight(),this.getFontStyle()))}}};_onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()};set font(e){if(this._font&&!this._font.isReady&&this._font.removeEventListener("ready",this._handleFontVariantReady),this._font=e,this._font.isReady?this._handleFontVariantReady():(this.inlines=null,this._font.addEventListener("ready",this._handleFontVariantReady)),this._material){!(this._material.isDefault&&this._material.isDefault())||this._material instanceof this._font.fontMaterial?this._transferToMaterial():this.material=new this._font.fontMaterial}else this.material=new this._font.fontMaterial}get font(){return this._font}_buildContentKernings(){if("none"!==this.getFontKerning())for(let e=1;e<this._textContent.length;e++){const t=this._textContent[e-1]+this._textContent[e];this._textContentInlines[e].kerning=this._font.getKerningAmount(t)}}parseParams(){this._acquireFont(),this.content&&0!==this.content.length&&this._font&&this._font.isReady&&(this._textContent=W(this.content,this.getWhiteSpace()),this._textContentGlyphs=this._textContent.split("").map((e=>this._font.getTypographicGlyph(e))),this._textContentInlines=this._textContentGlyphs.map((e=>e.asInlineGlyph())),this._buildContentKernings(),this.inlines=this._textContentInlines,this.calculateInlines(this._fitFontSize||this.getFontSize()))}updateLayout(){if(st(this),this.inlines){const e=this.inlines.map((e=>this._font.getGeometricGlyph(e,this.getSegments()).translate(e.offsetX,e.offsetY,0))),t=(0,rt.qf)(e);this._main=new o.Kj0(t,this._material),this._customDepthMaterial&&(this._main.customDepthMaterial=this._customDepthMaterial),this._main.renderOrder=1/0,this._main.onBeforeRender=this._onBeforeRender,this.add(this._main)}}updateInner(){}calculateInlines(e){if(!this._font||!this._font.isReady)return;if(!this._textContent)return;const t=this.getWhiteSpace(),s=z(t),r=this.getBreakOn(),a=e/this._font.typographic.size;for(let i=0;i<this._textContent.length;i++){const n=this._textContent[i],h=this._textContentInlines[i];h.resetOffsets();let o=null;t!==B&&(r.includes(n)||n.match(/\s/g))&&(o="possible"),n.match(/\n/g)&&(o=s),h.lineBreak=o,h.fontSize=e,h.fontFactor=a}}}class it extends(qe.withBase(o.Tme)(tt,F,te,Ne)){constructor(e){super(e),this.isInlineBlock=!0,this.size=new o.FM8(1,1),this._material=new Qe,this._main=new Ge(this._material),this._materialProperties={...Je.Z.frameMaterialProperties},this._main.onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()},this.add(this._main),void 0===e.backgroundOpacity&&(e.backgroundOpacity=1),void 0===e.backgroundColor&&e.backgroundTexture&&(e.backgroundColor=new o.Ilk(16777215)),this.set(e),this._transferToMaterial()}parseParams(){this.width||console.warn("inlineBlock has no width. Set to 0.3 by default"),this.height||console.warn("inlineBlock has no height. Set to 0.3 by default"),this.inlines=[{lineBreak:"possible",kerning:0,offsetX:0,offsetY:0,width:this.width||.3,height:this.height||.3,anchor:0,xadvance:this.width||.3,xoffset:0,yoffset:0,lineHeight:this.height||.3,lineBase:this.height||.3}]}updateLayout(){const e=this.getWidth(),t=this.getHeight();if(this.inlines){const e=this.inlines[0];this.position.set(e.width/2,e.height/2,0),this.position.x+=e.offsetX,this.position.y+=e.offsetY,this.position.y+=e.anchor}this.size.set(e,t),this._main.scale.set(e,t,1),this._main.renderOrder=this.getParentsNumber(),this.position.z=this.getOffset()}updateInner(){}}const nt=[[[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]}],[{width:.2,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ht=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ot=[[[{width:1/12,chars:[{lowerCase:"й",upperCase:"Й"},{lowerCase:"q",upperCase:"Q"}]},{width:1/12,chars:[{lowerCase:"ц",upperCase:"Ц"},{lowerCase:"w",upperCase:"W"}]},{width:1/12,chars:[{lowerCase:"у",upperCase:"У"},{lowerCase:"e",upperCase:"E"}]},{width:1/12,chars:[{lowerCase:"к",upperCase:"К"},{lowerCase:"r",upperCase:"R"}]},{width:1/12,chars:[{lowerCase:"е",upperCase:"Е"},{lowerCase:"t",upperCase:"T"}]},{width:1/12,chars:[{lowerCase:"н",upperCase:"Н"},{lowerCase:"y",upperCase:"Y"}]},{width:1/12,chars:[{lowerCase:"г",upperCase:"Г"},{lowerCase:"u",upperCase:"U"}]},{width:1/12,chars:[{lowerCase:"ш",upperCase:"Ш"},{lowerCase:"i",upperCase:"I"}]},{width:1/12,chars:[{lowerCase:"щ",upperCase:"Щ"},{lowerCase:"o",upperCase:"O"}]},{width:1/12,chars:[{lowerCase:"з",upperCase:"З"},{lowerCase:"p",upperCase:"P"}]},{width:1/12,chars:[{lowerCase:"х",upperCase:"Х"},{lowerCase:"{",upperCase:"["}]},{width:1/12,chars:[{lowerCase:"ъ",upperCase:"Ъ"},{lowerCase:"}",upperCase:"]"}]}],[{width:1/12,chars:[{lowerCase:"ф",upperCase:"Ф"},{lowerCase:"a",upperCase:"A"}]},{width:1/12,chars:[{lowerCase:"ы",upperCase:"Ы"},{lowerCase:"s",upperCase:"S"}]},{width:1/12,chars:[{lowerCase:"в",upperCase:"В"},{lowerCase:"d",upperCase:"D"}]},{width:1/12,chars:[{lowerCase:"а",upperCase:"А"},{lowerCase:"f",upperCase:"F"}]},{width:1/12,chars:[{lowerCase:"п",upperCase:"П"},{lowerCase:"g",upperCase:"G"}]},{width:1/12,chars:[{lowerCase:"р",upperCase:"Р"},{lowerCase:"h",upperCase:"H"}]},{width:1/12,chars:[{lowerCase:"о",upperCase:"О"},{lowerCase:"j",upperCase:"J"}]},{width:1/12,chars:[{lowerCase:"л",upperCase:"Л"},{lowerCase:"k",upperCase:"K"}]},{width:1/12,chars:[{lowerCase:"д",upperCase:"Д"},{lowerCase:"l",upperCase:"L"}]},{width:1/12,chars:[{lowerCase:"ж",upperCase:"Ж"},{lowerCase:":",upperCase:";"}]},{width:1/12,chars:[{lowerCase:"э",upperCase:"Э"},{lowerCase:'"',upperCase:"'"}]},{width:1/12,chars:[{lowerCase:"ё",upperCase:"Ё"},{lowerCase:"|",upperCase:"\\"}]}],[{width:.125,command:"shift",chars:[{icon:"shift"}]},{width:1/12,chars:[{lowerCase:"я",upperCase:"Я"},{lowerCase:"z",upperCase:"Z"}]},{width:1/12,chars:[{lowerCase:"ч",upperCase:"Ч"},{lowerCase:"x",upperCase:"X"}]},{width:1/12,chars:[{lowerCase:"с",upperCase:"С"},{lowerCase:"c",upperCase:"C"}]},{width:1/12,chars:[{lowerCase:"м",upperCase:"М"},{lowerCase:"v",upperCase:"V"}]},{width:1/12,chars:[{lowerCase:"и",upperCase:"И"},{lowerCase:"b",upperCase:"B"}]},{width:1/12,chars:[{lowerCase:"т",upperCase:"Т"},{lowerCase:"n",upperCase:"N"}]},{width:1/12,chars:[{lowerCase:"ь",upperCase:"Ь"},{lowerCase:"m",upperCase:"M"}]},{width:1/12,chars:[{lowerCase:"б",upperCase:"Б"},{lowerCase:",",upperCase:""}]},{width:1/12,chars:[{lowerCase:"ю",upperCase:"Ю"},{lowerCase:".",upperCase:""}]},{width:.125,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.3,command:"switch",chars:[{lowerCase:"АБВ"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ct=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"ü",upperCase:"Ü"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"ö",upperCase:"Ö"}]},{width:1/11,chars:[{lowerCase:"ä",upperCase:"Ä"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],lt=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"ñ",upperCase:"Ñ"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],dt=[[[{width:.1,chars:[{lowerCase:";",upperCase:":"},{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"ς",upperCase:"ς"},{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"ε",upperCase:"Ε"},{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"ρ",upperCase:"Ρ"},{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"τ",upperCase:"Τ"},{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"υ",upperCase:"Υ"},{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"θ",upperCase:"Θ"},{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"ι",upperCase:"Ι"},{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"ο",upperCase:"Ο"},{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"π",upperCase:"Π"},{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"α",upperCase:"Α"},{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"σ",upperCase:"Σ"},{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"δ",upperCase:"Δ"},{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"φ",upperCase:"Φ"},{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"γ",upperCase:"Γ"},{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"η",upperCase:"Η"},{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"ξ",upperCase:"Ξ"},{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"κ",upperCase:"Κ"},{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"λ",upperCase:"Λ"},{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"ζ",upperCase:"Ζ"},{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"χ",upperCase:"Χ"},{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"ψ",upperCase:"Ψ"},{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"ω",upperCase:"Ω"},{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"β",upperCase:"Β"},{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"ν",upperCase:"Ν"},{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"μ",upperCase:"Μ"},{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ut=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"å",upperCase:"Å"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"æ",upperCase:"Æ"}]},{width:1/11,chars:[{lowerCase:"ø",upperCase:"Ø"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],pt=new o.dpR;class wt extends(qe.withBase(o.Tme)(F,Ne)){constructor(e){let t;if(e||(e={}),e.width||(e.width=1),e.height||(e.height=.4),e.margin||(e.margin=.003),e.padding||(e.padding=.01),super(e),this.currentPanel=0,this.isLowerCase=!0,this.charsetCount=1,e.language||navigator.language)switch(e.language||navigator.language){case"fr":case"fr-CH":case"fr-CA":t=nt;break;case"ru":this.charsetCount=2,t=ot;break;case"de":case"de-DE":case"de-AT":case"de-LI":case"de-CH":t=ct;break;case"es":case"es-419":case"es-AR":case"es-CL":case"es-CO":case"es-ES":case"es-CR":case"es-US":case"es-HN":case"es-MX":case"es-PE":case"es-UY":case"es-VE":t=lt;break;case"el":this.charsetCount=2,t=dt;break;case"nord":t=ut;break;default:t=ht}else t=ht;this.keys=[],this.panels=t.map((t=>{const s=e.height/t.length-2*e.margin,r=new et({width:e.width+2*e.padding,height:e.height+2*e.padding,offset:0,padding:e.padding,fontFamily:e.fontFamily,fontTexture:e.fontTexture,backgroundColor:e.backgroundColor,backgroundOpacity:e.backgroundOpacity});return r.charset=0,r.add(...t.map((t=>{const a=new et({width:e.width,height:s,margin:e.margin,contentDirection:"row",justifyContent:"center"});a.frame.visible=!1;const i=[];return t.forEach((t=>{const a=new et({width:e.width*t.width-2*e.margin,height:s,margin:e.margin,justifyContent:"center",offset:0}),n=t.chars[r.charset].lowerCase||t.chars[r.charset].icon||"undif";if("enter"===n&&e.enterTexture||"shift"===n&&e.shiftTexture||"backspace"===n&&e.backspaceTexture){const t=(()=>{switch(n){case"backspace":return e.backspaceTexture;case"enter":return e.enterTexture;case"shift":return e.shiftTexture;default:console.warn("There is no icon image for this key")}})();pt.load(t,(e=>{a.add(new it({width:.65*a.width,height:.65*a.height,backgroundSize:"contain",backgroundTexture:e}))}))}else a.add(new at({content:n,offset:0}));a.type="Key",a.info=t,a.info.input=n,a.panel=r,i.push(a),this.keys.push(a)})),a.add(...i),a}))),r})),this.add(this.panels[0]),this.set(e)}setNextPanel(){this.panels.forEach((e=>{this.remove(e)})),this.currentPanel=(this.currentPanel+1)%this.panels.length,this.add(this.panels[this.currentPanel]),this.update(!0,!0,!0)}setNextCharset(){this.panels[this.currentPanel].charset=(this.panels[this.currentPanel].charset+1)%this.charsetCount,this.keys.forEach((e=>{if(!this.panels[this.currentPanel].getObjectById(e.id))return;const t=e.info.chars[e.panel.charset]||e.info.chars[0],s=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(!e.childrenTexts.length)return;const r=e.childrenTexts[0];e.info.input=s,r.set({content:s}),r.update(!0,!0,!0)}))}toggleCase(){this.isLowerCase=!this.isLowerCase,this.keys.forEach((e=>{const t=e.info.chars[e.panel.charset]||e.info.chars[0],s=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(!e.childrenTexts.length)return;const r=e.childrenTexts[0];e.info.input=s,r.set({content:s}),r.update(!0,!0,!0)}))}parseParams(){}updateLayout(){}updateInner(){}}class ft extends Array{constructor(...e){super(...e)}match(e){let t=this[this.length-1];if(!t.match(e))return!1;if(1===this.length)return!0;const s=[];let r=e;for(;r.parentUI;)s.push(r.parentUI),r=r.parentUI;if(0===s.length)return!1;let a=e,i=null;for(let e=this.length-2;e>=0;e--){const r=this[e];if(0===s.length)return!1;if(i=s.shift(),t.combinator&&""!==t.combinator){if(">"===t.combinator){if(!r.match(i))return!1;a=i}else if("~"===t.combinator||"+"===t.combinator){const e=i.childrenUIs.indexOf(a);let s;s="~"===t.combinator?i.childrenUIs.slice(e+1):i.childrenUIs.slice(e+1,e+2);for(let e=0;e<s.length;e++)if(r.match(s[e])){a=i;break}}}else{for(;!r.match(i);){if(0===s.length)return!1;if(s.length<e+1)return!1;i=s.shift()}a=i}}return!0}static build(e){const t=e.matchAll(Fe),s=e.split("");for(const e of t)for(let t=0;t<e[1].length;t++)s[e.index+t]="_";const r=s.join("").matchAll(Pe);if(!r)return[];const a=[];for(const e of r)a.push(e.index);a.push(e.length);const i=new ft;for(let t=0;t<a.length-1;t++)i.push(new Ve(e.substring(a[t],a[t+1])));return i}}class Ct{constructor(e,t){this._query=ft.build(e),this._specificity=function(e){e instanceof ft||(e=ft.build(e));let t=0;for(let s=0;s<e.length;s++){const r=e[s];for(let e=0;e<r.conditions.length;e++){const s=r.conditions[e];switch(s.type){case"id":t+=1e4;break;case"class":case"pseudoClass":case"attribute":t+=100*s.value.length;break;default:t+=1}}}return t}(this._query),this._order=0,this._styles={};for(let e=0;e<t.length;e++){const s=t[e];let r=t[s];if(r.match(/rem|px|em/g)&&(r=parseFloat(r.replace(/rem|px|em/g,""))),-1!==s.indexOf("color")){if(0===r.indexOf("rgba")){const e=r.match(/([\d\.]+)/g);if(4===e.length){const r=s.replace("color","opacity");t[r]&&""!==t[r]||(this._styles[gt(r)]=parseFloat(e[3]))}r=new o.Ilk(`rgb(${e[0]},${e[1]},${e[2]})`)}r=new o.Ilk(r)}"color"===s?this._styles.fontColor=r:this._styles[gt(s)]=r}this._enabled=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get query(){return this._query}get specificity(){return this._specificity}get order(){return this._order}set order(e){this._order=e}get styles(){return this._styles}}function gt(e){return e.replace(/-./g,(e=>e[1].toUpperCase()))}class mt{constructor(e){this._condition=e,this._rules=[],this._matchMediaQuery=window.matchMedia(e)}addRule(e){this._rules.push(e)}init(e){this._callback=e,this._matchMediaQuery.addEventListener("change",this.handleMatchMediaChanges),this._matchMediaQuery.matches||this.disableRules()}enableRules(){for(const e of this._rules)e.enabled=!0}disableRules(){for(const e of this._rules)e.enabled=!1}handleMatchMediaChanges=e=>{e.matches?this.enableRules():this.disableRules(),this._callback()}}const _t=[];function vt(e,t=null){e instanceof ft||(e=ft.build(e)),t||(t=_t),Array.isArray(t)||(t=[t]);let s=[];for(let r=0;r<t.length;r++)s=s.concat(yt(t[r],e));for(let e=s.length-1;e>=0;e--){s.indexOf(s[e])!==e&&s.splice(e,1)}return s}function yt(e,t,s=!0){let r=[];if(s)for(let s=0;s<e.childrenUIs.length;s++)r=r.concat(yt(e.childrenUIs[s],t));if(t[0].match(e)){if(1===t.length)return r.push(e),r;const s=t.slice(1);if(s&&""!==s)if(s[0].combinator&&""!==s[0].combinator)if(">"===s[0].combinator)for(let t=0;t<e.childrenUIs.length;t++)r=r.concat(yt(e.childrenUIs[t],s,!1));else{if(!e.parentUI||"~"!==s[0].combinator&&"+"!==s[0].combinator)throw new Error(`UIDocument::querySelectorAll() - The provided css combinator('${s[0].combinator}') is not implemented`);{const t=e.parentUI.childrenUIs.indexOf(e);let a;a="~"===s[0].combinator?e.parentUI.childrenUIs.slice(t+1):e.parentUI.childrenUIs.slice(t+1,t+2);for(let e=0;e<a.length;e++)r=r.concat(yt(a[e],s,!1))}}else for(let t=0;t<e.childrenUIs.length;t++)r=r.concat(yt(e.childrenUIs[t],s))}return r}let bt=null,xt=null,kt=[];function St(e=!1){if(e&&document){for(let e=0;e<kt.length;e++){let t=kt[e];t.disconnect(),t=null}kt=[],function(e){const t=new MutationObserver(Ut);t.observe(e,{childList:!0,subtree:!0}),kt.push(t)}(document.documentElement);const e=document.querySelectorAll('link[media="vr"],style[media="vr"]');for(let t=0;t<e.length;t++)It(e[t])}if(bt=[],xt=[],document&&document.styleSheets){for(const e of document.styleSheets)if("vr"===e.media.mediaText){const{rules:t,conditions:s}=Pt(e.cssRules);bt=bt.concat(t),xt=xt.concat(s)}for(let e=0;e<bt.length;e++)bt[e].order=e;bt.sort(Ft);for(const e of xt)e.init((()=>{setTimeout((()=>{Tt()}),125)}))}Tt()}function Ut(e){let t=!1;e.forEach((function(e){for(var s=0;s<e.addedNodes.length;s++)Rt(e.addedNodes[s])&&(t=!0);for(let s=0;s<e.removedNodes.length;s++)Rt(e.removedNodes[s])&&(t=!0)})),t&&St(!0)}function Rt(e){return"LINK"===e.tagName||"STYLE"===e.tagName&&"vr"===e.getAttribute("media")}function It(e){const t=new MutationObserver((function(e){St(!0)}));t.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),kt.push(t)}function Tt(){for(const e of bt){if(!e.enabled)continue;const t=vt(e.query);for(const s of t)s.set(e.styles)}}function Ft(e,t){return e.specificity<t.specificity?-1:e.specificity>t.specificity?1:e.order<t.order?-1:e.order>t.order?1:0}function Pt(e,t=null){let s=[],r=null,a=[];t&&""!==t&&(r=new mt(t),a.push(r));for(let i=0;i<e.length;i++){const n=e[i];if(n.selectorText){const e=new Ct(n.selectorText,n.style);s.push(e),r&&r.addRule(e)}else if(n.conditionText){let e=t;e&&""!==e?e+=` and ${n.conditionText}`:e=n.conditionText;const{rules:r,conditions:i}=Pt(n.cssRules,e);s=s.concat(r),a=a.concat(i)}}return{rules:s,conditions:a}}const Ot=()=>xe.update(),Bt={Block:et,Text:at,InlineBlock:it,Keyboard:wt,FontLibrary:ye,update:Ot,TextAlign:h,Whitespace:n,JustifyContent:i,AlignItems:a,ContentDirection:r,MSDFFontMaterialUtils:oe.Z,ShaderChunkUI:Xe,addRoot:function(e){-1===_t.indexOf(e)&&_t.push(e)},removeRoot:function(e){const t=_t.indexOf(e);-1!==t&&_t.splice(t,1)},querySelectorAll:vt,loadSheets:St};void 0!==s.g&&(s.g.ThreeMeshUI=Bt);const Et=/^ex__(bounds_uv|msdf_materials)$/.test(s.j)?null:Bt},"./src/utils/font/FontStyle.js":(e,t,s)=>{s.d(t,{KW:()=>a,yu:()=>r});const r="normal",a="italic"},"./src/utils/font/FontWeight.js":(e,t,s)=>{s.d(t,{Pl:()=>a,yu:()=>r});const r="400",a="700"}}]);